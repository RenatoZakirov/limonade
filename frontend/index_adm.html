<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Объявления</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
	<link rel="icon" type="image/png" href="https://www.limonade.pro/backend/uploads/images/templates/icon.png">
	<style>
		[v-cloak] {
			display: none;
		}
		.big-top-margin {
			margin-top: 56px;
		}
		.no-border-top {
			border-top: none;
		}
	</style>
</head>
<body>
	<div id="app" v-cloak>
		<div class="d-none d-md-block">
			<div class="d-flex justify-content-center p-4 fs-3" >
				Этот сайт работает только на мобильных устройствах...<br>
				This site only works on mobile devices...
			</div>
        </div>

		<div class="d-block d-md-none big-top-margin">

			<div class="container">

				<nav class="navbar bg-body-tertiary fixed-top shadow-sm">
					<div class="container-fluid">

						<button @click="cleanForm()" class=" btn btn-sm btn-success shadow-sm">
							<img src="/backend/uploads/images/templates/icon.png" class="rounded me-1" alt="Limonade" width="24" height="24">
							LIMONADE
						</button>
						<!-- <button @click="cleanForm()" class=" btn btn-sm btn-success shadow-sm">LIMONADE.PRO</button> -->
						<!-- <button type="button" class="btn btn-sm btn-warning shadow-sm">
							<i class="bi bi-building-fill"></i>
							НЯ ЧАНГ
						</button> -->

						<div class="dropdown">
							<button class="btn btn-sm btn-warning shadow-sm dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
								<i class="bi bi-building-fill"></i>
								НЯЧАНГ
							</button>
							<ul class="dropdown-menu">
								<li><h6 class="dropdown-header">Выберите город</h6></li>
								<li><a class="dropdown-item active" href="#">НЯЧАНГ</a></li>
								<li><a class="dropdown-item disabled" href="#">// ДАНАНГ</a></li>
								<li><a class="dropdown-item disabled" href="#">// ДАЛАТ</a></li>
							</ul>
						</div>

						<div class="btn-group btn-group-sm shadow-sm" role="group" aria-label="Small button group">
							<button @click="notAvailableLang()" type="button" class="btn btn-sm btn-warning">
								<i class="bi bi-translate"></i>
								RU
							</button>
							<button @click="notAvailableLang()" type="button" class="btn btn-sm btn-outline-warning">EN</button>
						</div>
						<button @click="notAvailableMenu()" class="btn btn-sm btn-primary shadow-sm" type="button">
							<i class="bi bi-list"></i>
							<!-- Меню -->
						</button>
					</div>
				</nav>

				<div v-if="errorMessage" class="alert alert-danger">{{ errorMessage }}</div>
				<div v-if="successMessage" class="alert alert-success">{{ successMessage }}</div>

				<nav>
					<div class="nav nav-tabs" id="nav-tab" role="tablist">
						<button @click="showScreen('showAd')" :class="{'nav-link': true, 'active': showAd}"
						id="nav-ad-tab" type="button" role="tab"
						aria-controls="nav-ad" aria-selected="showAd">Объявления</button>
						<button @click="showScreen('showNews')" :class="{'nav-link': true, 'active': showNews}"
						id="nav-news-tab" type="button" role="tab"
						aria-controls="nav-news" aria-selected="showNews">Новости</button>
						<button @click="showScreen('showUser')" :class="{'nav-link': true, 'active': showUser}"
						id="nav-user-tab" type="button" role="tab"
						aria-controls="nav-user" aria-selected="showUser">Пользователи</button>
					</div>
				</nav>

				<div v-if="isLoading" class="d-flex justify-content-center p-5">
					<div class="spinner-grow text-warning" role="status">
						<span class="visually-hidden">
							Загружается...
						</span>
					</div>
				</div>

				<div v-if="!isLoading" class="tab-content mb-3" id="nav-tabContent">
					<div :class="{'tab-pane': true, 'fade': true, 'show active': showAd}"
						id="nav-ad" role="tabpanel" aria-labelledby="nav-ad-tab" tabindex="0">

						<div class="accordion mt-3" id="accordionExample">
							<div class="accordion-item">
								<h2 class="accordion-header">
									<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
										Создать новое объявление
									</button>
								</h2>
								<div id="collapseOne" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
									<div class="accordion-body">
										
										<div class="col mt-1">
											<div class="card shadow-sm">
												<div class="card-body">
													<h5 class="card-title">
														Создать новое объявление
													</h5>

													<div class="mb-2">
														<label for="FormControlInput3" class="form-label">
															Контакт
															<span class="text text-danger">*</span>
															<span :class="getCharCountClass(newAd.contact, newAd.contactLimit)">
																({{ getRemainingChars(newAd.contact, newAd.contactLimit) }})
															</span>
														</label>
														<input v-model="newAd.contact" type="text" class="form-control form-control-sm shadow-sm"
															id="FormControlInput3">
													</div>
													
													<div class="mb-2">
														<label for="formFile1" class="form-label">
															Заглавное фото
														</label>
														<span class="form-text"> // jpeg, png, gif, < 5MB</span>
														<input @change="handleFileChange($event, 0)" class="form-control form-control-sm shadow-sm"
															id="formFile1" type="file" ref="fileInput">
													</div>
						
													<div v-if="photoInputs[1]" class="mb-2">
														<label for="formFile2" class="form-label">
															Фото 2
														</label>
														<input @change="handleFileChange($event, 1)" class="form-control form-control-sm shadow-sm"
															id="formFile2" type="file" ref="fileInput">
													</div>
													
													<div v-if="photoInputs[2]" class="mb-2">
														<label for="formFile3" class="form-label">
															Фото 3
														</label>
														<input @change="handleFileChange($event, 2)" class="form-control form-control-sm shadow-sm"
															id="formFile3" type="file" ref="fileInput">
													</div>
												
													<div class="mb-2">
														<label for="FormControlInput1" class="form-label">
															Название
															<span class="text text-danger">*</span>
															<!-- Счетчик оставшихся символов для названия -->
															<span :class="getCharCountClass(newAd.title, newAd.titleLimit)">
																({{ getRemainingChars(newAd.title, newAd.titleLimit) }})
															</span>
														</label>
														<input v-model="newAd.title" type="text" class="form-control form-control-sm shadow-sm"
															id="FormControlInput1">
													</div>
					
													<div class="mb-2">
														<label for="categorySelect" class="form-label">
															Категория
															<span class="text text-danger">*</span>
															<!-- {{ categoryCode }} -->
														</label>
														<select v-model="selectedMainCategory" @change="loadSubcategories('main')" class="form-select form-select-sm shadow-sm" id="categorySelect" aria-label="Small select example">
															<option value="">
																Не выбрано
															</option>
															<option v-for="(cat, key) in categories" :key="key" :value="key">{{ key }}</option>
														</select>
													</div>
													
													<div v-if="selectedMainCategory && subcategories1" class="mb-2">
														<select v-model="selectedSubcategory1" @change="loadSubcategories('sub1')" class="form-select form-select-sm shadow-sm" id="subcategory1Select" aria-label="Small select example">
															<option value="">
																Выберите подкатегорию
															</option>
															<option v-for="(sub, key) in subcategories1" :key="key" :value="key">{{ key }}</option>
														</select>
													</div>
													
													<div v-if="selectedSubcategory1 && subcategories2" class="mb-2">
														<select v-model="selectedSubcategory2" class="form-select form-select-sm shadow-sm" id="subcategory2Select" aria-label="Small select example">
															<option value="">
																Выберите подкатегорию
															</option>
															<option v-for="(sub, key) in subcategories2" :key="key" :value="key">{{ key }}</option>
														</select>
													</div>
					
													<div class="mb-3">
														<label for="FormControlTextarea1" class="form-label">
															Описание
															<span class="text text-danger">*</span>
															<span :class="getCharCountClass(newAd.description, newAd.descriptionLimit)">
																({{ getRemainingChars(newAd.description, newAd.descriptionLimit) }})
															</span>
														</label>
														<textarea v-model="newAd.description" class="form-control form-select-sm shadow-sm"
															id="FormControlTextarea1" rows="3"></textarea>
													</div>
				
													<div class="form-check form-switch mb-3">
														<input v-model="newAd.permanent" class="form-check-input" type="checkbox" role="switch"
															id="flexSwitchCheckDefault">
														<label class="form-check-label" for="flexSwitchCheckDefault">
															Сделать объявление вечным
														</label>
													</div>
													
													<div class="row mb-3">
														<div class="col-6">
															<label for="inputPassword2" class="form-label">
																Пароль
																<span class="text text-danger">*</span>
																<span :class="getCharCountClass(authPassword, authPasswordLimit)">
																	({{ getRemainingChars(authPassword, authPasswordLimit) }})
																</span>
															</label>
														</div>
														<div class="col">
															<input v-model="authPassword" type="password" id="inputPassword2" class="form-control form-control-sm shadow-sm"
																aria-describedby="passwordHelpBlock">
														</div>
													</div>
													<button @click="createAd()" class="btn btn-sm btn-success shadow-sm" :disabled="authPassword.length < 5">
														<i class="bi bi-envelope-open-fill"></i>
														Опубликовать объявление
													</button>
												</div>
											</div>
										</div>

									</div>
								</div>
							</div>

							<div class="accordion-item">
								<h2 class="accordion-header">
									<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSix" aria-expanded="false" aria-controls="collapseSix">
										Редактировать объявление
									</button>
								</h2>
								<div id="collapseSix" class="accordion-collapse collapse show" data-bs-parent="#accordionExample">
									<div class="accordion-body">

										<div v-if="isLoading2" class="d-flex justify-content-center p-3">
											<div class="spinner-grow text-warning" role="status">
												<span class="visually-hidden">
													Загружается...
												</span>
											</div>
										</div>

										<div v-if="!isLoading2" class="col">

											<div class="card mb-3 shadow-sm">

												<!-- <img src="/backend/uploads/images/templates/cat.jpg" class="card-img-top" alt=""> -->

												<div v-if="currentAd.photos[0]" id="carouselExampleIndicators" class="carousel slide">

													<div class="carousel-indicators">
														<button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
														<button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1" aria-label="Slide 2" v-if="currentAd.photos[1]"></button>
														<button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2" aria-label="Slide 3" v-if="currentAd.photos[2]"></button>
													</div>
		
													<div class="carousel-inner">
														<div class="carousel-item active" v-if="currentAd.photos[0]">
															<img :src="currentAd.photos[0]" class="d-block w-100 card-img-top" alt="image 1">
														</div>
														<div class="carousel-item" v-if="currentAd.photos[1]">
															<img :src="currentAd.photos[1]" class="d-block w-100 card-img-top" alt="image 2">
														</div>
														<div class="carousel-item" v-if="currentAd.photos[2]">
															<img :src="currentAd.photos[2]" class="d-block w-100 card-img-top" alt="image 3">
														</div>
													</div>
		
													<button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
														<span class="carousel-control-prev-icon" aria-hidden="true"></span>
														<span class="visually-hidden">Previous</span>
													</button>
		
													<button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
														<span class="carousel-control-next-icon" aria-hidden="true"></span>
														<span class="visually-hidden">Next</span>
													</button>
		
												</div>

												<div class="card-body">
													<div class="input-group input-group-sm mb-2 shadow-sm">
														<span class="input-group-text" :class="{ 'text-danger': currentAd.contact === '' || !currentAd.contact.includes('@') }"
															id="inputGroup-sizing-sm">Контакт</span>
															<span class="input-group-text" :class="getCharCountClass2(currentAd.contact, currentAd.contactLimit)"
																id="basic-addon2">{{ getRemainingChars(currentAd.contact, currentAd.contactLimit) }}</span>
														<input v-model="currentAd.contact" type="text" class="form-control" aria-label="Sizing example input"
															aria-describedby="inputGroup-sizing-sm">
													</div>

													<div class="input-group input-group-sm mb-2 shadow-sm">
														<span class="input-group-text" :class="{ 'text-danger': currentAd.title === '' }"
															id="inputGroup-sizing-sm">Название</span>
															<span class="input-group-text" :class="getCharCountClass2(currentAd.title, currentAd.titleLimit)"
																id="basic-addon2">{{ getRemainingChars(currentAd.title, currentAd.titleLimit) }}</span>
														<input v-model="currentAd.title" type="text" class="form-control" aria-label="Sizing example input"
															aria-describedby="inputGroup-sizing-sm">
													</div>

													<div class="input-group input-group-sm mb-2 shadow-sm">
														<label class="input-group-text" :class="{ 'text-danger': categoryCode === '' }" for="inputGroupSelect01">
															Категория
														</label>
														<span class="input-group-text" id="basic-addon2">{{ categoryCode }}</span>
														<select v-model="selectedMainCategory" @change="loadSubcategories('main')" class="form-select" id="inputGroupSelect01">
															<option value="">
																Не выбрано
															</option>
															<option v-for="(cat, key) in categories" :key="key" :value="key">{{ key }}</option>
														</select>
														
													</div>

													<div v-if="selectedMainCategory && subcategories1" class="input-group input-group-sm mb-2 shadow-sm">
														<label class="input-group-text" for="inputGroupSelect02">Подкатегория 1</label>
														<select v-model="selectedSubcategory1" @change="loadSubcategories('sub1')" class="form-select" id="inputGroupSelect02">
															<option value="">
																Выберите подкатегорию
															</option>
															<option v-for="(sub, key) in subcategories1" :key="key" :value="key">{{ key }}</option>
														</select>
													</div>

													<div v-if="selectedSubcategory1 && subcategories2" class="input-group input-group-sm mb-2 shadow-sm">
														<label class="input-group-text" for="inputGroupSelect03">Подкатегория 2</label>
														<select v-model="selectedSubcategory2" class="form-select" id="inputGroupSelect03">
															<option value="">
																Выберите подкатегорию
															</option>
															<option v-for="(sub, key) in subcategories2" :key="key" :value="key">{{ key }}</option>
														</select>
													</div>

													<div class="input-group input-group-sm mb-2 shadow-sm">
														<span class="input-group-text" :class="getCharCountClass2(currentAd.description, currentAd.descriptionLimit)"
															id="FormControlTextarea61">Текст<br>({{ getRemainingChars(currentAd.description, currentAd.descriptionLimit) }})</span>
														<textarea v-model="currentAd.description" class="form-control form-select-sm"
															id="FormControlTextarea61" rows="4"></textarea>
													</div>

													<div class="card-text d-flex justify-content-between">
														<span>
															<small class="text-body-secondary text-truncate">
																<i class="bi bi-calendar-date-fill"></i>
																Создано:
																{{ currentAd.created_at.split(' ')[0] }}
															</small>
														</span>
														<span>
															<small class="text-body-secondary">
																<i class="bi bi-1-square-fill"></i>
																{{ currentAd.id }}
															</small>
														</span>
														<span>
															<small class="text-body-secondary">
																<i class="bi bi-power"></i>
																{{ currentAd.status }}
															</small>
														</span>
													</div>
												</div>

												<div class="d-flex justify-content-between card-footer">
													<button @click="cleanAd()" class="btn btn-sm btn-danger shadow-sm" :disabled="searchAdId.length > 0">
														<i class="bi bi-trash3-fill"></i>
														Удалить
													</button>
													<button @click="cleanForm()" class="btn btn-sm btn-warning shadow-sm">
														<i class="bi bi-trash3"></i>
														Очистить
													</button>
													<button @click="changeAd()" class="btn btn-sm btn-success shadow-sm" :disabled="authPassword.length < 5">
														<i class="bi bi-envelope-open-fill"></i>
														{{ searchAdId.length > 0 ? 'Изменить' : 'Разместить' }}
													</button>
												</div>

											</div>
										</div>

										<div class="col input-group input-group-sm shadow-sm">
											<span class="input-group-text" :class="getCharCountClass2(authPassword, authPasswordLimit)"
												id="inputGroup-sizing-sm">Пароль ({{ getRemainingChars(authPassword, authPasswordLimit) }})</span>
											<input v-model="authPassword" type="password" id="inputPassword61" class="form-control"
												aria-describedby="passwordHelpBlock">
											<span class="input-group-text">
												<i class="bi bi-1-square-fill"></i>
											</span>
											<input v-model="searchAdId" type="text" class="form-control" aria-label="Server">
											<button @click="getAd(searchAdId)" class="btn btn-outline-secondary" type="button" :disabled="authPassword.length < 5"
												id="button-addon61">Загрузить</button>
										</div>

									</div>
								</div>
							</div>

							<div class="accordion-item">
								<h2 class="accordion-header">
									<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
										Заблокировать объявление
									</button>
								</h2>
								<div id="collapseTwo" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
									<div class="accordion-body">
										
										<div class="col mt-1">
											<div class="card shadow-sm">
												<div class="card-body">
													<h5 class="card-title mb-3">
														Заблокировать объявление
													</h5>
													<div class="mb-3 row">
														<div class="col-7">
															<label for="FormControlInput11" class="form-label">
																ID объявления
																<span class="text text-danger">*</span>
																<span :class="getCharCountClass(adId, adIdLimit)">
																	({{ getRemainingChars(adId, adIdLimit) }})
																</span>
															</label>
														</div>
														<div class="col">
															<input v-model="adId" type="text" class="form-control form-control-sm shadow-sm" id="FormControlInput11">
														</div>
													</div>
													<div class="row mb-3">
														<div class="col-6">
															<label for="inputPassword21" class="form-label">
																Пароль
																<span class="text text-danger">*</span>
																<span :class="getCharCountClass(authPassword, authPasswordLimit)">
																	({{ getRemainingChars(authPassword, authPasswordLimit) }})
																</span>
															</label>
														</div>
														<div class="col">
															<input v-model="authPassword" type="password" id="inputPassword21" class="form-control form-control-sm shadow-sm"
																aria-describedby="passwordHelpBlock">
														</div>
													</div>
													<button @click="blockAd()" class="btn btn-sm btn-success shadow-sm" :disabled="authPassword.length < 5">
														<i class="bi bi-pause-btn-fill"></i>
														Заблокировать объявление
													</button>
												</div>
											</div>
										</div>

									</div>
								</div>
							</div>

						</div>

					</div>

					<div :class="{'tab-pane': true, 'fade': true, 'show active': showNews}"
						id="nav-news" role="tabpanel" aria-labelledby="nav-news-tab" tabindex="0">

						<div class="accordion mt-3" id="accordionExample2">
							<div class="accordion-item">
								<h2 class="accordion-header">
									<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="true" aria-controls="collapseFour">
										Создать новую новость
									</button>
								</h2>
								<div id="collapseFour" class="accordion-collapse collapse show" data-bs-parent="#accordionExample2">
									<div class="accordion-body">
										
										<div class="col mt-1">
											<div class="card shadow-sm">
												<!-- style="background-color: #f0f0f0" -->
												<div class="card-body">
													<h5 class="card-title">
														Создать новую новость
													</h5>
													
													<div class="mb-2">
														<label for="formFile4" class="form-label">
															Заглавное фото
														</label>
														<span class="form-text"> // jpeg, png, gif, < 5MB</span>
														<input @change="handleFileChange($event, 0)" class="form-control form-control-sm shadow-sm"
															id="formFile4" type="file" ref="fileInput">
													</div>
						
													<div v-if="photoInputs[1]" class="mb-2">
														<label for="formFile5" class="form-label">
															Фото 2
														</label>
														<input @change="handleFileChange($event, 1)" class="form-control form-control-sm shadow-sm"
															id="formFile5" type="file" ref="fileInput">
													</div>
													
													<div v-if="photoInputs[2]" class="mb-2">
														<label for="formFile6" class="form-label">
															Фото 3
														</label>
														<input @change="handleFileChange($event, 2)" class="form-control form-control-sm shadow-sm"
															id="formFile6" type="file" ref="fileInput">
													</div>

													<div v-if="photoInputs[3]" class="mb-2">
														<label for="formFile7" class="form-label">
															Фото 4
														</label>
														<input @change="handleFileChange($event, 3)" class="form-control form-control-sm shadow-sm"
															id="formFile7" type="file" ref="fileInput">
													</div>

													<div v-if="photoInputs[4]" class="mb-2">
														<label for="formFile8" class="form-label">
															Фото 5
														</label>
														<input @change="handleFileChange($event, 4)" class="form-control form-control-sm shadow-sm"
															id="formFile8" type="file" ref="fileInput">
													</div>
												
													<div class="mb-2">
														<label for="FormControlInput7" class="form-label">
															Заголовок (ru)
															<span class="text text-danger">*</span>
															<!-- Счетчик оставшихся символов для названия -->
															<span :class="getCharCountClass(newNews.title_ru, newNews.title_ruLimit)">
																({{ getRemainingChars(newNews.title_ru, newNews.title_ruLimit) }})
															</span>
														</label>
														<input v-model="newNews.title_ru" type="text" class="form-control form-control-sm shadow-sm" id="FormControlInput7">
													</div>
					
													<div class="mb-2">
														<label for="FormControlTextarea3" class="form-label">
															Текст (ru)
															<span class="text text-danger">*</span>
															<span :class="getCharCountClass(newNews.description_ru, newNews.description_ruLimit)">
																({{ getRemainingChars(newNews.description_ru, newNews.description_ruLimit) }})
															</span>
														</label>
														<textarea v-model="newNews.description_ru" class="form-control form-select-sm shadow-sm" id="FormControlTextarea3" rows="3"></textarea>
													</div>
								
													<div class="mb-2">
														<label for="FormControlInput8" class="form-label">
															Автор (ru)
															<span class="text text-danger">*</span>
															<span :class="getCharCountClass(newNews.author_ru, newNews.author_ruLimit)">
																({{ getRemainingChars(newNews.author_ru, newNews.author_ruLimit) }})
															</span>
														</label>
														<input v-model="newNews.author_ru" type="text" class="form-control form-control-sm shadow-sm" id="FormControlInput8">
													</div>

													<div class="mb-2">
														<label for="FormControlInput17" class="form-label">
															Заголовок (en)
															<span class="text text-danger">*</span>
															<span :class="getCharCountClass(newNews.title_en, newNews.title_ruLimit)">
																({{ getRemainingChars(newNews.title_en, newNews.title_ruLimit) }})
															</span>
														</label>
														<input v-model="newNews.title_en" type="text" class="form-control form-control-sm shadow-sm" id="FormControlInput17">
													</div>
					
													<div class="mb-2">
														<label for="FormControlTextarea13" class="form-label">
															Текст (en)
															<span class="text text-danger">*</span>
															<span :class="getCharCountClass(newNews.description_en, newNews.description_ruLimit)">
																({{ getRemainingChars(newNews.description_en, newNews.description_ruLimit) }})
															</span>
														</label>
														<textarea v-model="newNews.description_en" class="form-control form-select-sm shadow-sm" id="FormControlTextarea13" rows="3"></textarea>
													</div>
								
													<div class="mb-2">
														<label for="FormControlInput18" class="form-label">
															Автор (en)
															<span class="text text-danger">*</span>
															<span :class="getCharCountClass(newNews.author_en, newNews.author_ruLimit)">
																({{ getRemainingChars(newNews.author_en, newNews.author_ruLimit) }})
															</span>
														</label>
														<input v-model="newNews.author_en" type="text" class="form-control form-control-sm shadow-sm" id="FormControlInput18">
													</div>
													
													<div class="row mb-3">
														<div class="col-6">
															<label for="inputPassword4" class="form-label">
																Пароль
																<span class="text text-danger">*</span>
																<span :class="getCharCountClass(authPassword, authPasswordLimit)">
																	({{ getRemainingChars(authPassword, authPasswordLimit) }})
																</span>
															</label>
														</div>
														<div class="col">
															<input v-model="authPassword" type="password" id="inputPassword4" class="form-control form-control-sm shadow-sm"
																aria-describedby="passwordHelpBlock">
														</div>
													</div>
													<button @click="createNews()" class="btn btn-sm btn-success shadow-sm" :disabled="authPassword.length < 5">
														<i class="bi bi-envelope-open-fill"></i>
														Опубликовать новость
													</button>
												</div>
											</div>
										</div>

									</div>
								</div>
							</div>
							<div class="accordion-item">
								<h2 class="accordion-header">
									<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFive" aria-expanded="false" aria-controls="collapseFive">
										Удалить новость
									</button>
								</h2>
								<div id="collapseFive" class="accordion-collapse collapse" data-bs-parent="#accordionExample2">
									<div class="accordion-body">
										
										<div class="col mt-1">
											<div class="card shadow-sm">
												<div class="card-body">
													<h5 class="card-title mb-3">
														Удалить новость
													</h5>
													<div class="mb-3 row">
														<div class="col-7">
															<label for="FormControlInput41" class="form-label">
																ID новости
																<span class="text text-danger">*</span>
																<span :class="getCharCountClass(newsId, newsIdLimit)">
																	({{ getRemainingChars(newsId, newsIdLimit) }})
																</span>
															</label>
														</div>
														<div class="col">
															<input v-model="newsId" type="text" class="form-control form-control-sm shadow-sm" id="FormControlInput41">
														</div>
													</div>
													<div class="row mb-3">
														<div class="col-6">
															<label for="inputPassword41" class="form-label">
																Пароль
																<span class="text text-danger">*</span>
																<span :class="getCharCountClass(authPassword, authPasswordLimit)">
																	({{ getRemainingChars(authPassword, authPasswordLimit) }})
																</span>
															</label>
														</div>
														<div class="col">
															<input v-model="authPassword" type="password" id="inputPassword41" class="form-control form-control-sm shadow-sm"
																aria-describedby="passwordHelpBlock">
														</div>
													</div>
													<button @click="deleteNews()" class="btn btn-sm btn-success shadow-sm" :disabled="authPassword.length < 5">
														<i class="bi bi-trash3-fill"></i>
														Удалить новость
													</button>
												</div>
											</div>
										</div>

									</div>
								</div>
							</div>
							
						</div>
						
					</div>

					<div :class="{'tab-pane': true, 'fade': true, 'show active': showUser}"
						id="nav-user" role="tabpanel" aria-labelledby="nav-user-tab" tabindex="0">

						<div class="accordion mt-3" id="accordionExample3">
							
							<div class="accordion-item">
								<h2 class="accordion-header">
									<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="true" aria-controls="collapseThree">
										Заблокировать пользователя
									</button>
								</h2>
								<div id="collapseThree" class="accordion-collapse collapse show" data-bs-parent="#accordionExample">
									<div class="accordion-body">
										
										<div class="col mt-1">
											<div class="card shadow-sm">
												<div class="card-body">
													<h5 class="card-title mb-3">
														Заблокировать пользователя
													</h5>
													<div class="mb-3 row">
														<div class="col-7">
															<label for="FormControlInput21" class="form-label">
																ID пользователя
																<span class="text text-danger">*</span>
																<span :class="getCharCountClass(userId, userIdLimit)">
																	({{ getRemainingChars(userId, userIdLimit) }})
																</span>
															</label>
														</div>
														<div class="col">
															<input v-model="userId" type="text" class="form-control form-control-sm shadow-sm" id="FormControlInput21">
														</div>
													</div>
													<div class="row mb-3">
														<div class="col-6">
															<label for="inputPassword31" class="form-label">
																Пароль
																<span class="text text-danger">*</span>
																<span :class="getCharCountClass(authPassword, authPasswordLimit)">
																	({{ getRemainingChars(authPassword, authPasswordLimit) }})
																</span>
															</label>
														</div>
														<div class="col">
															<input v-model="authPassword" type="password" id="inputPassword31" class="form-control form-control-sm shadow-sm"
																aria-describedby="passwordHelpBlock">
														</div>
													</div>
													<button @click="blockUser()" class="btn btn-sm btn-success shadow-sm" :disabled="authPassword.length < 5">
														<i class="bi bi-pause-btn-fill"></i>
														Заблокировать пользователя
													</button>
												</div>
											</div>
										</div>

									</div>
								</div>
							</div>

						</div>

					</div>
				</div>

			</div>
		</div>
	</div>

	<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>

	<script src="https://cdn.jsdelivr.net/npm/vue@3/dist/vue.global.prod.js"></script>
	<!-- <script src="https://cdn.jsdelivr.net/npm/vue@3/dist/vue.global.js"></script> -->
	<!-- <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

	<script>
        const app = Vue.createApp({
            data() {
                return {
					//
					showAd: true,
					//
					showNews: false,
					//
					showUser: false,
					// содержит объект нового объявления (ещё не созданного)
					newAd: {
						//
						title: '',
						// лимит названия
						titleLimit: 40,
						//
          				description: '',
						// лимит описания
						descriptionLimit: 1000,
						//
						contact: '',
						// лимит контакта
						contactLimit: 50,
						//
						category: '',
						//
						permanent: false
					},
					//
					currentAd: {
						//
						title: '',
						// лимит названия
						titleLimit: 40,
						//
          				description: '',
						// лимит описания
						descriptionLimit: 1000,
						//
						contact: '',
						// лимит контакта
						contactLimit: 50,
						//
						category: '',
						//
						created_at: '',
						//
						id: '',
						//
						status: '',
						//
						cover_photo: '',
						// содержит массив загруженных фото
						photos: [],
					},
					// содержит объект новой новости (ещё не созданной)
					newNews: {
						//
						title_ru: '',
						// лимит заголовка
						title_ruLimit: 50,
						//
          				description_ru: '',
						// лимит описания
						description_ruLimit: 2000,
						//
						author_ru: '',
						// лимит автора
						author_ruLimit: 50,
						//
						title_en: '',
						//
          				description_en: '',
						//
						author_en: ''
					},
					//
					adId: '',
					//
					adIdLimit: 6,
					//
					newsId: '',
					//
					newsIdLimit: 6,
					//
					userId: '',
					//
					userIdLimit: 6,
					// управляет видимостью полей для фото
					photoInputs: [true, false, false, false, false], // скрываем фото 2 и фото 3
					
					// показывает, что данные в процессе загрузки с сервера
                    isLoading: false,
					//
					isLoading2: false,
					// содержит текст всплывающей подсказки в случае успеха
					successMessage: null,
					// содержит текст всплывающей подсказки в случае ошибки
                    errorMessage: null,
					//
					messages: {
						// Общие ошибки
						100: 'Страница не найдена',
						101: 'Ошибка с ID',
						102: '',
						103: '',
						104: '',
						110: 'Меню временно отключено',
						111: 'Переключение языков временно отключено',
						112: '',
						113: '',
						// Ошибки связанные со списком объявлений
						200: 'Ошибка с номером страницы',
						201: 'Ошибка со строкой категорий',
						202: 'Не удалось найти активных объявлений',
						203: 'Ошибка с паролем',
						204: 'Не удалось найти активного пользователя. Возможно ошибка в пароле',
						205: '',
						206: '',
						210: 'Пожалуйста, введите пароль',
						211: 'Пароль слишком длинный',
						212: '',
						213: '',
						214: '',
						220: 'Вы достигли лимита объявлений',
						221: '',
						222: '',
						// Ошибки связанные со списком новостей
						300: 'Ошибка с номером страницы',
						301: '',
						302: '',
						303: '',
						310: 'Вы достигли лимита новостей',
						311: '',
						312: '',
						// Ошибки связанные с одним объявлением
						400: 'Не удалось найти активного объявления',
						401: 'Не удалось найти активного пользователя. Возможно ошибка в пароле',
						402: '',
						403: '',
						404: '',
						420: 'Ошибка с паролем или ID',
						421: 'Не удалось найти объявление',
						422: 'Ошибка доступа',
						423: 'Объявление было удалено ранее',
						424: 'Ошибка с паролем',
						425: '',
						426: '',
						430: 'Ошибка с текстом или ID',
						431: 'Текст объявления слишком длинный',
						432: '',
						433: '',
						440: 'Пожалуйста, введите пароль',
						441: 'Пароль слишком длинный',
						442: '',
						443: '',
						450: 'Пожалуйста, напишите текст жалобы',
						451: 'Текст жалобы слишком длинный',
						452: 'Это объявление нельзя удалять',
						453: '',
						454: '',
						460: 'Объявление успешно удалено!',
						461: 'Не удалось переместить фото в новую папку',
						462: 'Фото не найдено в временной папке',
						463: 'Этот метод пока не готов',
						464: '',
						470: 'Жалоба на объявление принята!',
						471: '',
						472: '',
						480: 'Пожалуйста, напишите ID объявления',
						481: 'Пожалуйста, введите пароль',
						482: 'ID слишком длинный',
						483: 'Пароль слишком длинный',
						484: '',
						485: '',
						486: '',
						487: '',
						490: 'Объявление успешно заблокировано!',
						491: 'Временное объявление успешно удалено!',
						492: '',
						493: '',
						// Ошибки связанные с одной новостью
						500: 'Не удалось найти активную новость',
						501: '',
						502: '',
						503: '',
						520: 'Ошибка с паролем или ID',
						521: 'Не удалось найти новость',
						522: 'Ошибка доступа',
						523: 'Новость была удалена ранее',
						524: '',
						525: '',
						530: 'Пожалуйста, напишите ID новости',
						531: 'Пожалуйста, введите пароль',
						532: 'ID слишком длинный',
						533: 'Пароль слишком длинный',
						534: '',
						535: '',
						540: 'Новость успешно удалена!',
						541: '',
						542: '',
						// Ошибки связанные с созданием объявления
						600: 'Не заполнены важные поля',
						601: 'Некоторые поля нарушили лимит символов',
						602: 'Не удалось найти активного пользователя. Возможно ошибка в пароле',
						603: 'Превышен лимит объявлений. Максимум 3 шт',
						604: '',
						605: '',
						606: '',
						620: 'Ошибка при загрузке одного из файлов',
						621: 'Один из файлов не является изображением',
						622: 'Одно из фото недопустимого формата. Можно jpeg, png, gif',
						623: 'Одно из фото превышает допустимый размер. Максимум 5 МБ',
						624: 'Одно из фото слишком маленькое. Минимум 600 * 450 или наоборот',
						625: '',
						626: '',
						630: 'Пожалуйста, напишите название',
						631: 'Пожалуйста, выберите категорию',
						632: 'Пожалуйста, напишите описание',
						633: 'Пожалуйста, напишите свой контакт',
						634: 'Пожалуйста, введите пароль',
						635: 'Название слишком длинное',
						636: 'Категория слишком длинная',
						637: 'Описание слишком длинное',
						638: 'Контакт слишком длинный',
						639: 'Пароль слишком длинный',
						640: 'Слишком много фото. Максимум 3 шт',
						641: '',
						642: '',
						650: 'Объявление успешно создано!',
						651: 'Объявление успешно обновлено!',
						652: '',
						// Ошибки связанные с созданием новости
						700: 'Не заполнены важные поля',
						701: 'Некоторые поля нарушили лимит символов',
						702: 'Ошибка доступа',
						703: '',
						704: '',
						705: '',
						720: 'Ошибка при загрузке одного из файлов',
						721: 'Один из файлов не является изображением',
						722: 'Одно из фото недопустимого формата. Можно jpeg, png, gif',
						723: 'Одно из фото превышает допустимый размер. Максимум 5 МБ',
						724: 'Одно из фото слишком маленькое. Минимум 600 * 450 или наоборот',
						725: '',
						726: '',
						730: 'Пожалуйста, напишите заголовок (ru)',
						731: 'Пожалуйста, напишите текст новости (ru)',
						732: 'Пожалуйста, укажите автора (ru)',
						733: 'Пожалуйста, напишите заголовок (en)',
						734: 'Пожалуйста, напишите текст новости (en)',
						735: 'Пожалуйста, укажите автора (en)',
						736: 'Пожалуйста, введите пароль',
						737: 'Заголовок слишком длинный (ru)',
						738: 'Текст новости слишком длинный (ru)',
						739: 'Имя автора слишком длинное (ru)',
						740: 'Заголовок слишком длинный (en)',
						741: 'Текст новости слишком длинный (en)',
						742: 'Имя автора слишком длинное (en)',
						743: 'Пароль слишком длинный',
						744: 'Слишком много фото. Максимум 5 шт',
						745: '',
						746: '',
						750: 'Новость успешно создана!',
						751: '',
						752: '',
						// Ошибки связанные с пользователем
						800: '',
						801: '',
						802: '',
						803: '',
						820: 'Ошибка с паролем или ID',
						821: 'Ошибка доступа',
						822: 'Не удалось найти пользователя',
						823: 'Пользователь был заблокирован ранее',
						824: '',
						825: '',
						830: 'Пожалуйста, напишите ID пользователя',
						831: 'Пожалуйста, введите пароль',
						832: 'ID слишком длинный',
						833: 'Пароль слишком длинный',
						834: '',
						835: '',
						840: 'Пользователь успешно заблокирован!',
						841: '',
						842: '',
					},
					// содержит пароль для авторизации
					authPassword: '',
					//
					authPasswordLimit: 16,
					// содержит весь список категорий с кодами на русском
					categories: {
						'Жильё': { code: '1', subcategories: {
								'Аренда': { code: 'A', subcategories: {
									'Кровать': { code: '1' },
									'Комната': { code: '2' },
									'Квартира': { code: '3' },
									'Дом': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Продажа': { code: 'B'
							}
						}},
						'Транспорт': { code: '2', subcategories: {
								'Аренда': { code: 'A', subcategories: {
									'Велосипед': { code: '1' },
									'Мопед': { code: '2' },
									'Мотоцикл': { code: '3' },
									'Автомобиль': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Продажа': { code: 'B', subcategories: {
									'Велосипед': { code: '1' },
									'Мопед': { code: '2' },
									'Мотоцикл': { code: '3' },
									'Автомобиль': { code: '4' },
									'Другое': { code: '5' }
							}}
						}},
						'Услуги': { code: '3', subcategories: {
								'Транспорт, грузоперевозки, визараны': { code: 'A', subcategories: {
									'Транспорт': { code: '1' },
									'Грузоперевозки': { code: '2' },
									'Визараны': { code: '3' },
									'Складские услуги': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Документы, визы, билеты': { code: 'B', subcategories: {
									'Документы': { code: '1' },
									'Визы': { code: '2' },
									'Билеты': { code: '3' },
									'Страховки': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Мобильная связь, интернет, IT': { code: 'C', subcategories: {
									'Мобильная связь': { code: '1' },
									'Интернет': { code: '2' },
									'IT': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Обмен валюты, переводы, банковские карты': { code: 'D', subcategories: {
									'Обмен валюты': { code: '1' },
									'Переводы': { code: '2' },
									'Банковские карты': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Поиск жилья, адаптация, камеры хранения': { code: 'E', subcategories: {
									'Поиск жилья': { code: '1' },
									'Адаптация': { code: '2' },
									'Камеры хранения': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Красота, здоровье': { code: 'F', subcategories: {
									'Красота': { code: '1' },
									'Здоровье': { code: '2' },
									// '': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Уборка, стирка, дезинсекция': { code: 'G', subcategories: {
									'Уборка': { code: '1' },
									'Стирка': { code: '2' },
									'Дезинсекция': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Ремонт электроники, телефонов, ноутбуков': { code: 'H', subcategories: {
									'Ремонт электроники': { code: '1' },
									'Ремонт телефонов': { code: '2' },
									'Ремонт ноутбуков': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Мелкий бытовой ремонт (муж на час)': { code: 'I', subcategories: {
									'Мелкий бытовой ремонт': { code: '1' },
									'Монтаж и установка техники': { code: '2' },
									// '': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Обучение, курсы, искусство': { code: 'J', subcategories: {
									'Обучение': { code: '1' },
									'Курсы': { code: '2' },
									'Искусство': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Тусовки, мероприятия, экскурсии': { code: 'K', subcategories: {
									'Тусовки': { code: '1' },
									'Мероприятия': { code: '2' },
									'Экскурсии': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Еда, напитки, кулинария': { code: 'L', subcategories: {
									'Еда': { code: '1' },
									'Напитки': { code: '2' },
									'Кулинария': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Ремонт, строительство': { code: 'M', subcategories: {
									'Ремонт': { code: '1' },
									'Строительство': { code: '2' },
									// '': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Переводчик, юридические услуги': { code: 'N', subcategories: {
									'Переводчик': { code: '1' },
									'Юридические услуги': { code: '2' },
									// '': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Няня, детские сады, школы': { code: 'O', subcategories: {
									'Няня': { code: '1' },
									'Детские сады': { code: '2' },
									'Школы': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Домашние животные, передержка, выгул': { code: 'P', subcategories: {
									'Домашние животные': { code: '1' },
									'Передержка': { code: '2' },
									'Выгул': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Доставка товаров на дом': { code: 'Q', subcategories: {
									'Доставка товаров на дом': { code: '1' },
									// '': { code: '2' },
									// '': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Фото, видеосъемка': { code: 'R', subcategories: {
									'Фото': { code: '1' },
									'Видеосъемка': { code: '2' },
									// '': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Автосервис': { code: 'S', subcategories: {
									'Автосервис': { code: '1' },
									// '': { code: '2' },
									// '': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Прокат, аренда': { code: 'T', subcategories: {
									'Прокат': { code: '1' },
									'Аренда': { code: '2' },
									// '': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Охрана, сторож': { code: 'U', subcategories: {
									'Охрана': { code: '1' },
									'Сторож': { code: '2' },
									// '': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Другое': { code: 'Z' },
						}},
						'Товары': { code: '4', subcategories: {
								'Электроника': { code: 'A' },
								'Мебель': { code: 'B' },
								'Бытовые товары': { code: 'C' },
								'Одежда, обувь': { code: 'D' },
								'Еда, напитки': { code: 'E' },
								'Детские товары': { code: 'F' },
								'Животные': { code: 'G' },
								'Хобби и отдых': { code: 'H' },
								'Автозапчасти': { code: 'I' },
								'Красота и здоровье': { code: 'J' },
								'Растения': { code: 'K' },
								'Товары для бизнеса': { code: 'L' },
								'Другое': { code: 'Z' }
						}},
						'Работа': { code: '5', subcategories: {
								'Предложение': { code: 'A', subcategories: {
									'Частичная занятость': { code: '1' },
									'Полная занятость': { code: '2' }
							}},
								'Поиск': { code: 'B' }
						}},
					},
					// Выбранная головная категория
					selectedMainCategory: '',
					// Выбранная подкатегория 1
					selectedSubcategory1: '',
					// Выбранная подкатегория 2
					selectedSubcategory2: '',
					// Список подкатегорий 1
					subcategories1: null,
					// Список подкатегорий 2
					subcategories2: null,
					// Строка с итоговым кодом категории
					categoryCode: '',
					// лимит строки категории
					categoryCodeLimit: 7,
					//
					photos: [],
					//
					searchAdId: '',
                };
            },
			mounted() {
				// Обработчик события beforeunload
				window.addEventListener("beforeunload", this.handleBeforeUnload);
			},
			beforeDestroy() {
				// Удаляем обработчик события
				window.removeEventListener("beforeunload", this.handleBeforeUnload);
			},
			watch: {
				// Наблюдаем за изменением второго уровня подкатегорий (третий выпадающий список)
				selectedSubcategory2() {
					this.updateCategoryCode();
				}
			},
            methods: {
				// метод выбора, какой экран показать в данный момент
				showScreen(screen) {
					this.showAd = screen === 'showAd';
					this.showNews = screen === 'showNews';
					this.showUser = screen === 'showUser';
				},
				//
				notAvailableMenu() {
					this.errorMessage = this.messages[110];
					setTimeout(() => { this.errorMessage = ''; }, 2000);
				},
				//
				notAvailableLang() {
					this.errorMessage = this.messages[111];
					setTimeout(() => { this.errorMessage = ''; }, 2000);
				},
				//
				cleanForm() {
					// очищаем форму 1
					this.newAd = { title: '', titleLimit: 40, description: '', descriptionLimit: 1000, contact: '', contactLimit: 50, category: '', permanent: false };
					// очищаем форму 2
					this.currentAd = { title: '', titleLimit: 40, description: '', descriptionLimit: 1000, contact: '', contactLimit: 50, category: '', created_at: '', id: '', status: '', photos: [] };
					// очищаем форму 3
					this.newNews = { title_ru: '', title_ruLimit: 50, description_ru: '', description_ruLimit: 2000, author_ru: '', author_ruLimit: 50,
						title_en: '', description_en: '', author_en: '' };
					// очищаем пароль
					// this.authPassword = '';
					//
					this.adId = '';
					//
					this.newsId = '';
					//
					this.userId = '';
					//
					this.photoInputs = [true, false, false, false, false];
					// Очистить поле файла через ref
					// this.$refs.fileInput.value = '';
					//
					this.searchAdId = '';
					// очищаем массив фото
					this.photos = [];
					//
					this.cleanCategory();
				},
				// метод очистки категорий
				cleanCategory() {
					this.selectedMainCategory = '';
					this.selectedSubcategory1 = '';
					this.selectedSubcategory2 = '';
					this.subcategories1 = null;
					this.subcategories2 = null;
					this.categoryCode = '';
				},
				// метод создания нового объявления
				createAd() {
					// Плавная прокрутка страницы вверх
					window.scrollTo({top: 0, behavior: 'smooth'});
					// Проверяем, введены ли параметры объявления и их длина
					if (this.newAd.contact.length < 5) {
						// this.errorMessage = 'Пожалуйста, напишите свой контакт';
						this.errorMessage = this.messages[633];

					} else if (this.getRemainingChars(this.newAd.contact, this.newAd.contactLimit) < 0) {
						// this.errorMessage = 'Контакт слишком длинный';
						this.errorMessage = this.messages[638];

					} else if (this.newAd.title.length < 3) {
						// this.errorMessage = 'Пожалуйста, напишите название';
						this.errorMessage = this.messages[630];

					} else if (this.getRemainingChars(this.newAd.title, this.newAd.titleLimit) < 0) {
						// this.errorMessage = 'Название слишком длинное';
						this.errorMessage = this.messages[635];

					} else if (this.categoryCode.length < 1) {
						// this.errorMessage = 'Пожалуйста, выберите категорию';
						this.errorMessage = this.messages[631];

					} else if (this.getRemainingChars(this.categoryCode, this.categoryCodeLimit) < 0) {
						// this.errorMessage = 'Категория слишком длинная';
						this.errorMessage = this.messages[636];

					} else if (this.newAd.description.length < 20) {
						// this.errorMessage = 'Пожалуйста, напишите описание';
						this.errorMessage = this.messages[632];

					} else if (this.getRemainingChars(this.newAd.description, this.newAd.descriptionLimit) < 0) {
						// this.errorMessage = 'Описание слишком длинное';
						this.errorMessage = this.messages[637];

					} else if (this.authPassword.length < 5) {
						// this.errorMessage = 'Пожалуйста, введите пароль';
						this.errorMessage = this.messages[634];

					} else if (this.getRemainingChars(this.authPassword, this.authPasswordLimit) < 0) {
						// this.errorMessage = 'Пароль слишком длинный';
						this.errorMessage = this.messages[639];
					}
					// Проверяем наличие фотографий (максимум 3)
					if (this.photos.length > 3) {
						// this.errorMessage = 'Слишком много фото. Максимум 3 шт';
						this.errorMessage = this.messages[640];
					}
					// Если есть сообщение об ошибке, показываем его и выходим из метода
					if (this.errorMessage) {
						setTimeout(() => { this.errorMessage = ''; }, 3000);
						return;
					}

					this.newAd.category = this.categoryCode;
					// формируем объект FormData для отправки данных на сервер
					const formData = new FormData();
					formData.append('title', this.newAd.title);
					formData.append('category', this.newAd.category);
					formData.append('description', this.newAd.description);
					formData.append('contact', this.newAd.contact);
					formData.append('permanent', this.newAd.permanent);
					formData.append('password', this.authPassword);

					// добавляем фотографии в FormData
					for (let i = 0; i < this.photos.length; i++) {
						formData.append('photos[]', this.photos[i]);
					}
					
					// отправляем данные на сервер
					this.isLoading = true;
					axios.post('api/ad/create', formData, {headers: {'Content-Type': 'multipart/form-data'}})
						.then(response => {
							//
							this.successMessage = this.messages[650];
							// Через 3 секунды (3000 миллисекунд) очищаем сообщение
							setTimeout(() => { this.successMessage = ''; }, 3000);
							// очищаем форму
							this.cleanForm();
						})
						.catch((error) => {
							//
							this.errorMessage = this.messages[error.response.data['code']];
							// Через 3 секунды (3000 миллисекунд) очищаем сообщение
							setTimeout(() => { this.errorMessage = ''; }, 3000);
						})
						.finally(() => {
							this.isLoading = false;
						});
				},
				//
				getAd(id) {
					//
					if (this.authPassword.length < 5) {
						// this.errorMessage = 'Пожалуйста, введите пароль';
						this.errorMessage = this.messages[634];

					} else if (this.getRemainingChars(this.authPassword, this.authPasswordLimit) < 0) {
						// this.errorMessage = 'Пароль слишком длинный';
						this.errorMessage = this.messages[639];
					}
					// Если есть сообщение об ошибке, показываем его и выходим из метода
					if (this.errorMessage) {
						setTimeout(() => { this.errorMessage = ''; }, 3000);
						return;
					}
					// Заменяем пустую строку на 0
					id = id || 0;
					// отправляем данные на сервер
                    this.isLoading2 = true;
                    axios.get(`api/ad/check/${id}/${this.authPassword}`)
                        .then(response => {
							// загрузить данные по объявлению
							this.currentAd.contact = response.data.contact || '';
							//
							this.currentAd.title = response.data.title || '';
							//
							this.categoryCode = this.currentAd.category = response.data.category || '';
							//
							this.currentAd.description = response.data.description || '';
							//
							this.currentAd.created_at = response.data.created_at || '';
							//
							this.currentAd.id = response.data.id || '';
							//
							this.currentAd.status = response.data.status || '';
							//
							this.currentAd.cover_photo = response.data.cover_photo || '';
							// проверка на наличие фото и их запись
							this.currentAd.photos = [];
							//
							response.data.photo_1 && this.currentAd.photos.push(response.data.photo_1);
							response.data.photo_2 && this.currentAd.photos.push(response.data.photo_2);
							response.data.photo_3 && this.currentAd.photos.push(response.data.photo_3);							
                        })
                        .catch((error) => {
							//
							this.errorMessage = this.messages[error.response.data['code']];
                            // this.errorMessage = this.getTranslation('errors.' + error.response.data['code']);
							// Через 3 секунды (3000 миллисекунд) очищаем сообщение
							setTimeout(() => { this.errorMessage = ''; }, 3000);
                        })
                        .finally(() => {
                            this.isLoading2 = false;
                        });
                },
				// Внести изменения в объявление
				changeAd() {
					// Плавная прокрутка страницы вверх
					window.scrollTo({top: 0, behavior: 'smooth'});
					// Проверяем, введены ли параметры объявления и их длина
					if (
							this.currentAd.contact.length < 5 ||
							(this.searchAdId === '' && !this.currentAd.contact.includes('@'))
						) {
						// this.errorMessage = 'Пожалуйста, напишите свой контакт';
						this.errorMessage = this.messages[633];

					} else if (this.getRemainingChars(this.currentAd.contact, this.currentAd.contactLimit) < 0) {
						// this.errorMessage = 'Контакт слишком длинный';
						this.errorMessage = this.messages[638];
					
					} else if (this.currentAd.title.length < 3) {
						// this.errorMessage = 'Пожалуйста, напишите название';
						this.errorMessage = this.messages[630];

					} else if (this.getRemainingChars(this.currentAd.title, this.currentAd.titleLimit) < 0) {
						// this.errorMessage = 'Название слишком длинное';
						this.errorMessage = this.messages[635];

					} else if (this.categoryCode.length < 1) {
						// this.errorMessage = 'Пожалуйста, выберите категорию';
						this.errorMessage = this.messages[631];

					} else if (this.getRemainingChars(this.categoryCode, this.categoryCodeLimit) < 0) {
						// this.errorMessage = 'Категория слишком длинная';
						this.errorMessage = this.messages[636];

					} else if (this.currentAd.description.length < 20) {
						// this.errorMessage = 'Пожалуйста, напишите описание';
						this.errorMessage = this.messages[632];

					} else if (this.getRemainingChars(this.currentAd.description, this.currentAd.descriptionLimit) < 0) {
						// this.errorMessage = 'Описание слишком длинное';
						this.errorMessage = this.messages[637];

					} else if (this.authPassword.length < 5) {
						// this.errorMessage = 'Пожалуйста, введите пароль';
						this.errorMessage = this.messages[634];

					} else if (this.getRemainingChars(this.authPassword, this.authPasswordLimit) < 0) {
						// this.errorMessage = 'Пароль слишком длинный';
						this.errorMessage = this.messages[639];
					}
					// Если есть сообщение об ошибке, показываем его и выходим из метода
					if (this.errorMessage) {
						setTimeout(() => { this.errorMessage = ''; }, 3000);
						return;
					}

					this.currentAd.category = this.categoryCode;
					// Заменяем пустую строку на 0
					id = this.searchAdId || 0;
					// this.currentAd.searchAdId = this.searchAdId || 0;

					// отправляем данные на сервер
					this.isLoading2 = true;
					axios.post(`api/ad/update/${id}/${this.authPassword}`, this.currentAd, { headers: { 'Content-Type': 'application/json' } })
						.then(response => {
							//
							this.successMessage = this.messages[651];
							// Через 3 секунды (3000 миллисекунд) очищаем сообщение
							setTimeout(() => { this.successMessage = ''; }, 3000);
							// очищаем форму
							this.cleanForm();
						})
						.catch((error) => {
							//
							this.errorMessage = this.messages[error.response.data['code']];
							// Через 3 секунды (3000 миллисекунд) очищаем сообщение
							setTimeout(() => { this.errorMessage = ''; }, 3000);
						})
						.finally(() => {
							this.isLoading2 = false;
						});
				},
				//
				cleanAd() {
					// Плавная прокрутка страницы вверх
					window.scrollTo({top: 0, behavior: 'smooth'});
					// Проверяем, введены ли параметры объявления и их длина
					if (this.authPassword.length < 5) {
						// this.errorMessage = 'Пожалуйста, введите пароль';
						this.errorMessage = this.messages[634];

					} else if (this.getRemainingChars(this.authPassword, this.authPasswordLimit) < 0) {
						// this.errorMessage = 'Пароль слишком длинный';
						this.errorMessage = this.messages[639];

					} else if (!this.currentAd.id || this.searchAdId !== '') {
						// this.errorMessage = 'Это объявление нельзя удалять';
						this.errorMessage = this.messages[452];
					}
					// Если есть сообщение об ошибке, показываем его и выходим из метода
					if (this.errorMessage) {
						setTimeout(() => { this.errorMessage = ''; }, 3000);
						return;
					}
					//
					id = this.currentAd.id;
					// отправляем данные на сервер
					this.isLoading2 = true;
					axios.get(`api/ad/clean/${id}/${this.authPassword}`)
					.then(response => {
							//
							this.successMessage = this.messages[491];
							// Через 3 секунды (3000 миллисекунд) очищаем сообщение
							setTimeout(() => { this.successMessage = ''; }, 3000);
							// очищаем форму
							this.cleanForm();
						})
						.catch((error) => {
							//
							this.errorMessage = this.messages[error.response.data['code']];
							// Через 3 секунды (3000 миллисекунд) очищаем сообщение
							setTimeout(() => { this.errorMessage = ''; }, 3000);
						})
						.finally(() => {
							this.isLoading2 = false;
						});
				},
				// метод создания новой новости
				createNews() {
					// Плавная прокрутка страницы вверх
					window.scrollTo({top: 0, behavior: 'smooth'});
					// Проверяем, введены ли параметры новости и их длина
					if (this.newNews.title_ru.length < 5) {
						// this.errorMessage = 'Пожалуйста, напишите заголовок (ru)';
						this.errorMessage = this.messages[730];

					} else if (this.getRemainingChars(this.newNews.title_ru, this.newNews.title_ruLimit) < 0) {
						// this.errorMessage = 'Заголовок слишком длинный (ru)';
						this.errorMessage = this.messages[737];

					} else if (this.newNews.description_ru.length < 20) {
						// this.errorMessage = 'Пожалуйста, напишите текст новости (ru)';
						this.errorMessage = this.messages[731];

					} else if (this.getRemainingChars(this.newNews.description_ru, this.newNews.description_ruLimit) < 0) {
						// this.errorMessage = 'Текст новости слишком длинный (ru)';
						this.errorMessage = this.messages[738];

					} else if (this.newNews.author_ru.length < 5) {
						// this.errorMessage = 'Пожалуйста, укажите автора (ru)';
						this.errorMessage = this.messages[732];

					} else if (this.getRemainingChars(this.newNews.author_ru, this.newNews.author_ruLimit) < 0) {
						// this.errorMessage = 'Имя автора слишком длинное (ru)';
						this.errorMessage = this.messages[739];

					} else if (this.newNews.title_en.length < 5) {
						// this.errorMessage = 'Пожалуйста, напишите заголовок (en)';
						this.errorMessage = this.messages[733];

					} else if (this.getRemainingChars(this.newNews.title_en, this.newNews.title_ruLimit) < 0) {
						// this.errorMessage = 'Заголовок слишком длинный (en)';
						this.errorMessage = this.messages[740];

					} else if (this.newNews.description_en.length < 20) {
						// this.errorMessage = 'Пожалуйста, напишите текст новости (en)';
						this.errorMessage = this.messages[734];

					} else if (this.getRemainingChars(this.newNews.description_en, this.newNews.description_ruLimit) < 0) {
						// this.errorMessage = 'Текст новости слишком длинный (en)';
						this.errorMessage = this.messages[741];

					} else if (this.newNews.author_en.length < 5) {
						// this.errorMessage = 'Пожалуйста, укажите автора (en)';
						this.errorMessage = this.messages[735];

					} else if (this.getRemainingChars(this.newNews.author_en, this.newNews.author_ruLimit) < 0) {
						// this.errorMessage = 'Имя автора слишком длинное (en)';
						this.errorMessage = this.messages[742];

					} else if (this.authPassword.length < 5) {
						// this.errorMessage = 'Пожалуйста, введите пароль';
						this.errorMessage = this.messages[736];

					} else if (this.getRemainingChars(this.authPassword, this.authPasswordLimit) < 0) {
						// this.errorMessage = 'Пароль слишком длинный';
						this.errorMessage = this.messages[743];
					}
					// Проверяем наличие фотографий (максимум 3)
					if (this.photos.length > 5) {
						// this.errorMessage = 'Слишком много фото. Максимум 3 шт';
						this.errorMessage = this.messages[744];
					}
					// Если есть сообщение об ошибке, показываем его и выходим из метода
					if (this.errorMessage) {
						setTimeout(() => { this.errorMessage = ''; }, 3000);
						return;
					}

					// формируем объект FormData для отправки данных на сервер
					const formData = new FormData();
					formData.append('title_ru', this.newNews.title_ru);
					formData.append('description_ru', this.newNews.description_ru);
					formData.append('author_ru', this.newNews.author_ru);
					formData.append('title_en', this.newNews.title_en);
					formData.append('description_en', this.newNews.description_en);
					formData.append('author_en', this.newNews.author_en);
					formData.append('password', this.authPassword);

					// добавляем фотографии в FormData
					for (let i = 0; i < this.photos.length; i++) {
						formData.append('photos[]', this.photos[i]);
					}
					
					// отправляем данные на сервер
					this.isLoading = true;
					axios.post('api/news/create', formData, {headers: {'Content-Type': 'multipart/form-data'}})
					.then(response => {
						//
						this.successMessage = this.messages[750];
						// очищаем форму
						this.cleanForm();
						// очищаем сообщение
						setTimeout(() => { this.successMessage = ''; }, 3000);
					})
					.catch((error) => {
						//
						this.errorMessage = this.messages[error.response.data['code']];
						// Через 3 секунды (3000 миллисекунд) очищаем сообщение
						setTimeout(() => { this.errorMessage = ''; }, 3000);
					})
					.finally(() => {
						this.isLoading = false;
					});
				},
				//
				blockAd() {
					// Плавная прокрутка страницы вверх
					window.scrollTo({top: 0, behavior: 'smooth'});
					// Проверяем, введен ли параметры объявления и их длина
					if (this.adId.length < 1) {
						// this.errorMessage = 'Пожалуйста, напишите ID объявления';
						this.errorMessage = this.messages[480];

					} else if (this.authPassword.length < 5) {
						// this.errorMessage = 'Пожалуйста, введите пароль';
						this.errorMessage = this.messages[481];

					} else if (this.getRemainingChars(this.adId, this.adIdLimit) < 0) {
						// this.errorMessage = 'ID слишком длинный';
						this.errorMessage = this.messages[482];

					} else if (this.getRemainingChars(this.authPassword, this.authPasswordLimit) < 0) {
						// this.errorMessage = 'Пароль слишком длинный';
						this.errorMessage = this.messages[483];
					}
					// Если есть сообщение об ошибке, показываем его и выходим из метода
					if (this.errorMessage) {
						setTimeout(() => { this.errorMessage = ''; }, 3000);
						return;
					}

					// отправляем данные на сервер
					this.isLoading = true;
					axios.get(`api/ad/block/${this.adId}/${this.authPassword}`)
					.then(response => {
						this.successMessage = this.messages[490];
						// очищаем id
						this.adId = '';
						// очищаем пароль
						// this.authPassword = '';
						// Через 3 секунды (3000 миллисекунд) очищаем сообщение
						setTimeout(() => { this.successMessage = ''; }, 3000);
					})
					.catch((error) => {
						//
						this.errorMessage = this.messages[error.response.data['code']];
						// Через 3 секунды (3000 миллисекунд) очищаем сообщение
						setTimeout(() => { this.errorMessage = ''; }, 3000);
					})
					.finally(() => {
						this.isLoading = false;
					});
				},
				//
				blockUser() {
					// Плавная прокрутка страницы вверх
					window.scrollTo({top: 0, behavior: 'smooth'});
					// Проверяем, введен ли параметры объявления и их длина
					if (this.userId.length < 1) {
						// this.errorMessage = 'Пожалуйста, напишите ID пользователя';
						this.errorMessage = this.messages[830];

					} else if (this.authPassword.length < 5) {
						// this.errorMessage = 'Пожалуйста, введите пароль';
						this.errorMessage = this.messages[831];

					} else if (this.getRemainingChars(this.userId, this.userIdLimit) < 0) {
						// this.errorMessage = 'ID слишком длинный';
						this.errorMessage = this.messages[832];

					} else if (this.getRemainingChars(this.authPassword, this.authPasswordLimit) < 0) {
						// this.errorMessage = 'Пароль слишком длинный';
						this.errorMessage = this.messages[833];
					}
					// Если есть сообщение об ошибке, показываем его и выходим из метода
					if (this.errorMessage) {
						setTimeout(() => { this.errorMessage = ''; }, 3000);
						return;
					}

					// отправляем данные на сервер
					this.isLoading = true;
					axios.get(`api/user/block/${this.userId}/${this.authPassword}`)
					.then(response => {
						this.successMessage = this.messages[840];
						// очищаем id
						this.userId = '';
						// очищаем пароль
						// this.authPassword = '';
						// Через 3 секунды (3000 миллисекунд) очищаем сообщение
						setTimeout(() => { this.successMessage = ''; }, 3000);
					})
					.catch((error) => {
						//
						this.errorMessage = this.messages[error.response.data['code']];
						// Через 3 секунды (3000 миллисекунд) очищаем сообщение
						setTimeout(() => { this.errorMessage = ''; }, 3000);
					})
					.finally(() => {
						this.isLoading = false;
					});
				},
				//
				deleteNews() {
					// Плавная прокрутка страницы вверх
					window.scrollTo({top: 0, behavior: 'smooth'});
					// Проверяем, введен ли параметры объявления и их длина
					if (this.newsId.length < 1) {
						// this.errorMessage = 'Пожалуйста, напишите ID новости';
						this.errorMessage = this.messages[530];

					} else if (this.authPassword.length < 5) {
						// this.errorMessage = 'Пожалуйста, введите пароль';
						this.errorMessage = this.messages[531];

					} else if (this.getRemainingChars(this.newsId, this.newsIdLimit) < 0) {
						// this.errorMessage = 'ID слишком длинный';
						this.errorMessage = this.messages[532];

					} else if (this.getRemainingChars(this.authPassword, this.authPasswordLimit) < 0) {
						// this.errorMessage = 'Пароль слишком длинный';
						this.errorMessage = this.messages[533];
					}
					// Если есть сообщение об ошибке, показываем его и выходим из метода
					if (this.errorMessage) {
						setTimeout(() => { this.errorMessage = ''; }, 3000);
						return;
					}

					// отправляем данные на сервер
					this.isLoading = true;
					axios.get(`api/news/delete/${this.newsId}/${this.authPassword}`)
					.then(response => {
						//
						this.successMessage = this.messages[540];
						// очищаем id
						this.newsId = '';
						// очищаем пароль
						// this.authPassword = '';
						// Через 3 секунды (3000 миллисекунд) очищаем сообщение
						setTimeout(() => { this.successMessage = ''; }, 3000);
					})
					.catch((error) => {
						//
						this.errorMessage = this.messages[error.response.data['code']];
						// Через 3 секунды (3000 миллисекунд) очищаем сообщение
						setTimeout(() => { this.errorMessage = ''; }, 3000);
					})
					.finally(() => {
						this.isLoading = false;
					});
				},
				// метод обработки изменения файла в поле загрузки, обновляющий массив с фото
				handleFileChange(event, index) {
					// сохраняем выбранное фото в массиве
					const file = event.target.files[0];
					if (file) {
						this.photos[index] = file; // сохраняем файл
						if (index < this.photoInputs.length - 1) {
							this.photoInputs[index + 1] = true; // показываем следующее поле
						}
					}
				},
				// метод обновления выбранных категорий
				loadSubcategories(level) {
					// Если выбран уровень "main" - подгружаем первую подкатегорию или сбрасываем
					if (level === 'main') {
					if (this.selectedMainCategory) {
						this.subcategories1 = this.categories[this.selectedMainCategory].subcategories;
					} else {
						this.subcategories1 = null;
					}
					this.selectedSubcategory1 = '';
					this.selectedSubcategory2 = '';
					this.subcategories2 = null;
					this.updateCategoryCode();
					}

					// Если выбран уровень "sub1" - подгружаем подкатегорию 2 или сбрасываем
					if (level === 'sub1') {
					if (this.selectedSubcategory1) {
						this.subcategories2 = this.subcategories1[this.selectedSubcategory1].subcategories;
					} else {
						this.subcategories2 = null;
					}
					this.selectedSubcategory2 = '';
					this.updateCategoryCode();
					}
				},
				// 
				updateCategoryCode() {
					// формирование итогового кода на основе выбора
					let mainCategoryCode = this.categories[this.selectedMainCategory]?.code || '';
					let subCategory1Code = this.subcategories1?.[this.selectedSubcategory1]?.code || '';
					let subCategory2Code = this.subcategories2?.[this.selectedSubcategory2]?.code || '';
					this.categoryCode = `${mainCategoryCode}${subCategory1Code}${subCategory2Code}`;
				},
				// Универсальный метод для подсчета оставшихся символов с учетом многобайтовых символов
				getRemainingChars(value, maxLength) {
					// const charCount = Array.from(value).length;
					// Точный подсчет количества символов
					const charCount = [...value].length;
    				return maxLength - charCount;
				},
				// Метод для динамического определения класса
				getCharCountClass(value, maxLength) {
					const remainingChars = this.getRemainingChars(value, maxLength);
					return {
						'text-danger': remainingChars < 0,  // если символов больше чем нужно
						'text-success': remainingChars >= 0 // если символов достаточно
					};
				},
				// Метод для динамического определения класса
				getCharCountClass2(value, maxLength) {
					const remainingChars = this.getRemainingChars(value, maxLength);
					return {
						'text-danger': remainingChars < 0,  // если символов больше чем нужно
						'text-dark': remainingChars >= 0 // если символов достаточно
					};
				},
				// Метод для обработки beforeunload
				handleBeforeUnload(event) {
					event.preventDefault();
					event.returnValue = '';  // Обязательное условие для отображения сообщения
				},
            }
        });
		// Устанавливаем глобальный базовый URL для всех запросов axios
        axios.defaults.baseURL = 'https://www.limonade.pro/';

        app.mount('#app');
    </script>

</body>
</html>