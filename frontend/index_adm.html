<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Объявления</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
	<style>
		[v-cloak] {
			display: none;
		}
		.big-top-margin {
			margin-top: 56px;
		}
		.no-border-top {
			border-top: none;
		}
	</style>
</head>
<body>
	<div id="app" v-cloak>
		<div class="d-none d-md-block">
			<div class="d-flex justify-content-center p-4 fs-3" >
				Этот сайт работает только на мобильных устройствах...<br>
				This site only works on mobile devices...
			</div>
        </div>

		<div class="d-block d-md-none big-top-margin">

			<div class="container">

				<nav class="navbar bg-body-tertiary fixed-top shadow-sm">
					<div class="container-fluid">
						<button @click="cleanForm()" class=" btn btn-sm btn-success shadow-sm">LIMONADE.PRO</button>
						<button type="button" class="btn btn-sm btn-warning shadow-sm">
							НЯ ЧАНГ
						</button>
						<div class="btn-group btn-group-sm shadow-sm" role="group" aria-label="Small button group">
							<button @click="notAvailableLang()" type="button" class="btn btn-sm btn-warning">RU</button>
							<button @click="notAvailableLang()" type="button" class="btn btn-sm btn-outline-warning">EN</button>
						</div>
						<button @click="notAvailableMenu()" class="btn btn-sm btn-primary shadow-sm" type="button">
							Меню
						</button>
					</div>
				</nav>

				<nav>
					<div class="nav nav-tabs" id="nav-tab" role="tablist">
					  <button class="nav-link active" id="nav-ad-tab" data-bs-toggle="tab"
					  	data-bs-target="#nav-ad" type="button" role="tab"
						aria-controls="nav-ad" aria-selected="true">Объявления</button>
					  <button class="nav-link" id="nav-news-tab" data-bs-toggle="tab"
					  	data-bs-target="#nav-news" type="button" role="tab"
						aria-controls="nav-news" aria-selected="false">Новости</button>
					</div>
				</nav>
				<div class="tab-content mb-3" id="nav-tabContent">
					<div class="tab-pane fade show active" id="nav-ad" role="tabpanel" aria-labelledby="nav-ad-tab" tabindex="0">

						<div v-if="errorMessage" class="alert alert-danger mt-3">{{ errorMessage }}</div>
						<div v-if="successMessage" class="alert alert-success mt-3">{{ successMessage }}</div>

						<div class="accordion mt-3" id="accordionExample">
							<div class="accordion-item">
							  <h2 class="accordion-header">
								<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
									Создать новое объявление
								</button>
							  </h2>
							  <div id="collapseOne" class="accordion-collapse collapse show" data-bs-parent="#accordionExample">
								<div class="accordion-body">
									
									<div class="col mt-1">
										<div class="card shadow-sm">
											<div class="card-body">
												<h5 class="card-title">
													Создать новое объявление
												</h5>
												
												<div class="mb-3">
													<label for="formFile1" class="form-label">
														Заглавное фото
													</label>
													<input @change="handleFileChange($event, 0)" class="form-control form-control-sm shadow-sm" id="formFile1" type="file">
												</div>
					
												<div v-if="photoInputs[1]" class="mb-2">
													<label for="formFile2" class="form-label">
														Фото 2
													</label>
													<input @change="handleFileChange($event, 1)" class="form-control form-control-sm shadow-sm" id="formFile2" type="file">
												</div>
												
												<div v-if="photoInputs[2]" class="mb-2">
													<label for="formFile3" class="form-label">
														Фото 3
													</label>
													<input @change="handleFileChange($event, 2)" class="form-control form-control-sm shadow-sm" id="formFile3" type="file">
												</div>
											
												<div class="mb-3">
													<label for="FormControlInput1" class="form-label">
														Название
														<span class="text text-danger">*</span></label>
													<input v-model="newAd.title" type="text" class="form-control form-control-sm shadow-sm" id="FormControlInput1" placeholder="">
												</div>
				
												<div class="mb-3">
													<label for="categorySelect" class="form-label">
														Категория
													<span class="text text-danger">*</span> {{ categoryCode }}
													</label>
													<select v-model="selectedMainCategory" @change="loadSubcategories('main')" class="form-select form-select-sm shadow-sm" id="categorySelect" aria-label="Small select example">
														<option value="">
															Не выбрано
														</option>
														<option v-for="(cat, key) in categories" :key="key" :value="key">{{ key }}</option>
													</select>
												</div>
												
												<div v-if="selectedMainCategory && subcategories1" class="mb-3">
													<select v-model="selectedSubcategory1" @change="loadSubcategories('sub1')" class="form-select form-select-sm shadow-sm" id="subcategory1Select" aria-label="Small select example">
														<option value="">
															Выберите подкатегорию
														</option>
														<option v-for="(sub, key) in subcategories1" :key="key" :value="key">{{ key }}</option>
													</select>
												</div>
												
												<div v-if="selectedSubcategory1 && subcategories2" class="mb-3">
													<select v-model="selectedSubcategory2" class="form-select form-select-sm shadow-sm" id="subcategory2Select" aria-label="Small select example">
														<option value="">
															Выберите подкатегорию
														</option>
														<option v-for="(sub, key) in subcategories2" :key="key" :value="key">{{ key }}</option>
													</select>
												</div>
				
												<div class="mb-3">
													<label for="FormControlTextarea1" class="form-label">
														Описание
														<span class="text text-danger">*</span></label>
													<textarea v-model="newAd.description" class="form-control form-select-sm shadow-sm" id="FormControlTextarea1" rows="3" placeholder=""></textarea>
												</div>
							
												<div class="mb-3">
													<label for="FormControlInput3" class="form-label">
														Контакт
														<span class="text text-danger">*</span></label>
													<input v-model="newAd.contact" type="text" class="form-control form-control-sm shadow-sm" id="FormControlInput3"
														placeholder="">
												</div>
			
												<div class="form-check form-switch mb-3">
													<input v-model="newAd.permanent" class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckDefault">
													<label class="form-check-label" for="flexSwitchCheckDefault">
														Сделать объявление вечным
													</label>
												</div>
												
												<div class="row mb-3">
													<div class="col-4">
														<label for="inputPassword2" class="form-label">
															Пароль
															<span class="text text-danger">*</span></label>
													</div>
													<div class="col-8">
														<input v-model="authPassword" type="password" id="inputPassword2" class="form-control form-control-sm shadow-sm" aria-describedby="passwordHelpBlock">
													</div>
												</div>
												<button @click="createAd()" class="btn btn-sm btn-success shadow-sm" :disabled="authPassword.length < 5">
													Опубликовать объявление
												</button>
											</div>
										</div>
									</div>

								</div>
							  </div>
							</div>
							<div class="accordion-item">
							  <h2 class="accordion-header">
								<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
									Заблокировать объявление
								</button>
							  </h2>
							  <div id="collapseTwo" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
								<div class="accordion-body">
									
									<div class="col mt-1">
										<div class="card shadow-sm">
											<div class="card-body">
												<h5 class="card-title mb-3">
													Заблокировать объявление
												</h5>
												<div class="mb-3 row">
													<div class="col">
														<label for="FormControlInput11" class="form-label">
															ID объявления
															<span class="text text-danger">*</span></label>
													</div>
													<div class="col">
														<input v-model="adId" type="text" class="form-control form-control-sm shadow-sm" id="FormControlInput11"
														placeholder="">
													</div>
												</div>
												<div class="row mb-3">
													<div class="col-4">
														<label for="inputPassword21" class="form-label">
															Пароль
															<span class="text text-danger">*</span></label>
													</div>
													<div class="col-8">
														<input v-model="authPassword" type="password" id="inputPassword21" class="form-control form-control-sm shadow-sm" aria-describedby="passwordHelpBlock">
													</div>
												</div>
												<button @click="blockAd()" class="btn btn-sm btn-success shadow-sm" :disabled="authPassword.length < 5">
													Заблокировать объявление
												</button>
											</div>
										</div>
									</div>

								</div>
							  </div>
							</div>
							<div class="accordion-item">
							  <h2 class="accordion-header">
								<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
									Заблокировать пользователя
								</button>
							  </h2>
							  <div id="collapseThree" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
								<div class="accordion-body">
									
									<div class="col mt-1"></div>
										<div class="card shadow-sm">
											<div class="card-body">
												<h5 class="card-title mb-3">
													Заблокировать пользователя
												</h5>
												<div class="mb-3 row">
													<div class="col">
														<label for="FormControlInput21" class="form-label">
															ID пользователя
															<span class="text text-danger">*</span></label>
													</div>
													<div class="col">
														<input v-model="userId" type="text" class="form-control form-control-sm shadow-sm" id="FormControlInput21"
														placeholder="">
													</div>
												</div>
												<div class="row mb-3">
													<div class="col-4">
														<label for="inputPassword31" class="form-label">
															Пароль
															<span class="text text-danger">*</span></label>
													</div>
													<div class="col-8">
														<input v-model="authPassword" type="password" id="inputPassword31" class="form-control form-control-sm shadow-sm" aria-describedby="passwordHelpBlock">
													</div>
												</div>
												<button @click="blockUser()" class="btn btn-sm btn-success shadow-sm" :disabled="authPassword.length < 5">
													Заблокировать пользователя
												</button>
											</div>
										</div>
									</div>

								</div>
							</div>
						</div>

					</div>
					<div class="tab-pane fade" id="nav-news" role="tabpanel" aria-labelledby="nav-news-tab" tabindex="0">

						<div v-if="errorMessage" class="alert alert-danger mt-3">{{ errorMessage }}</div>
						<div v-if="successMessage" class="alert alert-success mt-3">{{ successMessage }}</div>

						<div class="accordion mt-3" id="accordionExample2">
							<div class="accordion-item">
							  <h2 class="accordion-header">
								<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="true" aria-controls="collapseFour">
									Создать новую новость
								</button>
							  </h2>
							  <div id="collapseFour" class="accordion-collapse collapse show" data-bs-parent="#accordionExample2">
								<div class="accordion-body">
									
									<div class="col mt-1">
										<div class="card shadow-sm">
											<!-- style="background-color: #f0f0f0" -->
											<div class="card-body">
												<h5 class="card-title">
													Создать новую новость
												</h5>
												
												<div class="mb-3">
													<label for="formFile4" class="form-label">
														Заглавное фото
													</label>
													<input @change="handleFileChange($event, 0)" class="form-control form-control-sm shadow-sm"
														id="formFile4" type="file" ref="fileInput">
												</div>
					
												<div v-if="photoInputs[1]" class="mb-2">
													<label for="formFile5" class="form-label">
														Фото 2
													</label>
													<input @change="handleFileChange($event, 1)" class="form-control form-control-sm shadow-sm"
														id="formFile5" type="file" ref="fileInput">
												</div>
												
												<div v-if="photoInputs[2]" class="mb-2">
													<label for="formFile6" class="form-label">
														Фото 3
													</label>
													<input @change="handleFileChange($event, 2)" class="form-control form-control-sm shadow-sm"
														id="formFile6" type="file" ref="fileInput">
												</div>
											
												<div class="mb-3">
													<label for="FormControlInput7" class="form-label">
														Заголовок (ru)
														<span class="text text-danger">*</span></label>
													<input v-model="newNews.title_ru" type="text" class="form-control form-control-sm shadow-sm" id="FormControlInput7"
														placeholder="">
												</div>
				
												<div class="mb-3">
													<label for="FormControlTextarea3" class="form-label">
														Текст (ru)
														<span class="text text-danger">*</span></label>
													<textarea v-model="newNews.description_ru" class="form-control form-select-sm shadow-sm" id="FormControlTextarea3" rows="3"
														placeholder=""></textarea>
												</div>
							
												<div class="mb-3">
													<label for="FormControlInput8" class="form-label">
														Автор (ru)
														<span class="text text-danger">*</span></label>
													<input v-model="newNews.author_ru" type="text" class="form-control form-control-sm shadow-sm" id="FormControlInput8"
														placeholder="">
												</div>

												<div class="mb-3">
													<label for="FormControlInput17" class="form-label">
														Заголовок (en)
														<span class="text text-danger">*</span></label>
													<input v-model="newNews.title_en" type="text" class="form-control form-control-sm shadow-sm" id="FormControlInput17"
														placeholder="">
												</div>
				
												<div class="mb-3">
													<label for="FormControlTextarea13" class="form-label">
														Текст (en)
														<span class="text text-danger">*</span></label>
													<textarea v-model="newNews.description_en" class="form-control form-select-sm shadow-sm" id="FormControlTextarea13" rows="3"
														placeholder=""></textarea>
												</div>
							
												<div class="mb-3">
													<label for="FormControlInput18" class="form-label">
														Автор (en)
														<span class="text text-danger">*</span></label>
													<input v-model="newNews.author_en" type="text" class="form-control form-control-sm shadow-sm" id="FormControlInput18"
														placeholder="">
												</div>
												
												<div class="row mb-3">
													<div class="col-4">
														<label for="inputPassword4" class="form-label">
															Пароль
															<span class="text text-danger">*</span></label>
													</div>
													<div class="col-8">
														<input v-model="authPassword" type="password" id="inputPassword4" class="form-control form-control-sm shadow-sm" aria-describedby="passwordHelpBlock">
													</div>
												</div>
												<button @click="createNews()" class="btn btn-sm btn-success shadow-sm" :disabled="authPassword.length < 5">
													Опубликовать новость
												</button>
											</div>
										</div>
									</div>

								</div>
							  </div>
							</div>
							<div class="accordion-item">
							  <h2 class="accordion-header">
								<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFive" aria-expanded="false" aria-controls="collapseFive">
									Удалить новость
								</button>
							  </h2>
							  <div id="collapseFive" class="accordion-collapse collapse" data-bs-parent="#accordionExample2">
								<div class="accordion-body">
									
									<div class="col mt-1">
										<div class="card shadow-sm">
											<div class="card-body">
												<h5 class="card-title mb-3">
													Удалить новость
												</h5>
												<div class="mb-3 row">
													<div class="col">
														<label for="FormControlInput41" class="form-label">
															ID новости
															<span class="text text-danger">*</span></label>
													</div>
													<div class="col">
														<input v-model="newsId" type="text" class="form-control form-control-sm shadow-sm" id="FormControlInput41"
														placeholder="">
													</div>
												</div>
												<div class="row mb-3">
													<div class="col-4">
														<label for="inputPassword41" class="form-label">
															Пароль
															<span class="text text-danger">*</span></label>
													</div>
													<div class="col-8">
														<input v-model="authPassword" type="password" id="inputPassword41" class="form-control form-control-sm shadow-sm" aria-describedby="passwordHelpBlock">
													</div>
												</div>
												<button @click="deleteNews()" class="btn btn-sm btn-success shadow-sm" :disabled="authPassword.length < 5">
													Удалить новость
												</button>
											</div>
										</div>
									</div>

								</div>
							  </div>
							</div>
							
						</div>
						
					</div>
				</div>
			</div>
		</div>
	</div>

	<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>

	<script src="https://cdn.jsdelivr.net/npm/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

	<script>
        const app = Vue.createApp({
            data() {
                return {
					// содержит объект нового объявления (ещё не созданного)
					newAd: {
						title: '',
          				description: '',
						contact: '',
						category: '',
						permanent: false
					},
					// содержит объект новой новости (ещё не созданной)
					newNews: {
						title_ru: '',
          				description_ru: '',
						author_ru: '',
						title_en: '',
          				description_en: '',
						author_en: ''
					},
					adId: null,
					userId: null,
					newsId: null,
					// управляет видимостью полей для фото
					photoInputs: [true, false, false], // скрываем фото 2 и фото 3
					// содержит массив загруженных фото
        			photos: [],
					// содержит текст всплывающей подсказки в случае успеха
					successMessage: null,
					// содержит текст всплывающей подсказки в случае ошибки
                    errorMessage: null,
					// содержит пароль для авторизации
					authPassword: '',
					// содержит весь список категорий с кодами на русском
					categories: {
						'Жильё': { code: '1', subcategories: {
								'Аренда': { code: 'A', subcategories: {
									'Кровать': { code: '1' },
									'Комната': { code: '2' },
									'Квартира': { code: '3' },
									'Дом': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Продажа': { code: 'B'
							}
						}},
						'Транспорт': { code: '2', subcategories: {
								'Аренда': { code: 'A', subcategories: {
									'Велосипед': { code: '1' },
									'Мопед': { code: '2' },
									'Мотоцикл': { code: '3' },
									'Автомобиль': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Продажа': { code: 'B', subcategories: {
									'Велосипед': { code: '1' },
									'Мопед': { code: '2' },
									'Мотоцикл': { code: '3' },
									'Автомобиль': { code: '4' },
									'Другое': { code: '5' }
							}}
						}},
						'Услуги': { code: '3', subcategories: {
								'Транспорт, грузоперевозки, визараны': { code: 'A', subcategories: {
									'Транспорт': { code: '1' },
									'Грузоперевозки': { code: '2' },
									'Визараны': { code: '3' },
									'Складские услуги': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Документы, визы, билеты': { code: 'B', subcategories: {
									'Документы': { code: '1' },
									'Визы': { code: '2' },
									'Билеты': { code: '3' },
									'Страховки': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Мобильная связь, интернет, IT': { code: 'C', subcategories: {
									'Мобильная связь': { code: '1' },
									'Интернет': { code: '2' },
									'IT': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Обмен валюты, переводы, банковские карты': { code: 'D', subcategories: {
									'Обмен валюты': { code: '1' },
									'Переводы': { code: '2' },
									'Банковские карты': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Поиск жилья, адаптация, камеры хранения': { code: 'E', subcategories: {
									'Поиск жилья': { code: '1' },
									'Адаптация': { code: '2' },
									'Камеры хранения': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Красота, здоровье': { code: 'F', subcategories: {
									'Красота': { code: '1' },
									'Здоровье': { code: '2' },
									// '': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Уборка, стирка, дезинсекция': { code: 'G', subcategories: {
									'Уборка': { code: '1' },
									'Стирка': { code: '2' },
									'Дезинсекция': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Ремонт электроники, телефонов, ноутбуков': { code: 'H', subcategories: {
									'Ремонт электроники': { code: '1' },
									'Ремонт телефонов': { code: '2' },
									'Ремонт ноутбуков': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Мелкий бытовой ремонт (муж на час)': { code: 'I', subcategories: {
									'Мелкий бытовой ремонт': { code: '1' },
									'Монтаж и установка техники': { code: '2' },
									// '': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Обучение, курсы, искусство': { code: 'J', subcategories: {
									'Обучение': { code: '1' },
									'Курсы': { code: '2' },
									'Искусство': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Тусовки, мероприятия, экскурсии': { code: 'K', subcategories: {
									'Тусовки': { code: '1' },
									'Мероприятия': { code: '2' },
									'Экскурсии': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Еда, кулинария': { code: 'L', subcategories: {
									'Еда': { code: '1' },
									'Кулинария': { code: '2' },
									// '': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Ремонт, строительство': { code: 'M', subcategories: {
									'Ремонт': { code: '1' },
									'Строительство': { code: '2' },
									// '': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Переводчик, юридические услуги': { code: 'N', subcategories: {
									'Переводчик': { code: '1' },
									'Юридические услуги': { code: '2' },
									// '': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Няня, детские сады, школы': { code: 'O', subcategories: {
									'Няня': { code: '1' },
									'Детские сады': { code: '2' },
									'Школы': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Домашние животные, передержка, выгул': { code: 'P', subcategories: {
									'Домашние животные': { code: '1' },
									'Передержка': { code: '2' },
									'Выгул': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Доставка товаров на дом': { code: 'Q', subcategories: {
									'Доставка товаров на дом': { code: '1' },
									// '': { code: '2' },
									// '': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Фото, видеосъемка': { code: 'R', subcategories: {
									'Фото': { code: '1' },
									'Видеосъемка': { code: '2' },
									// '': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Автосервис': { code: 'S', subcategories: {
									'Автосервис': { code: '1' },
									// '': { code: '2' },
									// '': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Прокат, аренда': { code: 'T', subcategories: {
									'Прокат': { code: '1' },
									'Аренда': { code: '2' },
									// '': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Охрана, сторож': { code: 'U', subcategories: {
									'Охрана': { code: '1' },
									'Сторож': { code: '2' },
									// '': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Другое': { code: 'Z' },
						}},
						'Товары': { code: '4', subcategories: {
								'Электроника': { code: 'A' },
								'Мебель': { code: 'B' },
								'Бытовые товары': { code: 'C' },
								'Одежда': { code: 'D' },
								'Еда': { code: 'E' },
								'Детские товары': { code: 'F' },
								'Животные': { code: 'G' },
								'Хобби и отдых': { code: 'H' },
								'Автозапчасти': { code: 'I' },
								'Красота и здоровье': { code: 'J' },
								'Растения': { code: 'K' },
								'Товары для бизнеса': { code: 'L' },
								'Другое': { code: 'Z' }
						}},
						'Работа': { code: '5', subcategories: {
								'Предложение': { code: 'A', subcategories: {
									'Частичная занятость': { code: '1' },
									'Полная занятость': { code: '2' }
							}},
								'Поиск': { code: 'B' }
						}},
					},
					// Выбранная головная категория
					selectedMainCategory: '',
					// Выбранная подкатегория 1
					selectedSubcategory1: '',
					// Выбранная подкатегория 2
					selectedSubcategory2: '',
					// Список подкатегорий 1
					subcategories1: null,
					// Список подкатегорий 2
					subcategories2: null,
					// Строка с итоговым кодом категории
					categoryCode: '',
                };
            },
			watch: {
				// Наблюдаем за изменением второго уровня подкатегорий (третий выпадающий список)
				selectedSubcategory2() {
				this.updateCategoryCode();
				}
			},
            methods: {
				//
				notAvailableMenu() {
					this.errorMessage = 'Меню временно отключено';
					setTimeout(() => { this.errorMessage = ''; }, 2000);
				},
				//
				notAvailableLang() {
					this.errorMessage = 'Переключение языков временно отключено';
					setTimeout(() => { this.errorMessage = ''; }, 2000);
				},
				//
				cleanForm() {
					// очищаем форму 1
					this.newAd = { title: '', description: '', contact: '', category: '', permanent: false };
					// очищаем форму 2
					this.newNews = { title_ru: '', description_ru: '', author_ru: '', title_en: '', description_en: '', author_en: '' };
					// очищаем пароль
					this.authPassword = '';
					//
					this.photoInputs = [true, false, false];
					// Очистить поле файла через ref
					this.$refs.fileInput.value = '';
					// очищаем массив фото
					this.photos = [];
					//
					this.cleanCategory();
				},
				// метод очистки категорий
				cleanCategory() {
					this.selectedMainCategory = '';
					this.selectedSubcategory1 = '';
					this.selectedSubcategory2 = '';
					this.subcategories1 = null;
					this.subcategories2 = null;
					this.categoryCode = '';
				},
				// метод создания нового объявления
				createAd() {
					// Плавная прокрутка страницы вверх
					window.scrollTo({top: 0, behavior: 'smooth'});
					// проверяем обязательные поля
					if (!this.newAd.title || !this.newAd.description || !this.newAd.contact || !this.categoryCode) {
						this.errorMessage = 'Пожалуйста, заполните все обязательные поля';
						setTimeout(() => { this.errorMessage = ''; }, 3000);
						return;
					}
					this.newAd.category = this.categoryCode;
					// проверяем, введен ли пароль
					if (!this.authPassword) {
						this.errorMessage = 'Пожалуйста, введите пароль';
						setTimeout(() => { this.errorMessage = ''; }, 3000);
						return;
					}
					// проверяем наличие фотографий (максимум 3)
					if (this.photos.length > 3) {
						this.errorMessage = 'Максимум можно загрузить 3 фотографии';
						setTimeout(() => { this.errorMessage = ''; }, 3000);
						return;
					}
					// формируем объект FormData для отправки данных на сервер
					const formData = new FormData();
					formData.append('title', this.newAd.title);
					formData.append('description', this.newAd.description);
					formData.append('contact', this.newAd.contact);
					formData.append('category', this.newAd.category);
					formData.append('permanent', this.newAd.permanent);
					formData.append('password', this.authPassword);

					// добавляем фотографии в FormData
					for (let i = 0; i < this.photos.length; i++) {
						formData.append('photos[]', this.photos[i]);
					}
					
					// отправляем данные на сервер
					this.isLoading = true;
					axios.post('api/ad/create', formData, {headers: {'Content-Type': 'multipart/form-data'}})
						.then(response => {
							this.successMessage = 'Объявление успешно создано!';
							// очищаем форму
							this.cleanForm();
							// Через 3 секунды (3000 миллисекунд) очищаем сообщение
							setTimeout(() => { this.successMessage = ''; }, 3000);
						})
						.catch((error) => {
							this.errorMessage = 'Не удалось создать объявление';	
							if (error.response) {
								// Сервер вернул ответ с ошибкой
								console.error('Данные ответа с ошибкой:', error.response.data);
								console.error('Код ответа:', error.response.status);
								console.error('Заголовки ответа:', error.response.headers);
							} else if (error.request) {
								// Запрос был отправлен, но ответа не было
								console.error('Запрос без ответа:', error.request);
							} else {
								// Другая ошибка, связанная с настройкой запроса
								console.error('Ошибка настройки запроса:', error.message);
							}
							// Через 3 секунды (3000 миллисекунд) очищаем сообщение
							setTimeout(() => { this.errorMessage = ''; }, 3000);
						})
						.finally(() => {
							this.isLoading = false;
						});
				},
				// метод создания новой новости
				createNews() {
					// Плавная прокрутка страницы вверх
					window.scrollTo({top: 0, behavior: 'smooth'});
					// проверяем обязательные поля
					if (!this.newNews.title_ru
						|| !this.newNews.description_ru
						|| !this.newNews.author_ru
						|| !this.newNews.title_en
						|| !this.newNews.description_en
						|| !this.newNews.author_en
					) {
						this.errorMessage = 'Пожалуйста, заполните все обязательные поля.';
						setTimeout(() => { this.errorMessage = ''; }, 3000);
						return;
					}
					// проверяем, введен ли пароль
					if (!this.authPassword) {
						this.errorMessage = 'Пожалуйста, введите пароль.';
						setTimeout(() => { this.errorMessage = ''; }, 3000);
						return;
					}
					// проверяем наличие фотографий (максимум 3)
					if (this.photos.length > 3) {
						this.errorMessage = 'Максимум можно загрузить 3 фотографии.';
						setTimeout(() => { this.errorMessage = ''; }, 3000);
						return;
					}
					// формируем объект FormData для отправки данных на сервер
					const formData = new FormData();
					formData.append('title_ru', this.newNews.title_ru);
					formData.append('description_ru', this.newNews.description_ru);
					formData.append('author_ru', this.newNews.author_ru);
					formData.append('title_en', this.newNews.title_en);
					formData.append('description_en', this.newNews.description_en);
					formData.append('author_en', this.newNews.author_en);
					formData.append('password', this.authPassword);

					// добавляем фотографии в FormData
					for (let i = 0; i < this.photos.length; i++) {
						formData.append('photos[]', this.photos[i]);
					}
					
					// отправляем данные на сервер
					this.isLoading = true;
					axios.post('api/news/create', formData, {
						headers: {
							'Content-Type': 'multipart/form-data'
						} 
					})
					.then(response => {
						this.successMessage = 'Новость успешно создана!';
						// очищаем форму
						this.cleanForm();
						// очищаем сообщение
						setTimeout(() => { this.successMessage = ''; }, 3000);
					})
					.catch((error) => {
						this.errorMessage = 'Не удалось создать новость';	
						if (error.response) {
							// Сервер вернул ответ с ошибкой
							console.error('Данные ответа с ошибкой:', error.response.data);
							console.error('Код ответа:', error.response.status);
							console.error('Заголовки ответа:', error.response.headers);
						} else if (error.request) {
							// Запрос был отправлен, но ответа не было
							console.error('Запрос без ответа:', error.request);
						} else {
							// Другая ошибка, связанная с настройкой запроса
							console.error('Ошибка настройки запроса:', error.message);
						}
						// Через 3 секунды (3000 миллисекунд) очищаем сообщение
						setTimeout(() => { this.errorMessage = ''; }, 3000);
					})
					.finally(() => {
						this.isLoading = false;
					});
				},
				//
				blockAd() {
					// Плавная прокрутка страницы вверх
					window.scrollTo({top: 0, behavior: 'smooth'});
					// проверяем обязательные поля
					if (!this.adId) {
						this.errorMessage = 'Пожалуйста, введите ID объявления.';
						setTimeout(() => { this.errorMessage = ''; }, 3000);
						return;
					}

					// сделать проверку id на число

					// проверяем, введен ли пароль
					if (!this.authPassword) {
						this.errorMessage = 'Пожалуйста, введите пароль.';
						setTimeout(() => { this.errorMessage = ''; }, 3000);
						return;
					}
					// отправляем данные на сервер
					this.isLoading = true;
					axios.get(`api/ad/block/${this.adId}/${this.authPassword}`)
					.then(response => {
						this.successMessage = 'Объявление успешно заблокировано!';
						// очищаем id
						this.adId = null;
						// очищаем пароль
						this.authPassword = '';
						// Через 3 секунды (3000 миллисекунд) очищаем сообщение
						setTimeout(() => { this.successMessage = ''; }, 3000);
					})
					.catch((error) => {
						this.errorMessage = 'Не удалось заблокировать объявление';	
						if (error.response) {
							// Сервер вернул ответ с ошибкой
							console.error('Данные ответа с ошибкой:', error.response.data);
							console.error('Код ответа:', error.response.status);
							console.error('Заголовки ответа:', error.response.headers);
						} else if (error.request) {
							// Запрос был отправлен, но ответа не было
							console.error('Запрос без ответа:', error.request);
						} else {
							// Другая ошибка, связанная с настройкой запроса
							console.error('Ошибка настройки запроса:', error.message);
						}
						// Через 3 секунды (3000 миллисекунд) очищаем сообщение
						setTimeout(() => { this.errorMessage = ''; }, 3000);
					})
					.finally(() => {
						this.isLoading = false;
					});
				},
				//
				blockUser() {
					// Плавная прокрутка страницы вверх
					window.scrollTo({top: 0, behavior: 'smooth'});
					// проверяем обязательные поля
					if (!this.userId) {
						this.errorMessage = 'Пожалуйста, введите ID пользователя.';
						setTimeout(() => { this.errorMessage = ''; }, 3000);
						return;
					}

					// сделать проверку id на число


					// проверяем, введен ли пароль
					if (!this.authPassword) {
						this.errorMessage = 'Пожалуйста, введите пароль.';
						setTimeout(() => { this.errorMessage = ''; }, 3000);
						return;
					}
					// отправляем данные на сервер
					this.isLoading = true;
					axios.get(`api/user/block/${this.userId}/${this.authPassword}`)
					.then(response => {
						this.successMessage = 'Пользователь успешно заблокирован!';
						// очищаем id
						this.userId = null;
						// очищаем пароль
						this.authPassword = '';
						// Через 3 секунды (3000 миллисекунд) очищаем сообщение
						setTimeout(() => { this.successMessage = ''; }, 3000);
					})
					.catch((error) => {
						this.errorMessage = 'Не удалось заблокировать пользователя';	
						if (error.response) {
							// Сервер вернул ответ с ошибкой
							console.error('Данные ответа с ошибкой:', error.response.data);
							console.error('Код ответа:', error.response.status);
							console.error('Заголовки ответа:', error.response.headers);
						} else if (error.request) {
							// Запрос был отправлен, но ответа не было
							console.error('Запрос без ответа:', error.request);
						} else {
							// Другая ошибка, связанная с настройкой запроса
							console.error('Ошибка настройки запроса:', error.message);
						}
						// Через 3 секунды (3000 миллисекунд) очищаем сообщение
						setTimeout(() => { this.errorMessage = ''; }, 3000);
					})
					.finally(() => {
						this.isLoading = false;
					});
				},
				//
				deleteNews() {
					// Плавная прокрутка страницы вверх
					window.scrollTo({top: 0, behavior: 'smooth'});
					// проверяем обязательные поля
					if (!this.newsId) {
						this.errorMessage = 'Пожалуйста, введите ID новости.';
						setTimeout(() => { this.errorMessage = ''; }, 3000);
						return;
					}

					// сделать проверку id на число

					
					// проверяем, введен ли пароль
					if (!this.authPassword) {
						this.errorMessage = 'Пожалуйста, введите пароль.';
						setTimeout(() => { this.errorMessage = ''; }, 3000);
						return;
					}
					// отправляем данные на сервер
					this.isLoading = true;
					axios.get(`api/news/delete/${this.newsId}/${this.authPassword}`)
					.then(response => {
						this.successMessage = 'Новость успешно удалена!';
						// очищаем id
						this.newsId = null;
						// очищаем пароль
						this.authPassword = '';
						// Через 3 секунды (3000 миллисекунд) очищаем сообщение
						setTimeout(() => { this.successMessage = ''; }, 3000);
					})
					.catch((error) => {
						this.errorMessage = 'Не удалось удалить новость';
						if (error.response) {
							// Сервер вернул ответ с ошибкой
							console.error('Данные ответа с ошибкой:', error.response.data);
							console.error('Код ответа:', error.response.status);
							console.error('Заголовки ответа:', error.response.headers);
						} else if (error.request) {
							// Запрос был отправлен, но ответа не было
							console.error('Запрос без ответа:', error.request);
						} else {
							// Другая ошибка, связанная с настройкой запроса
							console.error('Ошибка настройки запроса:', error.message);
						}
						// Через 3 секунды (3000 миллисекунд) очищаем сообщение
						setTimeout(() => { this.errorMessage = ''; }, 3000);
					})
					.finally(() => {
						this.isLoading = false;
					});
				},
				// метод обработки изменения файла в поле загрузки, обновляющий массив с фото
				handleFileChange(event, index) {
					// сохраняем выбранное фото в массиве
					const file = event.target.files[0];
					if (file) {
						this.photos[index] = file; // сохраняем файл
						if (index < this.photoInputs.length - 1) {
							this.photoInputs[index + 1] = true; // показываем следующее поле
						}
					}
				},
				// метод обновления выбранных категорий
				loadSubcategories(level) {
					// Если выбран уровень "main" - подгружаем первую подкатегорию или сбрасываем
					if (level === 'main') {
					if (this.selectedMainCategory) {
						this.subcategories1 = this.categories[this.selectedMainCategory].subcategories;
					} else {
						this.subcategories1 = null;
					}
					this.selectedSubcategory1 = '';
					this.selectedSubcategory2 = '';
					this.subcategories2 = null;
					this.updateCategoryCode();
					}

					// Если выбран уровень "sub1" - подгружаем подкатегорию 2 или сбрасываем
					if (level === 'sub1') {
					if (this.selectedSubcategory1) {
						this.subcategories2 = this.subcategories1[this.selectedSubcategory1].subcategories;
					} else {
						this.subcategories2 = null;
					}
					this.selectedSubcategory2 = '';
					this.updateCategoryCode();
					}
				},
				// 
				updateCategoryCode() {
					// формирование итогового кода на основе выбора
					let mainCategoryCode = this.categories[this.selectedMainCategory]?.code || '';
					let subCategory1Code = this.subcategories1?.[this.selectedSubcategory1]?.code || '';
					let subCategory2Code = this.subcategories2?.[this.selectedSubcategory2]?.code || '';
					this.categoryCode = `${mainCategoryCode}${subCategory1Code}${subCategory2Code}`;
				},

            }
        });
		// Устанавливаем глобальный базовый URL для всех запросов axios
        axios.defaults.baseURL = 'http://localhost/limonade/';

        app.mount('#app');
    </script>

</body>
</html>