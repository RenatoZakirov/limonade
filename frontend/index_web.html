<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes">
    <title>Объявления</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
	<link rel="stylesheet" href="https://unpkg.com/@vuepic/vue-datepicker@latest/dist/main.css" />
	
	<script src="https://telegram.org/js/telegram-web-app.js"></script>
    <!-- <script src="https://cdn.jsdelivr.net/npm/vue@3/dist/vue.global.js"></script> -->
	<script src="https://cdn.jsdelivr.net/npm/vue@3/dist/vue.global.prod.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>
	<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBAxoWNbe2YLfglEUwHMnEO4pGv5WKRKik"></script>
	<script src="https://unpkg.com/@vuepic/vue-datepicker@latest"></script>


	<style>
        /* Ваши стили можно разместить здесь */
        [v-cloak] {
			display: none;
		}
		/* Светлая тема */
		:root {
			--background-color: none; /* #ffffff; */
			--secondary-background-color: #F1F1F1;
			--text-color: #000000;
			--secondary-text-color: #999999;

			--input-bg-color: #F1F1F1;
			--input-focus-bg-color: #ffffff;
			--input-text-color: #000000;
			--input-secondary-text-color: #999999;
			--input-border-color: #F1F1F1;

			--card-bg-color: #ffffff;
			--card-secondary-bg-color: #EFFDDE;
			--card-text-color: #000000;
			--card-secondary-text-color: #6DB566;

			--btn-blue-bg-color: #40A7E3;
			--btn-blue-text-color: #ffffff;

			/* Стили фона для светлой темы */
			/* --bg-solid-color: none; /* Отключаем однотонный фон в светлой теме */
			--bg-image-gradient: url('https://www.limonade.pro/backend/uploads/images/templates/bg_gradient.png');
    		--bg-image-overlay: url('https://www.limonade.pro/backend/uploads/images/templates/bg_green.jpg');
		}
		/* Темная тема */
		.dark-theme {
			--background-color: #0E1621; /* done 131B28 */
			--secondary-background-color: #202B36;
			--text-color: #ffffff;
			--secondary-text-color: #7F91A4;

			--input-bg-color: #202B36;
			--input-focus-bg-color: #202B36;
			--input-text-color: #ffffff;
			--input-secondary-text-color: #7F91A4;
			--input-border-color: #202B36;

			--card-bg-color: #182533;
			--card-secondary-bg-color: #2B5378;
			--card-text-color: #ffffff;
			--card-secondary-text-color: #7DA8D3;

			--btn-blue-bg-color: #3F96D0;
			--btn-blue-text-color: #ffffff;

			/* Для темной темы одноцветный фон */
			/* --bg-solid-color: #131B28; /* Фон для темной темы 10171F */
			/* Убираем градиент */
			--bg-image-gradient: none;
			--bg-image-overlay: url('https://www.limonade.pro/backend/uploads/images/templates/bg_black.jpg');
		}
		/* Основные стили body */
		body {
			font-family: "Roboto", sans-serif;
			margin: 0;
			background-color: var(--background-color);
			color: var(--text-color);
		}

		/* Градиентный или однотонный фон */
		body::before {
			content: "";
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background-image: var(--bg-image-gradient), var(--background-color);
			background-size: cover;
			background-position: center;
			background-repeat: no-repeat;
			background-attachment: fixed;
			z-index: -2;
		}

		/* Полупрозрачный наложенный рисунок */
		body::after {
			content: "";
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background-image: var(--bg-image-overlay);
			background-size: cover;
			background-position: center;
			background-repeat: no-repeat;
			background-attachment: fixed;
			z-index: -1;
			/* Уровень прозрачности (от 0 до 1) */
			opacity: 0.15;
		}
		.dropdown-menu {
			background-color: var(--card-bg-color);
			color: var(--text-color);
		}
		.form-control, .form-select, textarea, input[type="file"] {
			background-color: var(--input-bg-color);
			color: var(--input-text-color);
			border-color: var(--input-border-color);
		}
		/* Стили для placeholder */
		.form-control::placeholder, textarea::placeholder {
			color: var(--input-secondary-text-color);
			/* opacity: 0.7; */
		}
		/* Стили для focus-состояния */
		.form-control:focus, .form-select:focus, textarea:focus, input[type="file"]:focus {
			outline: none;
			box-shadow: none;
			background-color: var(--input-focus-bg-color);
			color: var(--input-text-color);
			border-color: var(--input-border-color);
			/* box-shadow: 0 0 0 0.25rem rgba(0, 123, 255, 0.25); */
		}
		.card {
			background-color: var(--card-bg-color);
			color: var(--card-text-color);
		}
		.card-secondary-bg {
			/* background-color: #EFFEDD; */
			background-color: var(--card-secondary-bg-color);
			color: var(--card-text-color);
		}
		.btn-blue-bg {
			background-color: var(--btn-blue-bg-color);
			border-color: var(--btn-blue-bg-color);
			color: var(--btn-blue-text-color);
		}
		.dropdown-item {
			background-color: var(--card-bg-color);
			color: var(--card-text-color);
		}
		/* Переопределяем цвет активного элемента в выпадающем меню */
		.dropdown-item:hover,
		.dropdown-item:active,
		.dropdown-item.active {
			background-color: var(--secondary-background-color);
			color: var(--secondary-text-color);
		}
		.card-subtitle, .text-body-secondary {
			color: var(--secondary-text-color) !important;
		}
		.form-text {
			color: var(--secondary-text-color) !important;
		}
		.text-body-secondary-2 {
			color: var(--card-secondary-text-color) !important;
		}
        .btn-transparent-bg {
			/* Прозрачный фон */
            background-color: rgba(108, 117, 125, 0.7) !important;
			/* Прозрачный бордер */
            border-color: rgba(108, 117, 125, 0.0) !important;
            /*color: white; */
			/* background-color: rgba(34, 46, 58, 0.7) !important;
			border-color: rgba(34, 46, 58, 0.0) !important; */
			/* Оставляем цвет текста белым */
			color: #ffffff !important;
        }
        .description-text {
			display: -webkit-box;
			/* Количество строк */
			-webkit-line-clamp: 4;
			-webkit-box-orient: vertical;
			overflow: hidden;
			text-overflow: ellipsis;
			/* Высота для 4 строк текста */
			max-height: 5em;
		}
        .big-top-margin {
			margin-top: 58px;
		}
		.inspect-text {
			color: var(--secondary-text-color);
			/* Можно уменьшить размер текста как нужно */
			font-size: 0.5rem;
		}
		.card-img {
			width: 100%;
			height: 100%;
			/* Заполняет весь контейнер, обрезая края, если изображение не помещается */
			object-fit: cover;
			/* Центрирует изображение в контейнере */
			object-position: center;
			/*border-radius: 0; /* Убирает закругления у самого изображения */
			/* Явно задаём нужные закругления: левый верхний и левый нижний углы */
			border-radius: 20px 0 0 20px;
		}
		.card-img-2 {
			width: 100%;
			height: 100%;
			/* Заполняет весь контейнер, обрезая края, если изображение не помещается */
			object-fit: cover;
			/* Центрирует изображение в контейнере */
			object-position: center;
			/*border-radius: 0; /* Убирает закругления у самого изображения */
			/* Явно задаём нужные закругления: левый верхний угол */
			border-radius: 20px 0 0 0;
		}
		.card-img-3 {
			width: 100%;
			height: auto;
			max-height: 250px;
			/* Заполняет весь контейнер, обрезая края, если изображение не помещается */
			object-fit: cover;
			/* Центрирует изображение в контейнере */
			object-position: center;
			/*border-radius: 0; /* Убирает закругления у самого изображения */
			/* Явно задаём нужные закругления: левый верхний и правый верхний углы */
			border-radius: 20px 20px 0 0;
		}
		/* CSS для увеличенного закругления углов карточки */
		.custom-rounded {
			/* Все углы закруглены */
			border-radius: 20px;
		}
		.custom-rounded-right {
			/* Правый нижний угол острый */
			border-radius: 20px 20px 0 20px;
			/* position: relative; /* Для псевдоэлемента */
		}
		/*.custom-rounded-right::after {
			content: '';
			position: absolute;
			bottom: 0px;
			right: -7px;
			width: 0;
			height: 0;
			border-style: solid;
			border-width: 7px 0 0 7px;
			border-color: transparent transparent transparent white;
			box-shadow: 0 .125rem .25rem rgba(0, 0, 0, .075);
		}*/
		.custom-rounded-left {
			/* Левый нижний угол острый */
			border-radius: 20px 20px 20px 0;
			/* position: relative; /* Для псевдоэлемента */
		}
		/*.custom-rounded-left::after {
			content: '';
			position: absolute;
			bottom: -0px;
			left: -7px;
			width: 0;
			height: 0;
			border-style: solid;
			border-width: 7px 7px 0 0;
			border-color: transparent white transparent transparent;
			box-shadow: 0 .125rem .25rem rgba(0, 0, 0, .075);
		}*/
		/* Закругляем рамку модального окна */
		.modal-content.custom-rounded-2 {
			width: 100%;
			height: auto;
			max-height: 70vh;
			object-fit: cover;
			object-position: center;
			border: none;
			background-color: transparent; /* Убираем белый фон */
			overflow: hidden; /* Скрываем содержимое за границами */
		}
		#imageModal .modal-content {
			border-radius: 0; /* Убираем закругление */
		}
		/* Черный цвет с большей непрозрачностью */
		.modal-backdrop {
			background-color: rgba(0, 0, 0, 0.9) !important;
		}
		.datepicker .dp__menu {
			background-color: #ffffff !important; /* Белый фон календаря */
			border: 1px solid #ccc !important; /* Светло-серая граница */
		}
		.datepicker .dp__today {
			background-color: rgba(108, 117, 125, 0.7) !important;
			color: #fff !important;
			font-weight: bold;
			border: 2px solid rgba(108, 117, 125, 0.0) !important;
		}
		.datepicker .dp__active {
			background-color: #007bff !important; /* Синий фон выбранной даты */
			color: #fff !important;
			font-weight: bold;
			border-radius: 50%; /* Круглый выделенный элемент */
		}
		.datepicker .dp__cell_inner:hover {
			background-color: #e9ecef !important; /* Светло-серый фон при наведении */
			color: #000 !important;
		}
		
    </style>
</head>
<body>
    <div id="app" v-cloak :class="{ 'dark-theme': isDarkTheme }">

		<div class="d-none d-md-block">

			<div class="container big-top-margin d-flex justify-content-center mb-4">

				<div class="card shadow-sm custom-rounded w-100" style="max-width: 350px;">
					<div class="row g-0">
						<div class="col-5">
							<div class="overflow-hidden h-100">
								<img src="https://www.limonade.pro/backend/uploads/images/templates/not_found.jpg" class="img-fluid card-img" alt="image">
							</div>
						</div>
						<div class="col-7">
							<div class="card-body">
								<h5 class="card-title">Page 404</h5>
								<div class="card-text lh-sm">
									<p>
										<!-- Этот бот работает только на узких экранах... -->
										{{ getTranslation('errors.' + 102) }}
									</p>
								</div>
								<div class="card-text lh-sm">
									<small class="text-body-secondary">
										<!-- Воспользуйтесь мобильным устройством -->
										{{ getTranslation('errors.' + 103) }}
									</small>
								</div>
								
							</div>
						</div>
					</div>
				</div>
		
			</div>

        </div>

		<div class="d-block d-md-none big-top-margin">

			<div class="container">

				<nav class="navbar bg-transparent fixed-top">
					<div class="container-fluid d-flex justify-content-around">
						
						<button @click="cleanCategory(); loadAdsList()" class="btn btn-secondary btn-transparent-bg">
							<!-- <i class="bi bi-house-door-fill"></i> -->
							<i class="bi bi-house"></i>
						</button>

						<div class="dropdown">
							<button ref="dropdownButton" class="btn btn-secondary dropdown-toggle btn-transparent-bg"
								data-bs-toggle="dropdown" aria-expanded="false" data-bs-auto-close="outside">
								<i class="bi bi-search"></i>
							</button>
							<div class="dropdown-menu shadow-sm p-3" style="width: 300px;">

								<label for="textSearch" class="form-label">
									<!-- Введите текст -->
									{{ getTranslation('menu.searchAd.writeStr') }}
									<!-- Счетчик оставшихся символов для текста -->
									<span :class="getCharCountClass(searchText, searchTextLimit)">
										({{ getRemainingChars(searchText, searchTextLimit) }})
									</span>
								</label>
								<input @keyup.enter="searchByTextOrCategory()" v-model="searchText" type="text"
									class="form-control form-control-sm mb-3"
									id="textSearch" :placeholder="getTranslation('menu.searchAd.searchTextPlaceholder')">

								<label for="categorySelect" class="form-label">
									<!-- Или выберите категорию -->
									{{ getTranslation('menu.searchAd.selectStr') }}
								<!-- <span class="text text-danger">*</span> -->
								</label>
								<select v-model="selectedMainCategory" @change="loadSubcategories('main')"
									class="form-select form-select-sm" id="categorySelect" aria-label="Small select example">
									<option value="">
										<!-- Не выбрано -->
										{{ getTranslation('menu.searchAd.notSelectedStr') }}
									</option>
									<option v-for="(cat, key) in categories" :key="key" :value="key">{{ key }}</option>
								</select>
								
								<select v-if="selectedMainCategory && subcategories1" v-model="selectedSubcategory1" @change="loadSubcategories('sub1')"
									class="form-select form-select-sm mt-3" id="subcategory1Select" aria-label="Small select example">
									<option value="">
										<!-- Выберите подкатегорию -->
										{{ getTranslation('menu.searchAd.selectSubStr') }}
									</option>
									<option v-for="(sub, key) in subcategories1" :key="key" :value="key">{{ key }}</option>
								</select>
								
								<select v-if="selectedSubcategory1 && subcategories2" v-model="selectedSubcategory2"
									class="form-select form-select-sm mt-3" id="subcategory2Select" aria-label="Small select example">
									<option value="">
										<!-- Выберите подкатегорию -->
										{{ getTranslation('menu.searchAd.selectSubStr') }}
									</option>
									<option v-for="(sub, key) in subcategories2" :key="key" :value="key">{{ key }}</option>
								</select>

								<div v-if="searchText.length > 3 || categoryCode.length > 0" class="d-flex justify-content-end mt-3">
									<button @click="searchByTextOrCategory()" class="btn btn-sm btn-blue-bg">
										<!-- :disabled="searchText.length < 4 && categoryCode.length < 1"> -->
										<!-- Искать -->
										<i class="bi bi-search"></i>
										{{ getTranslation('menu.searchAd.searchButton') }}
									</button>
								</div>
								
							</div>
						</div>

						<div class="dropdown">
							<button class="btn btn-secondary dropdown-toggle btn-transparent-bg fw-medium" data-bs-toggle="dropdown" aria-expanded="false">
								<!-- <i class="bi bi-building-fill"></i> -->
								<i class="bi bi-building"></i>
								{{ cityButton }}
							</button>
							<ul class="dropdown-menu shadow-sm">
								<li>
									<div class="dropdown-item active">
										{{ translations[currentLanguage].navBar.cities[0] }}
									</div>
								</li>
								<li>
									<div class="dropdown-item">
										{{ translations[currentLanguage].navBar.cities[1] }}
									</div>
								</li>
							</ul>
						</div>

						<button @click="setLanguage()" class="btn btn-secondary btn-transparent-bg fw-medium">
							<i class="bi bi-translate"></i>
							{{ currentLanguage.toLowerCase() }}
						</button>

						<div v-if="!isLinkOpened" class="dropdown">
							<button class="btn btn-secondary dropdown-toggle btn-transparent-bg" data-bs-toggle="dropdown" aria-expanded="false">
								<i class="bi bi-tools"></i>
								<!-- создать -->
							</button>
							<ul class="dropdown-menu shadow-sm dropdown-menu-end">
								<li class="mb-1">
									<div @click="cleanCategory(); showScreen('create')" class="dropdown-item" href="">
										<!-- создать объявление -->
										<i class="bi bi-wrench-adjustable"></i>
										<!-- <i class="bi bi-wrench-adjustable-circle"></i> -->
										{{ getTranslation('menu.myAds.createButton') }}
									</div>
								</li>
								<li>
									<div @click="loadUserAds()" class="dropdown-item" href="">
										<!-- искать созданные -->
										<i class="bi bi-search"></i>
										{{ getTranslation('menu.myAds.findButton') }}
									</div>
								</li>
								<li v-if="false">
									<div @click="showScreen('sleepBus')" class="dropdown-item" href="">
										<!-- тест -->
										<i class="bi bi-screwdriver"></i>
										тест
									</div>
								</li>
							</ul>
						</div>

					</div>
				</nav>

				<div v-if="errorMessage" class="alert alert-danger custom-rounded">{{ errorMessage }}</div>
				<div v-if="successMessage" class="alert alert-success custom-rounded">{{ successMessage }}</div>

				<div v-if="isLoading" class="d-flex justify-content-center p-5">
					<div class="spinner-grow text-secondary" role="status">
						<span class="visually-hidden">
							<!-- Загружается... -->
							{{ getTranslation('ads.isLoading') }}
						</span>
					</div>
				</div>

				<div v-if="!isLoading && showAdList && categoryCode == '' && searchText == '' && adCurrentPage == 1">

					<div class="row mb-2">

						<div class="col d-flex justify-content-center">
							<button @click="categoryCode = '1A3'; loadAdsList()" class="btn btn-secondary btn-transparent-bg">
								<!-- Снять квартиру -->
								{{ getTranslation('ads.popCategories.1') }}
							</button>
						</div>

						<div class="col d-flex justify-content-center">
							<button @click="categoryCode = '3K'; loadAdsList()" class="btn btn-secondary btn-transparent-bg">
								<!-- Мероприятия на русском языке -->
								{{ getTranslation('ads.popCategories.2') }}
							</button>
						</div>

					</div>

					<div class="row mb-2">
		
						<div class="col d-flex justify-content-center">
							<button @click="categoryCode = '2B2'; loadAdsList()" class="btn btn-secondary btn-transparent-bg">
								<!-- Купить мопед -->
								{{ getTranslation('ads.popCategories.3') }}
							</button>
						</div>

						<div class="col d-flex justify-content-center">
							<button @click="categoryCode = '4F'; loadAdsList()" class="btn btn-secondary btn-transparent-bg me-2">
								<!-- Товары для детей -->
								{{ getTranslation('ads.popCategories.4') }}
							</button>
						</div>

					</div>

					<div class="row mb-2">
		
						<div class="col d-flex justify-content-center">
							<button @click="categoryCode = '3F1'; loadAdsList()" class="btn btn-secondary btn-transparent-bg">
								<!-- Бьюти услуги -->
								{{ getTranslation('ads.popCategories.5') }}
							</button>
						</div>

						<div class="col d-flex justify-content-center">
							<button @click="categoryCode = '7'; loadAdsList()" class="btn btn-secondary btn-transparent-bg me-2">
								<!-- Полезные посты для гостей -->
								{{ getTranslation('ads.popCategories.6') }}
							</button>
						</div>

					</div>

					<div class="row mb-3">

						<div class="col d-flex justify-content-center">
							<button @click="categoryCode = '8'; loadAdsList()" class="btn btn-secondary btn-transparent-bg">
								<!-- Городские автобусы -->
								{{ getTranslation('ads.popCategories.7') }}
							</button>
						</div>

						<div class="col d-flex justify-content-center">
							<button @click="categoryCode = '9'; loadAdsList()" class="btn btn-secondary btn-transparent-bg me-2">
								<!-- Новости нашего города -->
								{{ getTranslation('ads.popCategories.9') }}
							</button>
						</div>

					</div>


				</div>

				<div v-if="!isLoading && showAdList && (adCurrentPage == 1) && adsList.length >= 20" class="row mb-3">

					<div class="col-11 offset-1">
						
						<div class="card shadow-sm card-secondary-bg custom-rounded-right">
							<div class="row g-0">
								<div class="col-5">
									<div class="overflow-hidden h-100">
										<img @click="loadAdDetail(weatherAd.id)" :src="weatherAd.cover_photo" class="img-fluid card-img" alt="image">
									</div>
								</div>
								<div class="col-7">
									<div class="card-body">
										<h5 class="card-title text-truncate">{{ weatherAd['title_' + currentLanguage.toLowerCase()] }}</h5>
										<p class="card-text description-text lh-sm">{{ weatherAd['description_' + currentLanguage.toLowerCase()] }}</p>
										<p class="card-text text-center">
											<small class="col me-2 text-body-secondary-2">
												<i class="bi bi-send-fill"></i>
												{{ weatherAd.contact.slice(0, 8) }}
											</small>
											<small class="col text-body-secondary-2">
												<i class="bi bi-calendar-date-fill"></i>
												{{ formatDate(weatherAd.created_at) }}
											</small>
										</p>
									</div>
								</div>
							</div>
						</div>					

					</div>

				</div>

				<div v-if="!isLoading && showAdList && (adCurrentPage == 1) && adsList.length >= 20" class="row mb-3">

					<div class="col-11">
						
						<div class="card shadow-sm custom-rounded-left">
							<div class="row g-0">
								<div class="col-5">
									<div class="overflow-hidden h-100">
										<img @click="loadAdDetail(dollarAd.id)" :src="dollarAd.cover_photo" class="img-fluid card-img-2" alt="image">
									</div>
								</div>
								<div class="col-7">
									<div class="card-body">
										<h5 class="card-title text-truncate">{{ dollarAd['title_' + currentLanguage.toLowerCase()] }}</h5>
										<p class="card-text description-text lh-sm">{{ dollarAd['description_' + currentLanguage.toLowerCase()] }}</p>
										<p class="card-text text-center">
											<small class="col me-2 text-body-secondary">
												<i class="bi bi-send-fill"></i>
												{{ dollarAd.contact.slice(0, 8) }}
											</small>
											<small class="col text-body-secondary">
												<i class="bi bi-calendar-date-fill"></i>
												{{ formatDate(dollarAd.created_at) }}
											</small>
										</p>
									</div>
								</div>
							</div>
						</div>					

					</div>

				</div>

				<div v-if="!isLoading && showAdList" v-for="(ad, index) in adsList" :key="ad.id" class="row mb-3">

					<div :class="['col-11', { 'offset-1': (index + 1) % 3 === 0 }]">
						
						<div class="card shadow-sm" :class="(index + 1) % 3 === 0 ? 'card-secondary-bg custom-rounded-right' : 'custom-rounded-left'">
							<div class="row g-0">
								<div class="col-5">
									<div class="overflow-hidden h-100">
										<img @click="loadAdDetail(ad.id)" :src="ad.cover_photo" class="img-fluid"
											:class="(index + 1) % 3 === 0 ? 'card-img' : 'card-img-2'" alt="image" loading="lazy">
									</div>
								</div>
								<div class="col-7">
									<div class="card-body">
										<h5 class="card-title text-truncate">{{ ad['title_' + currentLanguage.toLowerCase()] }}</h5>
										<p v-if="ad['category'].startsWith('8')"
											class="card-text description-text lh-sm">
											<i class="bi bi-sign-turn-right"></i>
											{{ localizedRoutes[ad['category']] }}</p>
											
										<p v-if="ad['category'].startsWith('8')"
											class="card-text description-text lh-sm" :class="(index + 1) % 3 === 0 ? 'text-body-secondary-2' : 'text-body-secondary'">
											<i class="bi bi-bus-front"></i>
											{{ localizedPrices[ad['category']] }}</p>
											
										<p v-else class="card-text description-text lh-sm">{{ ad['description_' + currentLanguage.toLowerCase()] }}</p>
										<p class="card-text text-center">
											<small class="col me-2" :class="(index + 1) % 3 === 0 ? 'text-body-secondary-2' : 'text-body-secondary'">
												<i class="bi bi-send-fill"></i>
												{{ ad.contact.slice(0, 8) }}
											</small>
											<!-- <small class="text-body-secondary text-truncate"> -->
											<small class="col" :class="(index + 1) % 3 === 0 ? 'text-body-secondary-2' : 'text-body-secondary'">
												<!-- Создано  -->
												<!-- <i class="bi bi-calendar-date"></i> -->
												<i class="bi bi-calendar-date-fill"></i>
												{{ formatDate(ad.created_at) }}
											</small>
										</p>
									</div>
								</div>
							</div>
						</div>					

					</div>

				</div>

				<div v-if="!isLoading && showAdList && (adCurrentPage == 1) && adsList.length >= 10" class="row mb-3">

					<div class="col-11 offset-1">
						
						<div class="card shadow-sm card-secondary-bg custom-rounded-right">
							<div class="row g-0">
								<div class="col-5">
									<div class="overflow-hidden h-100">
										<img @click="loadAdDetail(advertisement.id)" :src="advertisement.image" class="img-fluid card-img" alt="image">
									</div>
								</div>
								<div class="col-7">
									<div class="card-body">
										<h5 class="card-title text-truncate">{{ advertisement.title }}</h5>
										<p class="card-text description-text lh-sm">{{ advertisement.description }}</p>
										<p class="card-text text-center">
											<small class="col me-2 text-body-secondary-2">
												<i class="bi bi-send-fill"></i>
												{{ advertisement.contact.slice(0, 8) }}
											</small>
											<small class="col text-body-secondary-2">
												<i class="bi bi-calendar-date-fill"></i>
												{{ advertisement.date }}
											</small>
										</p>
									</div>
								</div>
							</div>
						</div>					

					</div>

				</div>

				<div v-if="!isLoading && showAdList" class="d-flex justify-content-center mb-3">
							
					<button v-if="adCurrentPage > 1" @click="adCurrentPage = 1; loadAdsList(adCurrentPage)"
						class="btn btn-secondary btn-transparent-bg me-2">
						<!-- В начало -->
						<!-- <i class="bi bi-skip-backward"></i> -->
						<i class="bi bi-skip-start-fill"></i>
						<!-- {{ getTranslation('ads.backToTopButton') }} -->
					</button>
					<button v-if="adCurrentPage > 2" @click="adCurrentPage -= 1; loadAdsList(adCurrentPage)"
						class="btn btn-secondary btn-transparent-bg fw-medium me-2">
						<!-- Назад -->
						<!-- <i class="bi bi-backspace-fill"></i> -->
						<i class="bi bi-caret-left-fill"></i>
						{{ getTranslation('ads.showLessButton') }}
					</button>
					<button v-if="adsList.length > 2 || adCurrentPage > 1" class="btn btn-outline-secondary btn-transparent-bg fw-medium me-2">
						<!-- Номер страницы -->
						{{ adCurrentPage }}
					</button>
					<button v-if="adsList.length >= 20" @click="adCurrentPage += 1; loadAdsList(adCurrentPage)"
						class="btn btn-secondary btn-transparent-bg fw-medium">
						<!-- Вперед -->
						<!-- <i class="bi bi-fast-forward"></i> -->
						<!-- <i class="bi bi-fast-forward-fill"></i> -->
						<!-- <i class="bi bi-backspace-reverse-fill"></i> -->
						<i class="bi bi-caret-right-fill"></i>
						{{ getTranslation('ads.showMoreButton') }}
					</button>

				</div>

				<div v-if="!isLoading && showAdDetail" class="row mb-5">

					<div class="col-11">

						<div class="card shadow-sm custom-rounded-left">

							<div v-if="currentAd.photo_1" class="card-img-container">
								<img 
									:src="currentAd.photo_1" 
									class="d-block w-100 img-fluid card-img-3" 
									alt="image 1" 
									@click="openModal()"
								>
								<div class="badge bg-dark text-white position-absolute top-0 end-0 m-2" style="opacity: 0.6;">
									{{ imagesLength }} {{ getTranslation('ads.adDetails.imagesNumber') }}
								</div>
							</div>

							<div class="card-body">
								<h5 class="card-title lh-sm">{{ currentAd['title_' + currentLanguage.toLowerCase()] }}</h5>

								<div v-if="!['6', '7', '9', '10'].includes(currentAd.category) && !currentAd.category.startsWith('8')"
									v-for="(categoryName, index) in getCategoryNames(currentAd.category)" 
									:key="categoryName" 
									class="d-inline-block mb-2">
									<button :class="{ 'd-none': currentAd.category.startsWith('3') && index === 1 }"
										class="btn btn-sm btn-blue-bg mb-1 me-2">
										{{ categoryName }}
									</button>
								</div>
								<div v-else class="d-inline-block mb-2">
									<button class="btn btn-sm btn-blue-bg mb-1 me-2">
									  <!-- Дополнительные категории -->
									  {{ getCategoryButtonText(currentAd.category) }}
									</button>
								</div>

								<h6 v-if="currentAd.category == '6' && currentAd.video_1" class="card-subtitle mb-2 text-body-secondary">
									<!-- Пляж около военного аэродрома -->
									{{ getTranslation('ads.adDetails.beachVideo') }}
								</h6>

								<div v-if="currentAd.category == '6' && currentAd.video_1" class="ratio ratio-16x9 mb-3">
									<iframe 
										:src="currentAd.video_1" 
										title="Пляж" 
										allowfullscreen>
									</iframe>
								</div>

								<h6 v-if="currentAd.category == '6' && currentAd.video_2" class="card-subtitle mb-2 text-body-secondary">
									<!-- Улица около военного аэродрома -->
									{{ getTranslation('ads.adDetails.streetVideo') }}
								</h6>

								<div v-if="currentAd.category == '6' && currentAd.video_2" class="ratio ratio-16x9 mb-3">
									<iframe 
										:src="currentAd.video_2" 
										title="Улица" 
										allowfullscreen>
									</iframe>
								</div>

								<p v-if="currentAd.category.startsWith('8')"
									class="card-text lh-sm" style="white-space: pre-line;">{{ localizedRoutes[currentAd.category] }}</p>

								<!-- Кнопка для карты -->
								<div v-if="currentAd.category.startsWith('8') && mapButton" @click="mapButton = false; loadMap()" 
									class="btn btn-sm btn-blue-bg mb-3">
									<!-- Показать карту -->
									{{ getTranslation('ads.adDetails.mapButton') }}
								</div>

								<!-- Элемент для карты -->
								<div v-if="currentAd.category.startsWith('8') && !mapButton"
									id="map" style="width: 100%; height: 500px;" class="mb-3"></div>
						
								<p class="card-text lh-sm" style="white-space: pre-line;">{{ currentAd['description_' + currentLanguage.toLowerCase()] }}</p>

								<h6 class="card-subtitle mb-2 text-body-secondary">
									<!-- Контакт  -->
									<i class="bi bi-send-fill"></i>
									{{ currentAd.contact }}
								</h6>

								<div class="row">
									<div class="col">
										<p class="card-text"><small class="text-body-secondary">
											<!-- Создано  -->
											<!-- <i class="bi bi-calendar-date"></i> -->
											<i class="bi bi-calendar-date-fill"></i>
											{{ getTranslation('ads.adDetails.createdStr') }}
											{{ formatDateLong(currentAd.created_at) }}</small> <span v-if="!isAdOwner"
												class="inspect-text fw-light opacity-25">{{ inspect }}</span></p>
									</div>
									<div v-if="isAdOwner" class="col">
										<p class="card-text"><small class="text-body-secondary">
											<!-- Просмотрено  -->
											<i class="bi bi-eye-fill"></i>
											{{ getTranslation('ads.adDetails.viewedStr') }}
											{{ currentAd.viewed }}</small>
										</p>
									</div>
								</div>
							</div>

							<div v-if="!isAdOwner && dislike" class="card-footer bg-transparent">
								<div class="row mb-3">
									<div class="col form-text lh-sm">
										<!-- Если вы считаете, что данное... -->
										{{ getTranslation('ads.adDetails.dislike.dislikeDescription') }}
									</div>
								</div>

								<div class="mb-3">
									<label for="FormControlTextarea11" class="form-label">
										<!-- Описание -->
										{{ getTranslation('ads.adDetails.dislike.dislikeTitleStr') }}
										<span class="text text-danger">*</span>
										<span :class="getCharCountClass(dislikeText, dislikeTextLimit)">
											({{ getRemainingChars(dislikeText, dislikeTextLimit) }})
										</span>
									</label>
									<textarea v-model="dislikeText" class="form-control form-control-sm lh-sm" id="FormControlTextarea11" rows="3"
										placeholder=""></textarea>
								</div>

								<button v-if="dislikeText.length > 4" @click="dislikeAd(currentAd.id)" class="btn btn-sm btn-blue-bg mb-2">
									<!-- Отправить жалобу -->
									<!-- <i class="bi bi-envelope-open-fill"></i> -->
									<i class="bi bi-envelope-open"></i>
									{{ getTranslation('ads.adDetails.dislike.dislikeButton') }}
								</button>
							</div>

							<div v-if="isAdOwner && deleteButton" class="card-footer bg-transparent">
								<div class="row mb-3">
									<div class="col form-text lh-sm">
										<!-- Внимание! После удаления объявление нельзя будет восстановить -->
										{{ getTranslation('ads.adDetails.delete.description') }}
									</div>
								</div>

								<button @click="deleteAd(currentAd.id)" class="btn btn-sm btn-danger mb-2">
									<!-- Удалить объявление -->
									<i class="bi bi-trash3"></i>
									<!-- <i class="bi bi-trash3-fill"></i> -->
									{{ getTranslation('ads.adDetails.delete.deleteButton') }}
								</button>
							</div>

						</div>

						<!-- Модальное окно -->
						<div class="modal fade" id="imageModal" tabindex="-1" aria-hidden="true" data-bs-backdrop="true" data-bs-keyboard="true">
							<div class="modal-dialog modal-dialog-centered modal-lg">
								<div class="modal-content custom-rounded-2">
									<div class="modal-body p-0 position-relative">
										<!-- Управление каруселью -->
										<div id="carouselModal" class="carousel slide carousel-fade">
											<!-- <div class="carousel-indicators">
												<button 
													v-for="(image, index) in images" 
													:key="index" 
													type="button" 
													:data-bs-target="'#carouselModal'" 
													:data-bs-slide-to="index" 
													:class="{ active: index === 0 }" 
													:aria-label="'Slide ' + (index + 1)">
												</button>
											</div> -->
						
											<div class="carousel-inner">
												<div 
													v-for="(image, index) in images" 
													:key="index" 
													:class="['carousel-item', { active: index === 0 }]">
													<img :src="image" class="d-block w-100 img-fluid" :alt="'Image ' + (index + 1)">
												</div>
											</div>
						
											<!-- Кнопка "Предыдущая" -->
											<button v-if="images.length > 1" class="carousel-control-prev" type="button" 
												data-bs-target="#carouselModal" data-bs-slide="prev">
												<span class="carousel-control-prev-icon" aria-hidden="true"></span>
												<span class="visually-hidden">Previous</span>
											</button>

											<!-- Кнопка "Следующая" -->
											<button v-if="images.length > 1" class="carousel-control-next" type="button" 
												data-bs-target="#carouselModal" data-bs-slide="next">
												<span class="carousel-control-next-icon" aria-hidden="true"></span>
												<span class="visually-hidden">Next</span>
											</button>
										</div>
									</div>
								</div>
							</div>
						</div>
						
					</div>

				</div>

				<nav v-if="!isLoading && showAdDetail" class="navbar bg-transparent fixed-bottom">

					<div class="container-fluid d-flex justify-content-start">

						<button v-if="!isLinkOpened" @click="returnToAdList()" class="btn btn-secondary btn-transparent-bg fw-medium me-2">
							<!-- Назад -->
							<i class="bi bi-caret-left-fill"></i>
							{{ getTranslation('ads.adDetails.backButton') }}
						</button>

						<button v-if="isLinkOpened" @click="loadAdsList()" class="btn btn-secondary btn-transparent-bg fw-medium me-2">
							<!-- Показать другие -->
							<!-- <i class="bi bi-play-fill"></i> -->
							<i class="bi bi-fast-forward-fill"></i>
							{{ getTranslation('ads.adDetails.showOthersButton') }}
						</button>

						<button v-if="!isAdOwner" @click="openDislike()" class="btn btn-secondary btn-transparent-bg fw-medium me-2">
							<!-- Пожаловаться -->
							<!-- <i class="bi bi-exclamation-circle-fill"></i> -->
							<i class="bi bi-exclamation-circle"></i>
						</button>

						<button v-if="isAdOwner" @click="openDelete()" class="btn btn-secondary btn-transparent-bg fw-medium me-2">
							<!-- Удалить объявление -->
							<i class="bi bi-trash3"></i>
							<!-- <i class="bi bi-trash3-fill"></i> -->
							<!-- {{ getTranslation('ads.adDetails.delete.deleteButton') }} -->
						</button>

						<button v-if="!isAdOwner
							&& currentAd.telegram
							&& !['6', '7', '9', '10'].includes(currentAd.category)
							&& !currentAd.category.startsWith('8')"
							@click="writeToTelegram()" class="btn btn-secondary btn-transparent-bg fw-medium me-2">
							<!-- Написать в Телеграм -->
							<i class="bi bi-pencil"></i>
							<!-- <i class="bi bi-pencil-fill"></i> -->
							{{ getTranslation('ads.adDetails.writeTelegramButton') }}
						</button>

						<button v-if="!isLinkOpened" @click="copyLink(currentAd.id)" class="btn btn-secondary btn-transparent-bg fw-medium">
							<!-- Скопировать ссылку -->
							<!-- <i class="bi bi-clipboard"></i> -->
							<!-- <i class="bi bi-clipboard-fill"></i> -->
							<!-- {{ copyIcon ? getTranslation('ads.adDetails.copiedLinkButton') : getTranslation('ads.adDetails.copyLinkButton') }} -->
							<i :class="copyIcon ? 'bi bi-clipboard-check' : 'bi bi-clipboard'"></i>
						</button>

					</div>

				</nav>

				<div v-if="!isLoading && showCreateAd" class="row mb-5">

					<div class="col-11 offset-1">

						<div class="card shadow-sm custom-rounded-right">
							<div class="card-body">
								<h5 class="card-title">
									<!-- Создать новое объявление -->
									{{ getTranslation('ads.adCreate.createStr') }}
								</h5>
								<h6 class="card-subtitle mb-2 text-body-secondary lh-sm">
									<!-- Объявление будет размещено бесплатно... -->
									{{ getTranslation('ads.adCreate.createDescriptionStr1') }}
								</h6>
								<div class="form-text mb-3 lh-sm">
									<!-- 'Фото' не обязательно, но это... -->
									<i class="bi bi-camera-fill"></i>
									{{ getTranslation('ads.adCreate.createDescriptionStr2') }}
								</div>
								
								<div class="mb-3">
									<label for="formFile1" class="form-label">
										<!-- Заглавное фото -->
										{{ getTranslation('ads.adCreate.photoTitleStr1') }}
									</label>
									<span class="form-text"> // jpeg, png, gif, < 10MB</span>
									<input @change="handleFileChange($event, 0)" class="form-control form-control-sm"
										id="formFile1" type="file">
								</div>
	
								<div v-if="photoInputs[1]" class="mb-3">
									<label for="formFile2" class="form-label">
										<!-- Фото 2 -->
										{{ getTranslation('ads.adCreate.photoTitleStr2') }}
									</label>
									<input @change="handleFileChange($event, 1)" class="form-control form-control-sm"
										id="formFile2" type="file">
								</div>
								
								<div v-if="photoInputs[2]" class="mb-3">
									<label for="formFile3" class="form-label">
										<!-- Фото 3 -->
										{{ getTranslation('ads.adCreate.photoTitleStr3') }} 
										<span class="text text-danger">
											{{ getTranslation('ads.adCreate.photoTitleStr4') }}
										</span>
									</label>
									<input @change="handleFileChange($event, 2)" class="form-control form-control-sm"
										id="formFile3" type="file">
								</div>
							
								<div class="mb-3">
									<label for="FormControlInput1" class="form-label">
										<!-- Название -->
										{{ getTranslation('ads.adCreate.adTitleStr') }}
										<span class="text text-danger">*</span>
										<!-- Счетчик оставшихся символов для названия -->
										<span :class="getCharCountClass(newAd.title, newAd.titleLimit)">
											({{ getRemainingChars(newAd.title, newAd.titleLimit) }})
										</span>
									</label>
									<input v-model="newAd.title" type="text" class="form-control form-control-sm"
										id="FormControlInput1"
										:placeholder="getTranslation('ads.adCreate.adTitlePlaceholderStr')">
								</div>

								<div class="mb-3">
									<label for="categorySelect" class="form-label">
										<!-- Категория -->
										{{ getTranslation('ads.adCreate.adCategoryStr') }}
										<span class="text text-danger">*</span>
									</label>
									<select v-model="selectedMainCategory" @change="loadSubcategories('main')" class="form-select form-select-sm"
										id="categorySelect" aria-label="Small select example">
										<option value="">
											<!-- Не выбрано -->
											{{ getTranslation('ads.adCreate.adNotSelectedCategoryStr') }}
										</option>
										<option v-for="(cat, key) in categories" :key="key" :value="key">{{ key }}</option>
									</select>
								</div>
								
								<!-- Выбор подкатегории 1 -->
								<div v-if="selectedMainCategory && subcategories1" class="mb-3">
									<!-- <label for="subcategory1Select" class="form-label">Подкатегория</label> -->
									<select v-model="selectedSubcategory1" @change="loadSubcategories('sub1')" class="form-select form-select-sm"
										id="subcategory1Select" aria-label="Small select example">
										<option value="">
											<!-- Выберите подкатегорию -->
											{{ getTranslation('ads.adCreate.adSubCategoryStr') }}
										</option>
										<option v-for="(sub, key) in subcategories1" :key="key" :value="key">{{ key }}</option>
									</select>
								</div>
								
								<!-- Выбор подкатегории 2 -->
								<div v-if="selectedSubcategory1 && subcategories2" class="mb-3">
									<!-- <label for="subcategory2Select" class="form-label">Подкатегория</label> -->
									<select v-model="selectedSubcategory2" class="form-select form-select-sm" id="subcategory2Select"
										aria-label="Small select example">
										<option value="">
											<!-- Выберите подкатегорию -->
											{{ getTranslation('ads.adCreate.adSubCategoryStr') }}
										</option>
										<option v-for="(sub, key) in subcategories2" :key="key" :value="key">{{ key }}</option>
									</select>
								</div>

								<div class="mb-3">
									<label for="FormControlTextarea1" class="form-label">
										<!-- Описание -->
										{{ getTranslation('ads.adCreate.adDescriptionStr') }}
										<span class="text text-danger">*</span>
										<span :class="getCharCountClass(newAd.description, newAd.descriptionLimit)">
											({{ getRemainingChars(newAd.description, newAd.descriptionLimit) }})
										</span>
									</label>
									<textarea v-model="newAd.description" class="form-control form-control-sm lh-sm" id="FormControlTextarea1"
										rows="5" :placeholder="getTranslation('ads.adCreate.adDescriptionPlaceholderStr')"></textarea>
								</div>
			
								<div class="mb-2">
									<label for="FormControlInput3" class="form-label">
										<!-- Контакт -->
										{{ getTranslation('ads.adCreate.adContactStr') }}
										<span class="text text-danger">*</span>
										<span :class="getCharCountClass(newAd.contact, newAd.contactLimit)">
											({{ getRemainingChars(newAd.contact, newAd.contactLimit) }})
										</span>
									</label>
									<input v-model="newAd.contact" type="text" class="form-control form-control-sm" id="FormControlInput3"
										:placeholder="getTranslation('ads.adCreate.adContactPlaceholderStr')">
								</div>
			
							</div>
						</div>

					</div>

				</div>

				<nav v-if="!isLoading && showCreateAd" class="navbar bg-transparent fixed-bottom">

					<div class="container-fluid d-flex justify-content-end">
						
						<button @click="returnToAdList()" class="btn btn-secondary btn-transparent-bg fw-medium me-2">
							<!-- Назад -->
							<i class="bi bi-caret-left-fill"></i>
							{{ getTranslation('ads.adDetails.backButton') }}
						</button>
						<button @click="createAd()" class="btn btn-secondary btn-transparent-bg fw-medium">
							<!-- Опубликовать объявление -->
							<i class="bi bi-envelope-open"></i>
							<!-- <i class="bi bi-envelope-open-fill"></i> -->
							{{ getTranslation('ads.adCreate.createButton') }}
						</button>

					</div>

				</nav>

				<div v-if="!isLoading && showSleepBus">

					<div class="row mb-3 d-flex justify-content-center">
						<div class="col-5">
							<button class="btn btn-secondary btn-blue-bg">
								Выезд: {{ formatDate(routeDate) }}
							</button>
						</div>
						<div class="col-7">
							<Datepicker v-model="routeDate" auto-apply class="datepicker" :enable-time-picker="false" :placeholder="'Выберите дату'" />
						</div>
					</div>

					<div v-if="showRoutes && !showAboutSleepBus" class="row mb-2 d-flex justify-content-center">
						<div v-for="route in routes" :key="route" class="col-auto">
						  <button @click="getRouteById(route)" type="button" class="btn btn-secondary"
							:class="selectedRouteId === route ? 'btn-blue-bg' : 'btn-transparent-bg'">
							Рейс {{ route }}
						  </button>
						</div>
					</div><br>


					<div class="container" v-if="showSeats && !showAboutSleepBus">

						<!-- Шестой ряд -->
						<div class="row mb-2">

							<div class="col-6 d-flex justify-content-center">
								<button class="btn btn-secondary btn-transparent-bg">
									<i class="bi bi-badge-wc"></i>
									Биотуалет
								</button>
							</div>
	
							<div class="col d-flex justify-content-center">
								<!-- <button @click="toggleSeat('A11')" class="btn btn-secondary" :class="busRoute.seats['A11'] ? 'btn-blue-bg' : 'btn-transparent-bg'">
									A11
								</button> -->
								<button @click="toggleSeat('A11')" class="btn btn-secondary"
									:class="{
										'btn-transparent-bg': busRoute.seats['A11'] == 1, 
										'btn-blue-bg': busRoute.seats['A11'] == 2
									}"
									:disabled="busRoute.seats['A11'] == 3">
									<span v-if="busRoute.seats['A11'] != 3">A11</span>
									<i v-else class="bi bi-x"></i>
								</button>
							</div>

							<div class="col d-flex justify-content-center">
								<!-- <button @click="toggleSeat('A12')" class="btn btn-secondary" :class="busRoute.seats['A12'] ? 'btn-blue-bg' : 'btn-transparent-bg'">
									A12
								</button> -->
								<button @click="toggleSeat('A12')" class="btn btn-secondary"
									:class="{
										'btn-transparent-bg': busRoute.seats['A12'] == 1, 
										'btn-blue-bg': busRoute.seats['A12'] == 2
									}"
									:disabled="busRoute.seats['A12'] == 3">
									<span v-if="busRoute.seats['A12'] != 3">A12</span>
									<i v-else class="bi bi-x"></i>
								</button>
							</div>
	
						</div>

						<!-- Пятый ряд -->
						<div class="row mb-2">
	
							<div class="col d-flex justify-content-center">
								<!-- <button @click="toggleSeat('B10')" class="btn btn-secondary" :class="busRoute.seats['B10'] ? 'btn-blue-bg' : 'btn-transparent-bg'">
									B10
								</button> -->
								<button @click="toggleSeat('B10')" class="btn btn-secondary"
									:class="{
										'btn-transparent-bg': busRoute.seats['B10'] == 1, 
										'btn-blue-bg': busRoute.seats['B10'] == 2
									}"
									:disabled="busRoute.seats['B10'] == 3">
									<span v-if="busRoute.seats['B10'] != 3">B10</span>
									<i v-else class="bi bi-x"></i>
								</button>
							</div>

							<div class="col d-flex justify-content-center">
								<!-- <button @click="toggleSeat('B9')" class="btn btn-secondary" :class="busRoute.seats['B9'] ? 'btn-blue-bg' : 'btn-transparent-bg'">
									B9
								</button> -->
								<button @click="toggleSeat('B9')" class="btn btn-secondary"
									:class="{
										'btn-transparent-bg': busRoute.seats['B9'] == 1, 
										'btn-blue-bg': busRoute.seats['B9'] == 2
									}"
									:disabled="busRoute.seats['B9'] == 3">
									<span v-if="busRoute.seats['B9'] != 3">B9</span>
									<i v-else class="bi bi-x"></i>
								</button>
							</div>
	
							<div class="col d-flex justify-content-center">
								<!-- <button @click="toggleSeat('A9')" class="btn btn-secondary" :class="busRoute.seats['A9'] ? 'btn-blue-bg' : 'btn-transparent-bg'">
									A9
								</button> -->
								<button @click="toggleSeat('A9')" class="btn btn-secondary"
									:class="{
										'btn-transparent-bg': busRoute.seats['A9'] == 1, 
										'btn-blue-bg': busRoute.seats['A9'] == 2
									}"
									:disabled="busRoute.seats['A9'] == 3">
									<span v-if="busRoute.seats['A9'] != 3">A9</span>
									<i v-else class="bi bi-x"></i>
								</button>
							</div>

							<div class="col d-flex justify-content-center">
								<!-- <button @click="toggleSeat('A10')" class="btn btn-secondary" :class="busRoute.seats['A10'] ? 'btn-blue-bg' : 'btn-transparent-bg'">
									A10
								</button> -->
								<button @click="toggleSeat('A10')" class="btn btn-secondary"
									:class="{
										'btn-transparent-bg': busRoute.seats['A10'] == 1, 
										'btn-blue-bg': busRoute.seats['A10'] == 2
									}"
									:disabled="busRoute.seats['A10'] == 3">
									<span v-if="busRoute.seats['A10'] != 3">A10</span>
									<i v-else class="bi bi-x"></i>
								</button>
							</div>
	
						</div>

						<!-- Четвертый ряд -->
						<div class="row mb-2">

							<div class="col d-flex justify-content-center">
								<!-- <button @click="toggleSeat('B8')" class="btn btn-secondary" :class="busRoute.seats['B8'] ? 'btn-blue-bg' : 'btn-transparent-bg'">
									B8
								</button> -->
								<button @click="toggleSeat('B8')" class="btn btn-secondary"
									:class="{
										'btn-transparent-bg': busRoute.seats['B8'] == 1, 
										'btn-blue-bg': busRoute.seats['B8'] == 2
									}"
									:disabled="busRoute.seats['B8'] == 3">
									<span v-if="busRoute.seats['B8'] != 3">B8</span>
									<i v-else class="bi bi-x"></i>
								</button>
							</div>
	
							<div class="col d-flex justify-content-center">
								<!-- <button @click="toggleSeat('B7')" class="btn btn-secondary" :class="busRoute.seats['B7'] ? 'btn-blue-bg' : 'btn-transparent-bg'">
									B7
								</button> -->
								<button @click="toggleSeat('B7')" class="btn btn-secondary"
									:class="{
										'btn-transparent-bg': busRoute.seats['B7'] == 1, 
										'btn-blue-bg': busRoute.seats['B7'] == 2
									}"
									:disabled="busRoute.seats['B7'] == 3">
									<span v-if="busRoute.seats['B7'] != 3">B7</span>
									<i v-else class="bi bi-x"></i>
								</button>
							</div>

							<div class="col d-flex justify-content-center">
								<!-- <button @click="toggleSeat('A7')" class="btn btn-secondary" :class="busRoute.seats['A7'] ? 'btn-blue-bg' : 'btn-transparent-bg'">
									A7
								</button> -->
								<button @click="toggleSeat('A7')" class="btn btn-secondary"
									:class="{
										'btn-transparent-bg': busRoute.seats['A7'] == 1, 
										'btn-blue-bg': busRoute.seats['A7'] == 2
									}"
									:disabled="busRoute.seats['A7'] == 3">
									<span v-if="busRoute.seats['A7'] != 3">A7</span>
									<i v-else class="bi bi-x"></i>
								</button>
							</div>
	
							<div class="col d-flex justify-content-center">
								<!-- <button @click="toggleSeat('A8')" class="btn btn-secondary" :class="busRoute.seats['A8'] ? 'btn-blue-bg' : 'btn-transparent-bg'">
									A8
								</button> -->
								<button @click="toggleSeat('A8')" class="btn btn-secondary"
									:class="{
										'btn-transparent-bg': busRoute.seats['A8'] == 1, 
										'btn-blue-bg': busRoute.seats['A8'] == 2
									}"
									:disabled="busRoute.seats['A8'] == 3">
									<span v-if="busRoute.seats['A8'] != 3">A8</span>
									<i v-else class="bi bi-x"></i>
								</button>
							</div>
	
						</div>

						<!-- Третий ряд -->
						<div class="row mb-2">
	
							<div class="col d-flex justify-content-center">
								<!-- <button @click="toggleSeat('B6')" class="btn btn-secondary" :class="busRoute.seats['B6'] ? 'btn-blue-bg' : 'btn-transparent-bg'">
									B6
								</button> -->
								<button @click="toggleSeat('B6')" class="btn btn-secondary"
									:class="{
										'btn-transparent-bg': busRoute.seats['B6'] == 1, 
										'btn-blue-bg': busRoute.seats['B6'] == 2
									}"
									:disabled="busRoute.seats['B6'] == 3">
									<span v-if="busRoute.seats['B6'] != 3">B6</span>
									<i v-else class="bi bi-x"></i>
								</button>
							</div>
	
							<div class="col d-flex justify-content-center">
								<!-- <button @click="toggleSeat('B5')" class="btn btn-secondary" :class="busRoute.seats['B5'] ? 'btn-blue-bg' : 'btn-transparent-bg'">
									B5
								</button> -->
								<button @click="toggleSeat('B5')" class="btn btn-secondary"
									:class="{
										'btn-transparent-bg': busRoute.seats['B5'] == 1, 
										'btn-blue-bg': busRoute.seats['B5'] == 2
									}"
									:disabled="busRoute.seats['B5'] == 3">
									<span v-if="busRoute.seats['B5'] != 3">B5</span>
									<i v-else class="bi bi-x"></i>
								</button>
							</div>

							<div class="col d-flex justify-content-center">
								<!-- <button @click="toggleSeat('A5')" class="btn btn-secondary" :class="busRoute.seats['A5'] ? 'btn-blue-bg' : 'btn-transparent-bg'">
									A5
								</button> -->
								<button @click="toggleSeat('A5')" class="btn btn-secondary"
									:class="{
										'btn-transparent-bg': busRoute.seats['A5'] == 1, 
										'btn-blue-bg': busRoute.seats['A5'] == 2
									}"
									:disabled="busRoute.seats['A5'] == 3">
									<span v-if="busRoute.seats['A5'] != 3">A5</span>
									<i v-else class="bi bi-x"></i>
								</button>
							</div>

							<div class="col d-flex justify-content-center">
								<!-- <button @click="toggleSeat('A6')" class="btn btn-secondary" :class="busRoute.seats['A6'] ? 'btn-blue-bg' : 'btn-transparent-bg'">
									A6
								</button> -->
								<button @click="toggleSeat('A6')" class="btn btn-secondary"
									:class="{
										'btn-transparent-bg': busRoute.seats['A6'] == 1, 
										'btn-blue-bg': busRoute.seats['A6'] == 2
									}"
									:disabled="busRoute.seats['A6'] == 3">
									<span v-if="busRoute.seats['A6'] != 3">A6</span>
									<i v-else class="bi bi-x"></i>
								</button>
							</div>
	
						</div>

						<!-- Второй ряд -->
						<div class="row mb-2">
	
							<div class="col d-flex justify-content-center">
								<!-- <button @click="toggleSeat('B4')" class="btn btn-secondary" :class="busRoute.seats['B4'] ? 'btn-blue-bg' : 'btn-transparent-bg'">
									B4
								</button> -->
								<button @click="toggleSeat('B4')" class="btn btn-secondary"
									:class="{
										'btn-transparent-bg': busRoute.seats['B4'] == 1, 
										'btn-blue-bg': busRoute.seats['B4'] == 2
									}"
									:disabled="busRoute.seats['B4'] == 3">
									<span v-if="busRoute.seats['B4'] != 3">B4</span>
									<i v-else class="bi bi-x"></i>
								</button>
							</div>

							<div class="col d-flex justify-content-center">
								<!-- <button @click="toggleSeat('B3')" class="btn btn-secondary" :class="busRoute.seats['B3'] ? 'btn-blue-bg' : 'btn-transparent-bg'">
									B3
								</button> -->
								<button @click="toggleSeat('B3')" class="btn btn-secondary"
									:class="{
										'btn-transparent-bg': busRoute.seats['B3'] == 1, 
										'btn-blue-bg': busRoute.seats['B3'] == 2
									}"
									:disabled="busRoute.seats['B3'] == 3">
									<span v-if="busRoute.seats['B3'] != 3">B3</span>
									<i v-else class="bi bi-x"></i>
								</button>
							</div>
	
							<div class="col d-flex justify-content-center">
								<!-- <button @click="toggleSeat('A3')" class="btn btn-secondary" :class="busRoute.seats['A3'] ? 'btn-blue-bg' : 'btn-transparent-bg'">
									A3
								</button> -->
								<button @click="toggleSeat('A3')" class="btn btn-secondary"
									:class="{
										'btn-transparent-bg': busRoute.seats['A3'] == 1, 
										'btn-blue-bg': busRoute.seats['A3'] == 2
									}"
									:disabled="busRoute.seats['A3'] == 3">
									<span v-if="busRoute.seats['A3'] != 3">A3</span>
									<i v-else class="bi bi-x"></i>
								</button>
							</div>
	
							<div class="col d-flex justify-content-center">
								<!-- <button @click="toggleSeat('A4')" class="btn btn-secondary" :class="busRoute.seats['A4'] ? 'btn-blue-bg' : 'btn-transparent-bg'">
									A4
								</button> -->
								<button @click="toggleSeat('A4')" class="btn btn-secondary"
									:class="{
										'btn-transparent-bg': busRoute.seats['A4'] == 1, 
										'btn-blue-bg': busRoute.seats['A4'] == 2
									}"
									:disabled="busRoute.seats['A4'] == 3">
									<span v-if="busRoute.seats['A4'] != 3">A4</span>
									<i v-else class="bi bi-x"></i>
								</button>
							</div>
	
						</div>

						<!-- Первый ряд -->
						<div class="row mb-2">
	
							<div class="col d-flex justify-content-center">
								<button @click="toggleSeat('B2')" class="btn btn-secondary"
									:class="{
										'btn-transparent-bg': busRoute.seats['B2'] == 1, 
										'btn-blue-bg': busRoute.seats['B2'] == 2
									}"
									:disabled="busRoute.seats['B2'] == 3">
									<span v-if="busRoute.seats['B2'] != 3">B2</span>
									<i v-else class="bi bi-x"></i>
								</button>
							</div>
	
							<div class="col d-flex justify-content-center">
								<button @click="toggleSeat('B1')" class="btn btn-secondary"
									:class="{
										'btn-transparent-bg': busRoute.seats['B1'] == 1, 
										'btn-blue-bg': busRoute.seats['B1'] == 2
									}"
									:disabled="busRoute.seats['B1'] == 3">
									<span v-if="busRoute.seats['B1'] != 3">B1</span>
									<i v-else class="bi bi-x"></i>
								</button>
							</div>

							<div class="col d-flex justify-content-center">
								<button @click="toggleSeat('A1')" class="btn btn-secondary"
									:class="{
										'btn-transparent-bg': busRoute.seats['A1'] == 1, 
										'btn-blue-bg': busRoute.seats['A1'] == 2
									}"
									:disabled="busRoute.seats['A1'] == 3">
									<span v-if="busRoute.seats['A1'] != 3">A1</span>
									<i v-else class="bi bi-x"></i>
								</button>
							</div>
	
							<div class="col d-flex justify-content-center">
								<button @click="toggleSeat('A2')" class="btn btn-secondary"
									:class="{
										'btn-transparent-bg': busRoute.seats['A2'] == 1, 
										'btn-blue-bg': busRoute.seats['A2'] == 2
									}"
									:disabled="busRoute.seats['A2'] == 3">
									<span v-if="busRoute.seats['A2'] != 3">A2</span>
									<i v-else class="bi bi-x"></i>
								</button>
							</div>
	
						</div>

						<!-- Указатели -->
						<div v-if="showArrows" class="row mb-2">
	
							<div class="col d-flex justify-content-center">
								<button class="btn btn-secondary btn-transparent-bg">
									<i class="bi bi-arrow-up-left"></i>
									Верх
								</button>
							</div>
	
							<div class="col d-flex justify-content-center">
								<button class="btn btn-secondary btn-transparent-bg">
									<i class="bi bi-arrow-down-left"></i>
									Низ
								</button>
							</div>
	
							<div class="col d-flex justify-content-center">
								<button class="btn btn-secondary btn-transparent-bg">
									<i class="bi bi-arrow-down-right"></i>
									Низ
								</button>
							</div>
	
							<div class="col d-flex justify-content-center">
								<button class="btn btn-secondary btn-transparent-bg">
									<i class="bi bi-arrow-up-right"></i>
									Верх
								</button>
							</div>
	
						</div>

						<!-- Вход -->
						<div class="row mb-2">
							<div class="col-6 d-flex justify-content-center">
								<button @click="showArrows = !showArrows" class="btn btn-secondary btn-transparent-bg">
									<i class="bi bi-box-arrow-in-right"></i>
									Вход
								</button>
							</div>
							<div class="col-6 d-flex justify-content-center">
								<button class="btn btn-secondary btn-transparent-bg">
									<i class="bi bi-person-vcard"></i>
									Водитель
								</button>
							</div>
						</div><br>
	
						<div v-if="Object.keys(selectedSeats).length > 0" class="row mb-2 d-flex justify-content-center">
							<div class="col-4">
								<button class="btn btn-secondary btn-transparent-bg">
									Места:
								</button>
							</div>
							<div v-for="seat in Object.keys(selectedSeats)" :key="seat"
								class="col-2">
								<button class="btn btn-secondary btn-blue-bg">
									{{ seat }}
								</button>
							</div>
						</div>
	
						<div v-if="Object.keys(selectedSeats).length > 0" class="row mb-3 d-flex justify-content-center">
	
							<div class="col-4">
								<button class="btn btn-secondary btn-transparent-bg">
									Стоимость:
								</button>
							</div>
	
							<div class="col-6">
								<button class="btn btn-secondary btn-blue-bg">
									{{ totalPrice }} донгов
								</button>
							</div>
	
						</div>

						<div v-if="Object.keys(selectedSeats).length > 0" class="row mb-3">
	
							<div class="col-6">
								<div class="dropdown">
									<button class="btn btn-secondary dropdown-toggle btn-transparent-bg fw-medium" data-bs-toggle="dropdown" aria-expanded="false">
	
										{{ paymentMethods[selectedPaymentMethod] }}
									</button>
									<ul class="dropdown-menu shadow-sm">
										<li v-for="(label, key) in paymentMethods" :key="key">
											<div 
												class="dropdown-item" 
												:class="{ 'active': selectedPaymentMethod == key }"
												@click="selectPaymentMethod(key)">
												{{ label }}
											</div>
										</li>
									</ul>
								</div>
							</div>
	
							<div class="col-6">
								<button @click="sendBookingToTelegram()" class="btn btn-secondary btn-transparent-bg">
									Забронировать
								</button>
							</div>
	
						</div>

					</div>

					<div class="row mb-2 d-flex justify-content-end">
						<div class="col-5">
							<button @click="showAboutSleepBus = !showAboutSleepBus" class="btn btn-secondary btn-transparent-bg">
								<i :class="showAboutSleepBus ? 'bi bi-box-arrow-in-up' : 'bi bi-box-arrow-down'"></i>
								{{ showAboutSleepBus ? 'Свернуть' : 'Подробнее' }}
							</button>
						</div>
					</div>

					<div v-if="showAboutSleepBus" class="row mb-5">
						<div class="col-11">
							<div class="card shadow-sm custom-rounded-left">
								<div class="card-img-container">
									<img 
										:src="sleepBusImages[0]"
										class="d-block w-100 img-fluid card-img-3"
										alt="image 1"
										@click="openModal()"
									>
									<div class="badge bg-dark text-white position-absolute top-0 end-0 m-2" style="opacity: 0.6;">
										3 Фото
									</div>
								</div>

								<div class="card-body">
									<h5 class="card-title lh-sm">Бордерран в Лаос</h5>
									<div class="d-inline-block mb-2">
										<button class="btn btn-sm btn-blue-bg mb-1 me-2">
											Визараны
										</button>
										<button class="btn btn-sm btn-blue-bg mb-1 me-2">
											Бордерраны
										</button>
									</div>
									<p class="card-text lh-sm" style="white-space: pre-line;">
										🚌 Здесь вы можете забронировать себе место в слипбасе на бордерран в Лаос.
									</p>
									<p class="card-text lh-sm" style="white-space: pre-line;">
										📅 Начните с выбора даты поездки. Учтите что дата на визе или в печати в вашем паспорте, это последний день вашего легального пребывания в стране. В этот день вы уже обязаны пересечь границу. Поэтому крайний день выезда из Нячанга в сторону границы с Лаосом, это один день до даты указанной в вашем паспорте. Можно раньше, но не позже.
									</p>
									<p class="card-text lh-sm" style="white-space: pre-line;">
										⏰ Выезд из города осуществляется вечером около 22:00. Примерно в 06:00 утра вы будете на границе. Сама граница открывается в 07:00 утра. Далее вы проходите паспортный контроль и возвращаетесь в свой автобус. Примерно в 11:00 автобус поедет обратно в Нячанг. В сам город вы вернетесь около 19:00 вечера.
									</p>
									<p class="card-text lh-sm" style="white-space: pre-line;">
										❄️ В автобусе есть одеяло, кондиционер, питьевая вода, ночная подсветка, USB разъемы для зарядки, биотуалет.
									</p>
									<p class="card-text lh-sm" style="white-space: pre-line;">
										🎒 Советуем взять с собой подушку, средства гигиены, шариковую ручку, снеки и напитки. Утром на самом КПП обычно прохладно, около 17'С, поэтому кофта тоже не помешает.
									</p>
									<p class="card-text lh-sm" style="white-space: pre-line;">
										☕ На границе есть несколько кафе, можно попить горячего кофе, покушать, сходить в туалет.
									</p>
									<p class="card-text lh-sm" style="white-space: pre-line;">
										📢 Номер автобуса, место посадки, точное время отправления и остальные детали мы сообщим вам после подтверждения вашей брони.
									</p>
									<p class="card-text lh-sm" style="white-space: pre-line;">
										🌍 Желаем вам удачной поездки!
									</p>									
									<h6 class="card-subtitle mb-2 text-body-secondary">
										<!-- Контакт  -->
										<i class="bi bi-send-fill"></i>
										Monica, telegram @limonade_monica
									</h6>
									<div class="row">
										<div class="col">
											<p class="card-text"><small class="text-body-secondary">
												<!-- Создано  -->
												<i class="bi bi-calendar-date-fill"></i>
												Создано: 12 Jan
										</div>
									</div>
								</div>
							</div>
	
							<!-- Модальное окно -->
							<div class="modal fade" id="imageModal" tabindex="-1" aria-hidden="true" data-bs-backdrop="true" data-bs-keyboard="true">
								<div class="modal-dialog modal-dialog-centered modal-lg">
									<div class="modal-content custom-rounded-2">
										<div class="modal-body p-0 position-relative">
											<!-- Управление каруселью -->
											<div id="carouselModal" class="carousel slide carousel-fade">
							
												<div class="carousel-inner">
													<div 
														v-for="(image, index) in sleepBusImages" 
														:key="index" 
														:class="['carousel-item', { active: index === 0 }]">
														<img :src="image" class="d-block w-100 img-fluid" :alt="'Image ' + (index + 1)">
													</div>
												</div>
							
												<!-- Кнопка "Предыдущая" -->
												<button v-if="sleepBusImages.length > 1" class="carousel-control-prev" type="button" 
													data-bs-target="#carouselModal" data-bs-slide="prev">
													<span class="carousel-control-prev-icon" aria-hidden="true"></span>
													<span class="visually-hidden">Previous</span>
												</button>
	
												<!-- Кнопка "Следующая" -->
												<button v-if="sleepBusImages.length > 1" class="carousel-control-next" type="button" 
													data-bs-target="#carouselModal" data-bs-slide="next">
													<span class="carousel-control-next-icon" aria-hidden="true"></span>
													<span class="visually-hidden">Next</span>
												</button>

											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>

					<nav v-if="!isLoading && showAboutSleepBus" class="navbar bg-transparent fixed-bottom">
						<div class="container-fluid d-flex justify-content-start">
							<button @click="askRouteCreator()" class="btn btn-secondary btn-transparent-bg fw-medium me-2">
								<!-- Написать в Телеграм -->
								<i class="bi bi-pencil"></i>
								<!-- <i class="bi bi-pencil-fill"></i> -->
								Задать вопрос
							</button>
						</div>
					</nav>

				</div>

				

			</div>

		</div>

    </div>

    <script>
        // Создание нового Vue приложения
        const app = Vue.createApp({
            data() {
                return {
					//
					tg: {},
					//
					isDarkTheme: false,
                    // отвечает за показ экрана со списком объявлений
					showAdList: false,
					// отвечает за показ экрана только с одним объявлением
					showAdDetail: false,
					//
					advertisement: {
						id: 6417,
						image: 'https://www.limonade.pro/backend/uploads/images/R3GT0.jpg',
						title: 'Реклама',
						description: "Здесь могла быть ваша реклама... Максимум 3 фото, текст до 1000 символов",
						contact: 'Monica',
						// Передаем текущую дату
						date: this.formatDate(new Date())
					},
					//
					weatherAd: {
						// id: 0,
						// image: '',
						// title: '',
						// description: '',
						// contact: '',
						// date: ''
					},
					//
					dollarAd: {
						// id: 0,
						// image: '',
						// title: '',
						// description: '',
						// contact: '',
						// date: ''
					},
					// отвечает за показ экрана для создания нового объявления
					showCreateAd: false,
					// Раздел для слипбасов
					showSleepBus: false,
					// Раздел с рейсами
					showRoutes: false,
					// Раздел с сидениями
					showSeats: false,
					// Раздел с инфой о слипбасе
					showAboutSleepBus: false,
					// Строка с указателями
					showArrows: true,
					// Выбранная дата рейса
					routeDate: null,
					// Создатель рейса
					routeCreator: '@limonade_monica',
					// Массив рейсов
					routes: [],
					// ID выбранного рейса
					selectedRouteId: null,
					// Объект нового рейса
					defaultBusRoute: {
						// Дата поездки
						date: null,
						// Создатель рейса
						createdBy: '',
						// Пароль
						password: '',
						// Статус рейса (1 - есть места, 2 - полный, 3 - уехал, 4 - удален)
						status: 1,
						// Точка отправления
						location: '',
						// Время отправления
						departureTime: '',
						// Номер автобуса
						busNumber: '',
						// Стоимость обычного билета
						basePrice: 1250000,
						// Стоимость билета на задние места
						discountPrice: 1000000,
						// Ссылка на группу в ТГ
						telegramGroup: '',
						// Пароль вайфай
						wifiPassword: '',
						
						// Места
						seats: {
							// Статус места (1 - свободно, 2 - бронь, 3 - оплачено, 4 - недоступно)
							A1: { status: 1, contact: '' },
							B1: { status: 1, contact: '' },
							A2: { status: 1, contact: '' },
							B2: { status: 1, contact: '' },
							A3: { status: 1, contact: '' },
							B3: { status: 1, contact: '' },
							A4: { status: 1, contact: '' },
							B4: { status: 1, contact: '' },
							A5: { status: 1, contact: '' },
							B5: { status: 1, contact: '' },
							A6: { status: 1, contact: '' },
							B6: { status: 1, contact: '' },
							A7: { status: 1, contact: '' },
							B7: { status: 1, contact: '' },
							A8: { status: 1, contact: '' },
							B8: { status: 1, contact: '' },
							A9: { status: 1, contact: '' },
							B9: { status: 1, contact: '' },
							A10: { status: 1, contact: '' },
							B10: { status: 1, contact: '' },
							A11: { status: 1, contact: '' },
							A12: { status: 1, contact: '' }
						}
					},
					//
					busRoute: {},
					//
					seats: {
						A1: false, B1: false, A2: false, B2: false,
						A3: false, B3: false, A4: false, B4: false,
						A5: false, B5: false, A6: false, B6: false,
						A7: false, B7: false, A8: false, B8: false,
						A9: false, B9: false, A10: false, B10: false,
						A11: false, A12: false
					},
					// Выбранные места
					selectedSeats: {},
					// Общая стоимость билетов
					totalPrice: 0,
					// Виды оплаты
					paymentMethods: {
						1: 'Перевод по QR',
						2: 'Наличная оплата'
					},
					// Значение по умолчанию
					selectedPaymentMethod: 1,
					//
					sleepBusImages: [
						'https://www.limonade.pro/backend/uploads/images/GAniF.jpg',
						'https://www.limonade.pro/backend/uploads/images/ZuRWI.jpg',
						'https://www.limonade.pro/backend/uploads/images/Wu6j9.jpg',
					],
                    // содержит массив объявлений
                    adsList: [],
                    // содержит объект одного объявления
                    currentAd: {
						photo_1: null,
						created_at: ''
					},
                    // содержит объект нового объявления (ещё не созданного)
					newAd: {
						title: '',
						// лимит названия
						titleLimit: 40,
          				description: '',
						// лимит описания
						descriptionLimit: 1000,
						contact: '',
						// лимит контакта
						contactLimit: 50,
						category: ''
					},
                    // управляет видимостью полей для фото
					photoInputs: [true, false, false], // скрываем фото 2 и фото 3
					// содержит массив загруженных фото
        			photos: [],
					//
					images: [],
					//
					imagesLength: 0,
					// показывает, что данные в процессе загрузки с сервера
                    isLoading: true,
					// содержит текст всплывающей подсказки в случае успеха
					successMessage: null,
					// содержит текст всплывающей подсказки в случае ошибки
                    errorMessage: null,
					// содержит номер текущей страницы с объявлениями
					adCurrentPage: 1,
					// указывает, является ли пользователь создателем данного объявления
					isAdOwner: false,
					// язык интерфейса по умолчанию
					currentLanguage: 'RU',
                    // словарь интерфейса
					translations: {
						RU: {
							navBar: {
								// logoButton: 'LIMONADE.PRO',
								cityButton: '',
								//
								selectCity: 'Выберите город',
								//
								cities: [
									'Нячанг',
									'Дананг',
									'Далат',
								],
								// langButton: 'RU',
								menuButton: 'Меню',
							},
							menu: {
								searchAd: {
									searchAdTab: 'Фильтровать объявления',
									writeStr: 'Введите текст',
									searchTextPlaceholder: 'Плюшевый мишка',
									selectStr: 'Выберите категорию',
									notSelectedStr: 'Не выбрано',
									selectSubStr: 'Выберите подкатегорию',
									searchButton: 'искать',
								},
								myAds: {
									myAdsTab: 'Мои объявления',
									createStr: 'Создать новое объявление',
									createDescriptionStr1: 'Объявление будет размещено бесплатно на 10 дней. Опубликованное объявление нельзя отредактировать, только удалить и создать новое.',
									createDescriptionStr2: 'Для создания объявления вам необходимо будет войти в Телеграм.',
									createButton: 'создать объявление',
									findStr: 'Найти все мои объявления',
									passwordStr: 'Пароль',
									findDescriptionStr: 'Необходимо ввести ваш ID номер в качестве пароля. Его вы получили ранее в нашем Telegram-боте:',
									findButton: 'искать созданные',
								},
								myNews: {
									myNewsTab: 'Мои новости',
									titleStr: 'Предложить новость',
									descriptionStr1: 'Если у вас есть новости о нашем городе или вы хотите поделиться событиями, которые происходят в Нячанге, напишите об этом в наш Telegram:',
									descriptionStr2: 'Мы принимаем новости на русском и английском языках. Также будем рады сопроводительным фотографиям для публикации.',
								},
								aboutUs: {
									aboutUsTab: 'О нас',
									descriptionStr1: 'Приветствуем вас на нашем сайте!',
									descriptionStr2: 'Мы, команда Limonade, приехали из России, в данный момент живем в Нячанге, Вьетнам.',
									descriptionStr3: 'Мы создали этот сайт для русскоязычного и англоязычного сообщества нашего города, чтобы упростить обмен информацией и помочь друг другу в повседневных делах. Здесь вы можете бесплатно разместить объявления о продаже, обмене вещей, предложении услуг, а также узнать о последних новостях Нячанга.',
									descriptionStr4: 'Наш сайт доступен как на русском, так и на английском языках, чтобы каждый мог легко воспользоваться его возможностями.',
									descriptionStr5: 'Если у вас есть вопросы или пожелания, свяжитесь с нами через наш Telegram:',
									descriptionStr6: 'Спасибо, что вы с нами!',
								},
							},
							ads: {
								adTab: 'Объявления',
								isLoading: 'Загружается...',
								createdStr: 'Создано:',
								viewDetailsButton: 'Посмотреть',
								showLessButton: 'назад',
								// showMoreButton: 'Показать еще...',
								showMoreButton: 'вперед',
								backToTopButton: 'В начало',
								popCategories: {
									1: 'Снять квартиру',
									2: 'Мероприятия',
									3: 'Купить мопед',
									4: 'Товары для детей',
									5: 'Бьюти услуги',
									6: 'Полезные посты',
									7: 'Городские автобусы',
									9: 'Городские новости'
								},
								adDetails: {
									imagesNumber: 'Фото',
									titleStr: '',
									categoryButtons: '',
									descriptionStr: '',
									contactStr: '',
									createdStr: 'Создано:',
									viewedStr: 'Просмотрено:',
									backButton: 'назад',
									showOthersButton: 'Показать другие',
									writeTelegramButton: 'написать',
									copyLinkButton: 'ссылка',
									copiedLinkButton: 'Ссылка скопирована в буфер',
									dislike: {
										dislikeOpenButton: '',
										dislikeDescription: 'Если вы считаете, что данное объявление содержит оскорбительные или неприемлемые материалы, пожалуйста, сообщите нам об этом.',
										dislikeTitleStr: 'Описание',
										dislikeButton: 'отправить жалобу',
									},
									delete: {
										passwordStr: 'Пароль',
										description: 'Внимание! После удаления объявление нельзя будет восстановить.',
										deleteButton: 'удалить',
									},
									weatherButton: 'Погода',
									usefulButton: 'Полезное',
									busButton: 'Автобусы',
									newsButton: 'Новости',
									dollarButton: 'Обмен',
									routes: {
										'818': 'Центр, юг, пляж Байзай, аэропорт Камрань',
										'812': 'Центр, север, пляж Зоклет',
										'851': 'Юго-запад, центр, север',
										'852': 'Юг, центр, север',
										'82': 'Юг, центр, гипермаркеты, запад',
										'86': 'Север, центр, гипермаркеты, запад',
										'823': 'Север, центр, юг, Винперл',
									},
									prices: {
										'818': '65.000 д',
										'812': '34.000 д',
										'851': '8.000 д',
										'852': '8.000 д',
										'82': '8.000 д',
										'86': '8.000 д',
										'823': '15.000 д',
									},
									mapButton: 'Показать карту',
									beachVideo: 'Пляж около военного аэродрома',
									streetVideo: 'Улица около военного аэродрома',
								},
								adCreate: {
									createStr: 'Создать новое объявление',
									createDescriptionStr1: 'Объявление будет размещено бесплатно на 10 дней. Опубликованное объявление нельзя отредактировать, только удалить и создать новое. Одновременно не более 3 объявлений.',
									createDescriptionStr2: "Фото не обязательно, но это поможет вашему объявлению выделиться на фоне других.",
									photoTitleStr1: 'Заглавное фото',
									photoTitleStr2: 'Фото 2',
									photoTitleStr3: 'Фото 3',
									photoTitleStr4: '(Максимум 3)',
									adTitleStr: 'Название',
									adTitlePlaceholderStr: 'Уроки йоги для домашних котов',
									adCategoryStr: 'Категория',
									adNotSelectedCategoryStr: 'Не выбрано',
									adSubCategoryStr: 'Выберите подкатегорию',
									adDescriptionStr: 'Описание',
									adDescriptionPlaceholderStr: 'Помогите вашему пушистому другу достичь дзен! Специальные занятия йогой для котов: растяжка, медитация и умение балансировать на диване. Ваш кот будет мурчать от удовольствия!',
									adContactStr: 'Контакт',
									adContactPlaceholderStr: 'Оксана, телеграм: @oxana_yoga',
									passwordStr: 'Пароль',
									createDescriptionStr3: 'Зайдите в наш Telegram-бот:',
									createDescriptionStr4: ", нажмите '/start', получите ваш ID номер, введите его сюда в качестве пароля.",
									createButton: 'опубликовать',
								},
							},
							news: {
								newsTab: 'Новости',
								isLoading: 'Загружается...',
								titleStr: '',
								descriptionStr: '',
								createdStr: 'Создано:',
								viewDetailsButton: 'Посмотреть',
								showLessButton: 'Назад',
								// showMoreButton: 'Показать еще...',
								showMoreButton: 'Вперед',
								backToTopButton: 'В начало',
								newsDetails: {
									titleStr: '',
									descriptionStr: '',
									authorStr: '',
									createdStr: 'Создано:',
									backButton: 'Назад',
								}
							},
							errors: {
								// Общие ошибки
								100: 'Страница не найдена',
								101: 'Ошибка с ID',
								102: 'Этот бот работает только на узких экранах...',
								103: 'Воспользуйтесь мобильным устройством',
								104: '',
								// Ошибки связанные со списком объявлений
								200: 'Ошибка с номером страницы',
								201: 'Ошибка со строкой категорий',
								202: 'Не удалось найти активных объявлений',
								203: 'Ошибка с паролем',
								204: 'Не удалось найти активного пользователя. Возможно ошибка в пароле',
								205: 'Текст который вы ищете слишком длинный',
								206: '',
								210: 'Пожалуйста, введите пароль',
								211: 'Пароль слишком длинный',
								212: 'Не найден id пользователя или он слишком длинный',
								213: '',
								214: '',
								220: 'Вы достигли лимита объявлений',
								221: '',
								222: '',
								230: 'Пожалуйста, введите текст (больше трех символов) или выберите категорию',
								231: 'Текст слишком длинный',
								232: '',
								233: '',
								// Ошибки связанные со списком новостей
								300: 'Ошибка с номером страницы',
								301: '',
								302: '',
								303: '',
								310: 'Вы достигли лимита новостей',
								311: '',
								312: '',
								// Ошибки связанные с одним объявлением
								400: 'Не удалось найти активного объявления',
								401: 'Не удалось найти активного пользователя. Возможно ошибка в пароле',
								402: 'Этот метод находится в доработке',
								403: 'Не удалось найти данные о погоде',
								404: '',
								405: '',
								410: 'Не распознан id пользователя',
								411: 'Не найден id пользователя или он слишком длинный',
								412: '',
								413: '',
								420: 'Ошибка с паролем или ID',
								421: 'Не удалось найти объявление',
								422: 'Ошибка доступа',
								423: 'Объявление было удалено ранее',
								424: '',
								425: '',
								430: 'Ошибка с текстом или ID',
								431: 'Текст объявления слишком длинный',
								432: '',
								433: '',
								440: 'Пожалуйста, введите пароль',
								441: 'Пароль слишком длинный',
								442: '',
								443: '',
								450: 'Пожалуйста, напишите текст жалобы',
								451: 'Текст жалобы слишком длинный',
								452: '',
								453: '',
								460: 'Объявление успешно удалено!',
								461: '',
								462: '',
								470: 'Жалоба на объявление принята!',
								471: '',
								472: '',
								480: 'Нет ссылки на страницу этого пользователя',
								481: '',
								482: '',
								// Ошибки связанные с одной новостью
								500: 'Не удалось найти активную новость',
								501: '',
								502: '',
								503: '',
								520: 'Ошибка с паролем или ID',
								521: 'Не удалось найти новость',
								522: 'Ошибка доступа',
								523: 'Новость была удалена ранее',
								524: '',
								525: '',
								// Ошибки связанные с созданием объявления
								600: 'Не заполнены важные поля',
								601: 'Некоторые поля нарушили лимит символов',
								602: 'Не удалось найти активного пользователя. Возможно ошибка в пароле',
								603: 'Превышен лимит объявлений. Максимум 3 шт',
								604: '',
								605: '',
								606: '',
								610: 'Не распознан id пользователя',
								611: '',
								612: '',
								620: 'Ошибка при загрузке одного из файлов',
								621: 'Один из файлов не является изображением',
								622: 'Одно из фото недопустимого формата. Можно jpeg, png, gif',
								623: 'Одно из фото превышает допустимый размер. Максимум 6 МБ',
								624: 'Одно из фото слишком маленькое. Минимум 600 * 450 или наоборот',
								625: '',
								626: '',
								630: 'Пожалуйста, напишите название',
								631: 'Пожалуйста, выберите категорию',
								632: 'Пожалуйста, напишите описание',
								633: 'Пожалуйста, напишите свой контакт',
								634: 'Пожалуйста, введите пароль',
								635: 'Название слишком длинное',
								636: 'Категория слишком длинная',
								637: 'Описание слишком длинное',
								638: 'Контакт слишком длинный',
								639: 'Пароль слишком длинный',
								640: 'Слишком много фото. Максимум 3 шт',
								641: '',
								642: '',
								650: 'Объявление успешно создано!',
								651: '',
								652: '',
								// Ошибки связанные с созданием новости
								700: 'Не заполнены важные поля',
								701: 'Некоторые поля нарушили лимит символов',
								702: 'Ошибка доступа',
								703: '',
								704: '',
								705: '',
								720: 'Ошибка при загрузке одного из файлов',
								721: 'Один из файлов не является изображением',
								722: 'Одно из фото недопустимого формата. Можно jpeg, png, gif',
								723: 'Одно из фото превышает допустимый размер. Максимум 5 МБ',
								724: 'Одно из фото слишком маленькое. Минимум 600 * 450 или наоборот',
								725: '',
								726: '',
								// Ошибки связанные с пользователем
								800: '',
								801: '',
								802: '',
								803: '',
								820: 'Ошибка с паролем или ID',
								821: 'Ошибка доступа',
								822: 'Не удалось найти пользователя',
								823: 'Пользователь был заблокирован ранее',
								824: '',
								825: '',
							},
						},
						EN: {
							navBar: {
								// logoButton: 'LIMONADE.PRO',
								cityButton: '',
								//
								selectCity: 'Select city',
								//
								cities: [
									'Nha trang',
									'Da nang',
									'Dalat',
								],
								// langButton: 'EN',
								menuButton: 'Menu',
							},
							menu: {
								searchAd: {
									searchAdTab: 'Filter ads',
									writeStr: 'Enter text',
									searchTextPlaceholder: 'Teddy bear',
									selectStr: 'Select a category',
									notSelectedStr: 'Not selected',
									selectSubStr: 'Select a subcategory',
									searchButton: 'search',
								},
								myAds: {
									myAdsTab: 'My ads',
									createStr: 'Create a new ad',
									createDescriptionStr1: 'The ad will be posted for free for 10 days. The published ad cannot be edited, only deleted and a new one created.',
									createDescriptionStr2: 'To create an ad, you will need to visit to Telegram.',
									createButton: 'create an ad',
									findStr: 'Find all my ads',
									passwordStr: 'Password',
									findDescriptionStr: 'You need to enter your ID number as a password. You received it earlier in our Telegram bot:',
									findButton: 'search created',
								},
								myNews: {
									myNewsTab: 'My news',
									titleStr: 'Suggest a news item',
									descriptionStr1: 'If you have news about our city or want to share events that are happening in Nha Trang, write about it in our Telegram:',
									descriptionStr2: 'We accept news in Russian and English. We will also be glad to receive accompanying photos for publication.',
								},
								aboutUs: {
									aboutUsTab: 'About Us',
									descriptionStr1: 'Welcome to our website!',
									descriptionStr2: 'We, the Limonade team, come from Russia and currently live in Nha Trang, Vietnam.',
									descriptionStr3: 'We created this site for the Russian and English speaking community of our city to simplify the exchange of information and help each other in everyday affairs. Here you can post free ads for sale, exchange of things, offer of services, and also learn about the latest news in Nha Trang.',
									descriptionStr4: 'Our site is available in both Russian and English so that everyone can easily use its capabilities.',
									descriptionStr5: 'If you have any questions or suggestions, please contact us via our Telegram:',
									descriptionStr6: 'Thank you for being with us!',
								},
							},
							ads: {
								adTab: 'Ads',
								isLoading: 'Loading...',
								createdStr: 'Created:',
								viewDetailsButton: 'View details',
								showLessButton: 'back',
								// showMoreButton: 'Show more...',
								showMoreButton: 'forward',
								backToTopButton: 'Back to top',
								popCategories: {
									1: 'Rent an apartment',
									2: 'Events',
									3: 'Buy a motorbike',
									4: 'Products for children',
									5: 'Beauty services',
									6: 'Useful posts',
									7: 'City bus routes',
									9: 'City news'
								},
								adDetails: {
									imagesNumber: 'Photos',
									titleStr: '',
									categoryButtons: '',
									descriptionStr: '',
									contactStr: '',
									createdStr: 'Created:',
									viewedStr: 'Viewed:',
									backButton: 'back',
									showOthersButton: 'Show others',
									writeTelegramButton: 'write',
									copyLinkButton: 'link',
									copiedLinkButton: 'Link copied to clipboard',
									dislike: {
										dislikeOpenButton: '',
										dislikeDescription: 'If you believe this ad contains offensive or inappropriate material, please let us know.',
										dislikeTitleStr: 'Description',
										dislikeButton: 'send the complaint',
									},
									delete: {
										passwordStr: 'Password',
										description: 'Attention! Once deleted, the ad cannot be restored.',
										deleteButton: 'delete',
									},
									weatherButton: 'Weather',
									usefulButton: 'Useful',
									busButton: 'Buses',
									newsButton: 'News',
									dollarButton: 'Exchange',
									routes: {
										'818': 'Center, south, Bai Dai Beach, Cam Ranh Airport',
										'812': 'Center, north, Dok Let beach',
										'851': 'Southwest, center, north',
										'852': 'South, center, north',
										'82': 'South, center, hypermarkets, west',
										'86': 'North, center, hypermarkets, west',
										'823': 'North, center, south, Vinpearl',
									},
									prices: {
										'818': '65.000 d',
										'812': '34.000 d',
										'851': '8.000 d',
										'852': '8.000 d',
										'82': '8.000 d',
										'86': '8.000 d',
										'823': '15.000 d',
									},
									mapButton: 'Show map',
									beachVideo: 'Beach near the military airfield',
									streetVideo: 'Street near the military airfield',
								},
								adCreate: {
									createStr: 'Create a new ad',
									createDescriptionStr1: 'The ad will be posted for free for 10 days. The published ad cannot be edited, only deleted and a new one created. No more than 3 ads at the time.',
									createDescriptionStr2: "Photos are not required, but they will help your listing stand out from the crowd.",
									photoTitleStr1: 'Main photo',
									photoTitleStr2: 'Photo 2',
									photoTitleStr3: 'Photo 3',
									photoTitleStr4: '(Maximum 3)',
									adTitleStr: 'Title',
									adTitlePlaceholderStr: 'Yoga lessons for home cats',
									adCategoryStr: 'Category',
									adNotSelectedCategoryStr: 'Not selected',
									adSubCategoryStr: 'Select a subcategory',
									adDescriptionStr: 'Description',
									adDescriptionPlaceholderStr: 'Help your furry friend achieve zen! Special yoga classes for cats: stretching, meditation and learning to balance on the couch. Your cat will purr with pleasure!',
									adContactStr: 'Contact',
									adContactPlaceholderStr: 'Alexa, telegram: @alexa_yoga',
									passwordStr: 'Password',
									createDescriptionStr3: 'Go to our Telegram bot:',
									createDescriptionStr4: ", press '/start', get your ID number, enter it here as a password.",
									createButton: 'post the ad',
								},
							},
							news: {
								newsTab: 'News',
								isLoading: 'Loading...',
								titleStr: '',
								descriptionStr: '',
								createdStr: 'Created:',
								viewDetailsButton: 'View details',
								showLessButton: 'Back',
								showMoreButton: 'Forward',
								backToTopButton: 'Back to top',
								newsDetails: {
									titleStr: '',
									descriptionStr: '',
									authorStr: '',
									createdStr: 'Created:',
									backButton: 'Back',
								}
							},
							errors: {
								// Общие ошибки
								100: 'Page not found',
								101: 'Error with ID',
								102: 'This bot only works on narrow screens...',
								103: 'Use a mobile device',
								104: '',
								// Ошибки связанные со списком объявлений
								200: 'Error with page number',
								201: 'Error with category string',
								202: 'Could not find active ads',
								203: 'Password error',
								204: 'Could not find active user. Possible password error',
								205: 'The text you are looking for is too long',
								206: '',
								210: 'Please enter your password',
								211: 'The password is too long',
								212: 'User id not found or too long',
								213: '',
								214: '',
								220: 'You have reached the ads limit',
								221: '',
								222: '',
								230: 'Please enter text (more than three characters) or select a category',
								231: 'The text is too long',
								232: '',
								233: '',
								// Ошибки связанные со списком новостей
								300: 'Error with page number',
								301: '',
								302: '',
								303: '',
								310: 'You have reached the news limit',
								311: '',
								312: '',
								// Ошибки связанные с одним объявлением
								400: 'Could not find active ad',
								401: 'Could not find active user. Possible password error',
								402: 'This method is under development',
								403: 'Unable to find weather data',
								404: '',
								405: '',
								410: 'User id not recognized',
								411: 'User id not found or too long',
								412: '',
								413: '',
								420: 'Error with password or ID',
								421: 'Could not find the ad',
								422: 'Access error',
								423: 'The ad was deleted earlier',
								424: '',
								425: '',
								430: 'Error with text or ID',
								431: 'The ad text is too long',
								432: '',
								433: '',
								440: 'Please enter your password',
								441: 'The password is too long',
								442: '',
								443: '',
								450: 'Please write the complaint text',
								451: 'The complaint text is too long',
								452: '',
								453: '',
								460: 'The ad has been successfully removed!',
								461: '',
								462: '',
								470: 'Complaint about the ad accepted!',
								471: '',
								472: '',
								480: 'There is no link to this user\'s page',
								481: '',
								482: '',
								// Ошибки связанные с одной новостью
								500: 'Could not find active news',
								501: '',
								502: '',
								503: '',
								520: 'Error with password or ID',
								521: 'Could not find the news',
								522: 'Access error',
								523: 'The news was deleted earlier',
								524: '',
								525: '',
								// Ошибки связанные с созданием объявления
								600: 'Important fields are not filled in',
								601: 'Some fields exceeded character limits',
								602: 'Could not find active user. Possible password error',
								603: 'Ad limit exceeded. Max 3 pcs',
								604: '',
								605: '',
								606: '',
								610: 'User id not recognized',
								611: '',
								612: '',
								620: 'Error loading one of the files',
								621: 'One of the files is not an image.',
								622: 'One of the photos is not a valid format. Jpeg, png, gif are acceptable',
								623: 'One of the photos exceeds the allowed size. Maximum 6 MB',
								624: 'One of the photos is too small. Minimum 600 * 450 or vice versa',
								625: '',
								626: '',
								630: 'Please write a title',
								631: 'Please select a category',
								632: 'Please write a description',
								633: 'Please write your contact',
								634: 'Please enter your password',
								635: 'The title is too long',
								636: 'The category is too long',
								637: 'The description is too long',
								638: 'The contact is too long',
								639: 'The password is too long',
								640: 'Too many photos. Maximum 3 pcs.',
								641: '',
								642: '',
								650: 'The ad successfully created!',
								651: '',
								652: '',
								// Ошибки связанные с созданием новости
								700: 'Important fields are not filled in',
								701: 'Some fields exceeded character limits',
								702: 'Access error',
								703: '',
								704: '',
								705: '',
								720: 'Error loading one of the files',
								721: 'One of the files is not an image.',
								722: 'One of the photos is not a valid format. Jpeg, png, gif are acceptable',
								723: 'One of the photos exceeds the allowed size. Maximum 5 MB',
								724: 'One of the photos is too small. Minimum 600 * 450 or vice versa',
								725: '',
								726: '',
								// Ошибки связанные с пользователем
								800: '',
								801: '',
								802: '',
								803: '',
								820: 'Error with password or ID',
								821: 'Access error',
								822: 'Could not find the user',
								823: 'The user was blocked earlier',
								824: '',
								825: '',
							},
						},
					},
                    // содержит весь список категорий с кодами на русском
					categoriesRu: {
						'Жильё': { code: '1', subcategories: {
								'Аренда': { code: 'A', subcategories: {
									'Кровать': { code: '1' },
									'Комната': { code: '2' },
									'Квартира': { code: '3' },
									'Дом': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Продажа': { code: 'B'
							}
						}},
						'Транспорт': { code: '2', subcategories: {
								'Аренда': { code: 'A', subcategories: {
									'Велосипед': { code: '1' },
									'Мопед': { code: '2' },
									'Мотоцикл': { code: '3' },
									'Автомобиль': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Продажа': { code: 'B', subcategories: {
									'Велосипед': { code: '1' },
									'Мопед': { code: '2' },
									'Мотоцикл': { code: '3' },
									'Автомобиль': { code: '4' },
									'Другое': { code: '5' }
							}}
						}},
						'Услуги': { code: '3', subcategories: {
								'Красота, здоровье': { code: 'F', subcategories: {
									'Красота': { code: '1' },
									'Здоровье': { code: '2' },
									// '': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Обучение, спорт': { code: 'J', subcategories: {
									'Обучение': { code: '1' },
									'Спорт': { code: '2' },
									// 'Искусство': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Тусовки, мероприятия, экскурсии': { code: 'K', subcategories: {
									'Тусовки': { code: '1' },
									'Мероприятия': { code: '2' },
									'Экскурсии': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Еда, напитки, десерты': { code: 'L', subcategories: {
									'Еда': { code: '1' },
									'Напитки': { code: '2' },
									'Десерты': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Няня, детские сады, школы': { code: 'O', subcategories: {
									'Няня': { code: '1' },
									'Детские сады': { code: '2' },
									'Школы': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Фото, видеосъемка': { code: 'R', subcategories: {
									'Фотосъемка': { code: '1' },
									'Видеосъемка': { code: '2' },
									// '': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Домашние животные': { code: 'P', subcategories: {
										// 'Домашние животные': { code: '1' },
										'Передержка животных': { code: '2' },
										'Выгул животных': { code: '3' },
										// '': { code: '4' },
										'Другое': { code: '5' }
							}},
								'Уборка, стирка, дезинсекция': { code: 'G', subcategories: {
										'Уборка': { code: '1' },
										'Стирка': { code: '2' },
										'Дезинсекция': { code: '3' },
										// '': { code: '4' },
										'Другое': { code: '5' }
							}},	
								'Мотосервис': { code: 'S', subcategories: {
									'Мотосервис': { code: '1' },
									// '': { code: '2' },
									// '': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Ремонт электроники': { code: 'H', subcategories: {
									// 'Ремонт электроники': { code: '1' },
									'Ремонт телефонов': { code: '2' },
									'Ремонт ноутбуков': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Прокат, аренда': { code: 'T', subcategories: {
										'Прокат': { code: '1' },
										'Аренда': { code: '2' },
										// '': { code: '3' },
										// '': { code: '4' },
										'Другое': { code: '5' }
							}},
								'Транспорт, грузоперевозки, визараны': { code: 'A', subcategories: {
									'Транспорт': { code: '1' },
									'Грузоперевозки': { code: '2' },
									'Визараны': { code: '3' },
									'Складские услуги': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Обмен валюты, переводы, банковские карты': { code: 'D', subcategories: {
									'Обмен валюты': { code: '1' },
									'Переводы': { code: '2' },
									'Банковские карты': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Документы, визы, билеты': { code: 'B', subcategories: {
									'Документы': { code: '1' },
									'Визы': { code: '2' },
									'Билеты': { code: '3' },
									'Страховки': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Переводчик, юридические услуги': { code: 'N', subcategories: {
									'Переводчик': { code: '1' },
									'Юридические услуги': { code: '2' },
									// '': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Поиск жилья, адаптация, камеры хранения': { code: 'E', subcategories: {
									'Поиск жилья': { code: '1' },
									'Адаптация': { code: '2' },
									'Камеры хранения': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Мобильная связь, интернет, IT': { code: 'C', subcategories: {
									'Мобильная связь': { code: '1' },
									'Интернет': { code: '2' },
									'IT': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Мелкий бытовой ремонт (муж на час)': { code: 'I', subcategories: {
									'Мелкий бытовой ремонт': { code: '1' },
									'Монтаж и установка техники': { code: '2' },
									'Ремонт одежды, обуви': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Ремонт, строительство': { code: 'M', subcategories: {
									'Ремонт': { code: '1' },
									'Строительство': { code: '2' },
									// '': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
								'Доставка товаров на дом': { code: 'Q', subcategories: {
									'Доставка товаров на дом': { code: '1' },
									// '': { code: '2' },
									// '': { code: '3' },
									// '': { code: '4' },
									'Другое': { code: '5' }
							}},
							// 	'Охрана, сторож': { code: 'U', subcategories: {
							// 		'Охрана': { code: '1' },
							// 		'Сторож': { code: '2' },
							// 		// '': { code: '3' },
							// 		// '': { code: '4' },
							// 		'Другое': { code: '5' }
							// }},
								'Другое': { code: 'Z' },
						}},
						'Товары': { code: '4', subcategories: {
								'Электроника': { code: 'A' },
								'Мебель': { code: 'B' },
								'Бытовые товары': { code: 'C' },
								'Одежда, обувь, аксессуары': { code: 'D' },
								'Еда, напитки': { code: 'E' },
								'Детские товары': { code: 'F' },
								'Животные': { code: 'G' },
								'Хобби и отдых': { code: 'H' },
								'Мотозапчасти': { code: 'I' },
								'Красота и здоровье': { code: 'J' },
								'Растения': { code: 'K' },
								'Для бизнеса': { code: 'L' },
								'Другое': { code: 'Z' }
						}},
						'Работа': { code: '5', subcategories: {
								'Предложение': { code: 'A', subcategories: {
									'Частичная занятость': { code: '1' },
									'Полная занятость': { code: '2' }
							}},
								'Поиск': { code: 'B' }
						}},
					},
					// содержит весь список категорий с кодами на русском
					categoriesEn: {
						'Housing': { code: '1', subcategories: {
								'Rent': { code: 'A', subcategories: {
									'Bed': { code: '1' },
									'Room': { code: '2' },
									'Apartment': { code: '3' },
									'House': { code: '4' },
									'Other': { code: '5' }
							}},
								'Sale': { code: 'B'
							}
						}},
						'Transport': { code: '2', subcategories: {
								'Rent': { code: 'A', subcategories: {
									'Bicycle': { code: '1' },
									'Bike': { code: '2' },
									'Motorcycle': { code: '3' },
									'Car': { code: '4' },
									'Other': { code: '5' }
							}},
								'Sale': { code: 'B', subcategories: {
									'Bicycle': { code: '1' },
									'Bike': { code: '2' },
									'Motorcycle': { code: '3' },
									'Car': { code: '4' },
									'Other': { code: '5' }
							}}
						}},
						'Services': { code: '3', subcategories: {
								'Beauty, health': { code: 'F', subcategories: {
									'Beauty': { code: '1' },
									'Health': { code: '2' },
									// '': { code: '3' },
									// '': { code: '4' },
									'Other': { code: '5' }
							}},
								'Education, sport': { code: 'J', subcategories: {
									'Education': { code: '1' },
									'Sport': { code: '2' },
									// 'Art': { code: '3' },
									// '': { code: '4' },
									'Other': { code: '5' }
							}},
								'Parties, events, excursions': { code: 'K', subcategories: {
									'Parties': { code: '1' },
									'Events': { code: '2' },
									'Excursions': { code: '3' },
									// '': { code: '4' },
									'Other': { code: '5' }
							}},
								'Food, drinks, desserts': { code: 'L', subcategories: {
									'Food': { code: '1' },
									'Drinks': { code: '2' },
									'Desserts': { code: '3' },
									// '': { code: '4' },
									'Other': { code: '5' }
							}},
								'Nanny, kindergartens, schools': { code: 'O', subcategories: {
									'Nanny': { code: '1' },
									'Kindergartens': { code: '2' },
									'Schools': { code: '3' },
									// '': { code: '4' },
									'Other': { code: '5' }
							}},
								'Photo, video shooting': { code: 'R', subcategories: {
									'Photo shooting': { code: '1' },
									'Video shooting': { code: '2' },
									// '': { code: '3' },
									// '': { code: '4' },
									'Other': { code: '5' }
							}},
								'Pets': { code: 'P', subcategories: {
									// 'Pets': { code: '1' },
									'Animal boarding': { code: '2' },
									'Walking animals': { code: '3' },
									// '': { code: '4' },
									'Other': { code: '5' }
							}},
								'Cleaning, washing, pest control': { code: 'G', subcategories: {
									'Cleaning': { code: '1' },
									'Washing': { code: '2' },
									'Disinsection': { code: '3' },
									// '': { code: '4' },
									'Other': { code: '5' }
							}},
								'Bike service': { code: 'S', subcategories: {
									'Bike service': { code: '1' },
									// '': { code: '2' },
									// '': { code: '3' },
									// '': { code: '4' },
									'Other': { code: '5' }
							}},
								'Repair of electronics': { code: 'H', subcategories: {
									// 'Electronics repair': { code: '1' },
									'Phone repair': { code: '2' },
									'Laptop repair': { code: '3' },
									// '': { code: '4' },
									'Other': { code: '5' }
							}},
								'Rent, lease': { code: 'T', subcategories: {
									'Rental': { code: '1' },
									'Leasing': { code: '2' },
									// '': { code: '3' },
									// '': { code: '4' },
									'Other': { code: '5' }
							}},
								'Transport, cargo transportation, visarun': { code: 'A', subcategories: {
									'Transport': { code: '1' },
									'Cargo transportation': { code: '2' },
									'Visarun': { code: '3' },
									'Warehouse services': { code: '4' },
									'Other': { code: '5' }
							}},
								'Currency exchange, transfers, bank cards': { code: 'D', subcategories: {
									'Currency exchange': { code: '1' },
									'Translations': { code: '2' },
									'Bank cards': { code: '3' },
									// '': { code: '4' },
									'Other': { code: '5' }
							}},
								'Documents, visas, tickets': { code: 'B', subcategories: {
									'Documents': { code: '1' },
									'Visas': { code: '2' },
									'Tickets': { code: '3' },
									'Insurance': { code: '4' },
									'Other': { code: '5' }
							}},
								'Translator, legal services': { code: 'N', subcategories: {
									'Translator': { code: '1' },
									'Legal services': { code: '2' },
									// '': { code: '3' },
									// '': { code: '4' },
									'Other': { code: '5' }
							}},
								'Search for housing, adaptation, storage lockers': { code: 'E', subcategories: {
									'Search for housing': { code: '1' },
									'Adaptation': { code: '2' },
									'Storage rooms': { code: '3' },
									// '': { code: '4' },
									'Other': { code: '5' }
							}},
								'Mobile communications, Internet, IT': { code: 'C', subcategories: {
									'Mobile communications': { code: '1' },
									'Internet': { code: '2' },
									'IT': { code: '3' },
									// '': { code: '4' },
									'Other': { code: '5' }
							}},
								'Minor household repairs (handyman)': { code: 'I', subcategories: {
									'Minor household repairs': { code: '1' },
									'Assembly and installation of equipment': { code: '2' },
									'Repair of clothes, shoes': { code: '3' },
									// '': { code: '4' },
									'Other': { code: '5' }
							}},
								'Repair, construction': { code: 'M', subcategories: {
									'Repair': { code: '1' },
									'Construction': { code: '2' },
									// '': { code: '3' },
									// '': { code: '4' },
									'Other': { code: '5' }
							}},
								'Home delivery of goods': { code: 'Q', subcategories: {
									'Home delivery of goods': { code: '1' },
									// '': { code: '2' },
									// '': { code: '3' },
									// '': { code: '4' },
									'Other': { code: '5' }
							}},
								
							// 	'Security, watchman': { code: 'U', subcategories: {
							// 		'Security': { code: '1' },
							// 		'Watchman': { code: '2' },
							// 		// '': { code: '3' },
							// 		// '': { code: '4' },
							// 		'Other': { code: '5' }
							// }},
								'Other': { code: 'Z' },
						}},
						'Goods': { code: '4', subcategories: {
								'Electronics': { code: 'A' },
								'Furniture': { code: 'B' },
								'Household goods': { code: 'C' },
								'Cloth, shoes, accessories': { code: 'D' },
								'Food, drinks': { code: 'E' },
								'Children\'s goods': { code: 'F' },
								'Animals': { code: 'G' },
								'Hobbies and recreation': { code: 'H' },
								'Bike parts': { code: 'I' },
								'Beauty and health': { code: 'J' },
								'Plants': { code: 'K' },
								'For business': { code: 'L' },
								'Other': { code: 'Z' }
						}},
						'Job': { code: '5', subcategories: {
								'Offer': { code: 'A', subcategories: {
									'Part-time employment': { code: '1' },
									'Full-time employment': { code: '2' }
							}},
								'Search': { code: 'B' }
						}},
					},
					// Выбранная головная категория
					selectedMainCategory: '',
					// Выбранная подкатегория 1
					selectedSubcategory1: '',
					// Выбранная подкатегория 2
					selectedSubcategory2: '',
					// Список подкатегорий 1
					subcategories1: null,
					// Список подкатегорий 2
					subcategories2: null,
					// Строка с итоговым кодом категории
					categoryCode: '',
					// лимит строки категории
					categoryCodeLimit: 7,
					// искомый текст
					searchText: '',
					// лимит искомого текста
					searchTextLimit: 50,
					// Флаг, показывающий, что объявление открыто по ссылке
					isLinkOpened: false,
					// флаг указывающий скопирована ссылка в буфер или нет
					copyIcon: false,
					// переменная для инспектирования
					inspect: '',
					//
					deleteButton: false,
					// указатель открытия панели жалобы
					dislike: false,
					// текст жалобы
					dislikeText: '',
					// лимит текста жалобы
					dislikeTextLimit: 400,
					// данные пользователя
					user: {
						id: null,
						// Адрес в телеграме
						username: '',
						// Имя
						firstName: '',
						// Язык интерфейса
						languageCode: '',
						// Тема оформления
						colorTheme: '',
						// Ссылка на аватар
						photoUrl: '',
					},
					// Склеенный контакт для создания нового объявления
					userFullContact: '',
					// Ссылка на карту
					map: null,
					//
					mapButton: true,
					//
            		// observer: null,
					//
					routesData: {
						818: {
							origin: { lat: 12.249534, lng: 109.192758 },
							destination: { lat: 12.012132, lng: 109.212030 },
							waypoints: [
								{ location: { lat: 12.249534, lng: 109.192758 }, stopover: false }, // 12.249534, 109.192758
								// { location: { lat: 12.2495762, lng: 109.1927843 }, stopover: false },
								{ location: { lat: 12.2471295, lng: 109.1922527 }, stopover: false },
								{ location: { lat: 12.2364987, lng: 109.1939689 }, stopover: false },
								{ location: { lat: 12.233215, lng: 109.1972188 }, stopover: false },
								{ location: { lat: 12.012132, lng: 109.212030 }, stopover: false }, // 12.012132, 109.212030
								// { location: { lat: 11.9980782, lng: 109.2189984 }, stopover: false },
							]
						},
						812: {
							origin: { lat: 12.209805, lng: 109.187137 },
							destination: { lat: 12.549722, lng: 109.227726 },
							waypoints: [
								{ location: { lat: 12.209805, lng: 109.187137 }, stopover: false },
								{ location: { lat: 12.237663, lng: 109.195295 }, stopover: false },
								{ location: { lat: 12.245942, lng: 109.191693 }, stopover: false },
								{ location: { lat: 12.261271, lng: 109.191356 }, stopover: false },
								{ location: { lat: 12.268493, lng: 109.197167 }, stopover: false },
								{ location: { lat: 12.376173, lng: 109.196432 }, stopover: false },
								{ location: { lat: 12.549722, lng: 109.227726 }, stopover: false },
							]
						},
						851: {
							origin: { lat: 12.202298, lng: 109.1912333 },
							destination: { lat: 12.2980081, lng: 109.2118132 },
							waypoints: [
								{ location: { lat: 12.202298, lng: 109.1912333 }, stopover: false },
								{ location: { lat: 12.215636, lng: 109.199744 }, stopover: false },
								{ location: { lat: 12.2375443, lng: 109.1953102 }, stopover: false },
								{ location: { lat: 12.2444376, lng: 109.194084 }, stopover: false },
								{ location: { lat: 12.2505891, lng: 109.1940957 }, stopover: false },
								{ location: { lat: 12.2540206, lng: 109.1927942 }, stopover: false },
								{ location: { lat: 12.2544107, lng: 109.1952552 }, stopover: false },
								{ location: { lat: 12.2533875, lng: 109.1962969 }, stopover: false },
								{ location: { lat: 12.2944875, lng: 109.2127969 }, stopover: false },
								{ location: { lat: 12.2980081, lng: 109.2118132 }, stopover: false },	
							]
						},
						852: {
							origin: { lat: 12.2003625, lng: 109.2135781 },
							destination: { lat: 12.2979948, lng: 109.2118071 },
							waypoints: [
								{ location: { lat: 12.2003625, lng: 109.2135781 }, stopover: false },
								// { location: { lat: 12.213557, lng: 109.1999237 }, stopover: false },
								{ location: { lat: 12.2375856, lng: 109.1954155 }, stopover: false },
								{ location: { lat: 12.2444376, lng: 109.194084 }, stopover: false },
								{ location: { lat: 12.2505891, lng: 109.1940957 }, stopover: false },
								{ location: { lat: 12.2540121, lng: 109.1927999 }, stopover: false },
								{ location: { lat: 12.2544107, lng: 109.1952552 }, stopover: false },
								{ location: { lat: 12.2533875, lng: 109.1962969 }, stopover: false },
								{ location: { lat: 12.2944875, lng: 109.2127969 }, stopover: false },
								{ location: { lat: 12.2979948, lng: 109.2118071 }, stopover: false },
							]
						},
						82: {
							origin: { lat: 12.2005625, lng: 109.1720781 },
							destination: { lat: 12.252256, lng: 109.0945057 },
							waypoints: [
								{ location: { lat: 12.2005625, lng: 109.1720781 }, stopover: false },
								{ location: { lat: 12.2132936, lng: 109.1998772 }, stopover: false },
								{ location: { lat: 12.2145052, lng: 109.2092722 }, stopover: false },
								// { location: { lat: 12.2375443, lng: 109.1953102 }, stopover: false },
								{ location: { lat: 12.2402848, lng: 109.1967283 }, stopover: false }, // 12.2402848, 109.1967283
								{ location: { lat: 12.2503079, lng: 109.1798844 }, stopover: false },
								{ location: { lat: 12.2516611, lng: 109.1770354 }, stopover: false },
								// { location: { lat: 12.2564352, lng: 109.1699559 }, stopover: false },
								{ location: { lat: 12.2553265, lng: 109.1665187 }, stopover: false }, // 12.2553265, 109.1665187
								{ location: { lat: 12.257545, lng: 109.1341025 }, stopover: false },
								{ location: { lat: 12.252256, lng: 109.0945057 }, stopover: false },								
							]
						},
						86: {
							origin: { lat: 12.336878, lng: 109.1978182 },
							destination: { lat: 12.2518948, lng: 109.0937436 },
							waypoints: [
								{ location: { lat: 12.336878, lng: 109.1978182 }, stopover: false },
								// { location: { lat: 12.2789952, lng: 109.1945071 }, stopover: false },
								{ location: { lat: 12.2816784, lng: 109.193770 }, stopover: false }, // 12.2816784, 109.193770
								// { location: { lat: 12.258977, lng: 109.1974389 }, stopover: false },
								{ location: { lat: 12.261479, lng: 109.192222 }, stopover: false }, // 12.261479, 109.192222
								{ location: { lat: 12.2507243, lng: 109.1905497 }, stopover: false },
								{ location: { lat: 12.2502013, lng: 109.1801783 }, stopover: false },
								{ location: { lat: 12.2516611, lng: 109.1770354 }, stopover: false },
								// { location: { lat: 12.2563963, lng: 109.1701802 }, stopover: false },
								{ location: { lat: 12.2553265, lng: 109.1665187 }, stopover: false }, // 12.2553265, 109.1665187
								{ location: { lat: 12.257536, lng: 109.1341023 }, stopover: false },
								{ location: { lat: 12.2518948, lng: 109.0937436 }, stopover: false },
							]
						},
						823: {
							origin: { lat: 12.3000517, lng: 109.2365280 },
							destination: { lat: 12.2060579, lng: 109.2159450 },
							waypoints: [
								{ location: { lat: 12.240964, lng: 109.196586 }, stopover: false },
								// { location: {  }, stopover: false },
							]
						},
					},
					//
                };
            },
            mounted() {
				// Проверка параметра 'ad' в URL
				const adId = new URLSearchParams(window.location.search).get('ad');
				// Если параметр ad есть, значит открываем конкретное объявление
				if (adId) {
					// Устанавливаем флаг
					this.isLinkOpened = true;
					// Загружаем детали объявления
					this.loadAdDetail(adId);
					// Убираем параметр ad из URL
					window.history.replaceState(null, null, 'https://www.limonade.pro/web');
				} else {
					// Иначе загружаем список объявлений
					this.loadAdsList();
				}
				// Проверяем обьект Телеграм
				this.initializeTelegram();
				// Склеенный контакт для создания нового объявления
				this.newAd.contact = this.userFullContact;
				// Загрузить данные о погоде
				this.loadAdWeather();
				// Загрузить данные о валюте
				this.loadAdDollar();
				//
				// this.initMap();
				
            },
			created() {
				// this.initializeTelegram();
			},
			watch: {
                // Наблюдаем за изменением второго уровня подкатегорий (третий выпадающий список)
				selectedSubcategory2() {
					this.updateCategoryCode();
				},
				//
				routeDate(newValue) {
					if (newValue) {
						this.showAboutSleepBus = false;
						// Показать экран с рейсами
						this.showRoutes = false;
						// Показать экран с сидениями
						this.showSeats = false;

						// Обнуляем значения
						this.resetBusRoute();
						//
						this.routes = [];
						//
						this.selectedRouteId = null;
						//
						this.totalPrice = 0;
						this.selectedSeats = {};
						this.selectedPaymentMethod = 1;
						// Запустить метод поиска рейсов
						this.getRoutesByDate();
					}
					// console.log("Дата выбрана:", newValue);
				}
            },
            computed: {
				// Автоматически возвращает первый город в зависимости от текущего языка
				cityButton() {
					// return this.translations[this.currentLanguage]['navBar']['cities'][0];
					return this.translations[this.currentLanguage]['navBar']['cities'][0].slice(0, 7);
				},
				//
				categories() {
					return this.currentLanguage === 'RU' ? this.categoriesRu : this.categoriesEn;
				},
				//
				localizedRoutes() {
					return {
						'818': this.getTranslation('ads.adDetails.routes.818'),
						'812': this.getTranslation('ads.adDetails.routes.812'),
						'851': this.getTranslation('ads.adDetails.routes.851'),
						'852': this.getTranslation('ads.adDetails.routes.852'),
						'82': this.getTranslation('ads.adDetails.routes.82'),
						'86': this.getTranslation('ads.adDetails.routes.86'),
						'823': this.getTranslation('ads.adDetails.routes.823')
					};
				},
				//
				localizedPrices() {
					return {
						'818': this.getTranslation('ads.adDetails.prices.818'),
						'812': this.getTranslation('ads.adDetails.prices.812'),
						'851': this.getTranslation('ads.adDetails.prices.851'),
						'852': this.getTranslation('ads.adDetails.prices.852'),
						'82': this.getTranslation('ads.adDetails.prices.82'),
						'86': this.getTranslation('ads.adDetails.prices.86'),
						'823': this.getTranslation('ads.adDetails.prices.823')
					};
				}
			},
			components: {
				// Компонент календаря
				Datepicker: VueDatePicker
			},
            methods: {
				//
				applyTheme() {
                    // Обновляем тему в зависимости от isDarkTheme
                    const theme = this.isDarkTheme ? 'dark-theme' : '';
                    document.documentElement.className = theme;
                    // console.log("Theme applied:", theme);
                },
				//
				initializeTelegram() {
					// если нет доступа к объекту Телеграм
					if (typeof window.Telegram === 'undefined' && !window.Telegram.WebApp) {

						this.errorMessage = 'Объект Telegram.WebApp недоступен';
						setTimeout(() => { this.errorMessage = ''; }, 3000);
						return;
					}

					// this.successMessage = 'Объект window.Telegram.WebApp доступен';
					// setTimeout(() => { this.successMessage = ''; }, 3000);

					// Взять объект Телеграм
					const tg = window.Telegram.WebApp;
					// Перенести объект Телеграм во vue.js
					this.tg = tg;
					// Развернуть экран в полноэкранный режим
					tg.expand();
					// Ограничить сваливание экрана
					tg.disableVerticalSwipes();

					// Узнать информацию о пользователе
					const tgUser = tg.initDataUnsafe.user;
					// если обьект не пустой
					if (tgUser) {
						// собираем даныне о нем
						this.user = {
							id: tgUser.id,
							// Адрес в телеграме
							username: tgUser.username,
							// Имя
							firstName: tgUser.first_name,
							// Язык интерфейса
							languageCode: tgUser.language_code,
							// Тема оформления
							colorTheme: tg.colorScheme,
							// Ссылка на аватар
							photoUrl: tgUser.photo_url,
						};
					}

					if (tg.colorScheme == 'dark') {
						this.isDarkTheme = true;
					}

					this.applyTheme();

					// Подготавливаем значение user_contact из userName и userContact
					//
					userName = this.user.firstName ?? 'Noname';
					//
					separator = ', telegram @';
					//
					userContact = this.user.username ?? '???';
					// Склеить строку Контакт
					this.userFullContact = userName + separator + userContact;

					// tg.showAlert(tg.colorScheme);

					// tg.showConfirm('Hello dude!');

				},
				//
				// Метод для показа сообщения об успехе
				showSuccess(message) {
					if (this.tg) {
						// Если объект Telegram Web App доступен, используем его метод showAlert
						this.tg.showAlert(message);
					} else {
						// Иначе используем Vue алерт
						this.successMessage = message;
						setTimeout(() => { this.successMessage = ''; }, 3000);
					}
				},
				//
				// Метод для показа сообщения об ошибке
				showError(message) {
					if (this.tg) {
						// Если объект Telegram Web App доступен, используем его метод showAlert
						this.tg.showAlert(message);
					} else {
						// Иначе используем Vue алерт
						this.errorMessage = message;
						setTimeout(() => { this.errorMessage = ''; }, 3000);
					}
				},
				//
				openModal() {
					this.images = [this.currentAd.photo_1, this.currentAd.photo_2, this.currentAd.photo_3].filter(Boolean);
					// Показать модальное окно
					const modal = new bootstrap.Modal(document.getElementById('imageModal'));
					modal.show();
					// Реинициализация карусели
					const carousel = document.getElementById('carouselModal');
					const carouselInstance = bootstrap.Carousel.getInstance(carousel);

					if (!carouselInstance) {
						new bootstrap.Carousel(carousel, {
							// Отключаем автопрокрутку
							interval: false,
						});
					} else {
						// Возвращаем на первый слайд
						carouselInstance.to(0);
					}
				},
                // метод очистки категорий
				cleanCategory() {
					this.selectedMainCategory = '';
					this.selectedSubcategory1 = '';
					this.selectedSubcategory2 = '';
					this.subcategories1 = null;
					this.subcategories2 = null;
					this.categoryCode = '';
					this.searchText = '';
				},
				// метод выбора, какой экран показать в данный момент
				showScreen(screen) {
					this.showAdList = screen === 'adList';
					this.showAdDetail = screen === 'adDetail';
					this.showCreateAd = screen === 'create';
					this.showSleepBus = screen === 'sleepBus';
					// 
				},
                // искать по тексту/ по категории
				searchByTextOrCategory() {
					// Закрытие выпадающего меню
					const dropdown = new bootstrap.Dropdown(this.$refs.dropdownButton);
					dropdown.hide();

					let error = null;

					// Плавная прокрутка вверх страницы после загрузки объявлений
					window.scrollTo({top: 0, behavior: 'smooth'});
					// Проверяем, введен ли текст и его длина
					if (this.searchText.length < 4 && this.categoryCode.length < 1) {
						// this.errorMessage = 'Пожалуйста, введите текст (больше трех символов) или выберите категорию';
						// this.errorMessage = this.getTranslation('errors.' + 230);
						error = this.getTranslation('errors.' + 230);

					} else if (this.getRemainingChars(this.searchText, this.searchTextLimit) < 0) {
						// this.errorMessage = 'Текст слишком длинный';
						// this.errorMessage = this.getTranslation('errors.' + 231);
						error = this.getTranslation('errors.' + 231);
					}
					// Если есть сообщение об ошибке, показываем его и выходим из метода
					// if (this.errorMessage) {
					// 	setTimeout(() => { this.errorMessage = ''; }, 3000);
					// 	return;
					// }
					if (error) {
						// Показываем сообщение об ошибке
						this.showError(error);
						return;
					}
					// запускаем метод
					this.adCurrentPage = 1;
					this.loadAdsList(this.adCurrentPage);
				},
                // метод загрузки с сервера списка объявлений
                loadAdsList(adCurrentPage = 1) {
					// Плавная прокрутка страницы вверх после загрузки объявлений
					window.scrollTo({top: 0, behavior: 'smooth'});
					this.showScreen('adList');
					this.isAdOwner = false;

					// Формируем URL для запроса
    				let url = `ad/get_list?page=${adCurrentPage}`;

					// Добавляем параметр searchText, если он не пустой
					if (this.searchText.length > 0) {
						// Удаляем пробелы в начале и в конце
						const cleanedSearchText = this.searchText.trim();
						url += `&text=${cleanedSearchText}`;
						url += `&lang=${this.currentLanguage.toLowerCase()}`;
					}

					// Добавляем параметр categoryCode, если он не пустой
					if (this.categoryCode.length > 0) {
						url += `&category=${this.categoryCode}`;
					}

					// отправляем данные на сервер
					this.isLoading = true;
                    // axios.get(`api/get_list?page=${adCurrentPage}`)
					axios.get(url)
                        .then(response => {
							//
							if (Array.isArray(response.data) && response.data.length == 0) {
								// Показываем сообщение об ошибке
								this.showError(this.getTranslation('errors.' + 220));

							} else {
								// Получаем обьявления
								if (this.searchText.length === 0 && this.categoryCode.length === 0) {
									// Перемешиваем объявления
									this.adsList = this.shuffleArray(response.data);
								} else {
									// Оставляем объявления как есть
									this.adsList = response.data;
								}
							}
							this.adCurrentPage = adCurrentPage;
							// this.cleanCategory();
							// Обнуляем флаг, чтобы вернуть к стандартному состоянию
							this.isLinkOpened = false;
                        })
                        .catch((error) => {
							// Показываем сообщение об ошибке
							this.showError(this.getTranslation('errors.' + error.response.data['code']));
							//
							this.cleanCategory();
                        })
                        .finally(() => {
                            this.isLoading = false;
                        });
                },
                // метод загрузки с сервера одного объявления по ID
                loadAdDetail(id) {
					// Плавная прокрутка страницы вверх после загрузки объявлений
					window.scrollTo({top: 0, behavior: 'smooth'});
					//
					this.images = [];
					//
					this.imagesLength = 0;
					//
					this.mapButton = true;

					// отправляем данные на сервер
                    this.isLoading = true;
                    axios.get(`ad/get_one/${id}`)
                        .then(response => {
							// загрузить данные по обьявлению
                            this.currentAd = response.data;
							// Подсчитать количество изображений
							this.imagesLength = [this.currentAd.photo_1, this.currentAd.photo_2, this.currentAd.photo_3].filter(Boolean).length;

							this.showScreen('adDetail');
							this.copyIcon = false;
							this.dislike = false;
							this.dislikeText = '';
							// поместить в переменную для инспектирования
							this.inspect = this.currentAd.user_id + ':' + this.currentAd.id;
							// Удаляем карту на всякий случай
							this.destroyMap();
						
                        })
                        .catch((error) => {
							//
                            // this.errorMessage = this.getTranslation('errors.' + error.response.data['code']);
							// Через 3 секунды (3000 миллисекунд) очищаем сообщение
							// setTimeout(() => { this.errorMessage = ''; }, 3000);
							// Показываем сообщение об ошибке
							this.showError(this.getTranslation('errors.' + error.response.data['code']));
                        })
                        .finally(() => {
                            this.isLoading = false;
                        });
                },
                // метод, возвращающий пользователя от просмотра одного объявления назад к списку уже загруженных объявлений
				returnToAdList() {
					// Переход к экрану со списком объявлений
					this.showScreen('adList');
					// Очистка обьекта текущего объявления
					this.currentAd = {photo_1: null, created_at: ''};
					//
					this.images = [];
					this.imagesLength = 0;
					this.copyIcon = false;
					this.dislike = false;
					this.dislikeText = '';
					this.deleteButton = false;
					this.mapButton = true;
					this.destroyMap();
				},
                // метод загрузки с сервера только списка своих собственных объявлений
				loadUserAds() {
					// Плавная прокрутка вверх страницы после загрузки объявлений
					window.scrollTo({top: 0, behavior: 'smooth'});

					let error = null;

					// Проверяем, есть ли user.id
					if (!this.user.id) {
						// this.errorMessage = 'Не распознан id пользователя';
						// this.errorMessage = this.getTranslation('errors.' + 610);
						error = this.getTranslation('errors.' + 610);
					}
					// Если есть сообщение об ошибке, показываем его и выходим из метода
					// if (this.errorMessage) {
					// 	setTimeout(() => { this.errorMessage = ''; }, 3000);
					// 	return;
					// }
					if (error) {
						// Показываем сообщение об ошибке
						this.showError(error);
						return;
					}
					
					this.adCurrentPage = 1;
					// отправляем данные на сервер
					this.isLoading = true;
                    axios.get(`ad/get_list_by_user/${this.user.id}`)
                        .then(response => {
							// console.log(response.data);
                            this.adsList = response.data;
							this.showScreen('adList');
							this.cleanCategory();
							this.isAdOwner = true;
                        })
                        .catch((error) => {
							//
                            // this.errorMessage = this.getTranslation('errors.' + error.response.data['code']);
							// Через 3 секунды (3000 миллисекунд) очищаем сообщение
							// setTimeout(() => { this.errorMessage = ''; }, 3000);
							// Показываем сообщение об ошибке
							this.showError(this.getTranslation('errors.' + error.response.data['code']));
                        })
                        .finally(() => {
                            this.isLoading = false;
                        });
				},
                // метод создания нового объявления (и отправка его на сервер)
				createAd() {
					// Плавная прокрутка страницы вверх
					window.scrollTo({top: 0, behavior: 'smooth'});

					let error = null;

					// Проверяем, есть ли user.id
					if (!this.user.id) {
						// this.errorMessage = 'Не распознан id пользователя';
						// this.errorMessage = this.getTranslation('errors.' + 610);
						error = this.getTranslation('errors.' + 610);
					}
					// Проверяем, введены ли параметры объявления и их длина
					if (this.newAd.title.length < 3) {
						// this.errorMessage = 'Пожалуйста, напишите название';
						// this.errorMessage = this.getTranslation('errors.' + 630);
						error = this.getTranslation('errors.' + 630);

					} else if (this.getRemainingChars(this.newAd.title, this.newAd.titleLimit) < 0) {
						// this.errorMessage = 'Название слишком длинное';
						// this.errorMessage = this.getTranslation('errors.' + 635);
						error = this.getTranslation('errors.' + 635);

					} else if (this.categoryCode.length < 1) {
						// this.errorMessage = 'Пожалуйста, выберите категорию';
						// this.errorMessage = this.getTranslation('errors.' + 631);
						error = this.getTranslation('errors.' + 631);

					} else if (this.getRemainingChars(this.categoryCode, this.categoryCodeLimit) < 0) {
						// this.errorMessage = 'Категория слишком длинная';
						// this.errorMessage = this.getTranslation('errors.' + 636);
						error = this.getTranslation('errors.' + 636);

					} else if (this.newAd.description.length < 20) {
						// this.errorMessage = 'Пожалуйста, напишите описание';
						// this.errorMessage = this.getTranslation('errors.' + 632);
						error = this.getTranslation('errors.' + 632);

					} else if (this.getRemainingChars(this.newAd.description, this.newAd.descriptionLimit) < 0) {
						// this.errorMessage = 'Описание слишком длинное';
						// this.errorMessage = this.getTranslation('errors.' + 637);
						error = this.getTranslation('errors.' + 637);

					} else if (this.newAd.contact.length < 5) {
						// this.errorMessage = 'Пожалуйста, напишите свой контакт';
						// this.errorMessage = this.getTranslation('errors.' + 633);
						error = this.getTranslation('errors.' + 633);

					} else if (this.getRemainingChars(this.newAd.contact, this.newAd.contactLimit) < 0) {
						// this.errorMessage = 'Контакт слишком длинный';
						// this.errorMessage = this.getTranslation('errors.' + 638);
						error = this.getTranslation('errors.' + 638);

					}
					// Проверяем наличие фотографий (максимум 3)
					if (this.photos.length > 3) {
						// this.errorMessage = 'Слишком много фото. Максимум 3 шт';
						// this.errorMessage = this.getTranslation('errors.' + 640);
						error = this.getTranslation('errors.' + 640);
					}
					// Если есть сообщение об ошибке, показываем его и выходим из метода
					// if (this.errorMessage) {
					// 	setTimeout(() => { this.errorMessage = ''; }, 3000);
					// 	return;
					// }
					if (error) {
						// Показываем сообщение об ошибке
						this.showError(error);
						return;
					}

					this.newAd.category = this.categoryCode;
					// формируем объект FormData для отправки данных на сервер
					const formData = new FormData();
					formData.append('title', this.newAd.title);
					formData.append('category', this.newAd.category);
					formData.append('description', this.newAd.description);
					formData.append('contact', this.newAd.contact);
					formData.append('telegram_user_id', this.user.id);
					formData.append('lang', this.currentLanguage.toLowerCase());

					// добавляем фотографии в FormData
					for (let i = 0; i < this.photos.length; i++) {
						formData.append('photos[]', this.photos[i]);
					}
					
					// отправляем данные на сервер
					this.isLoading = true;
					axios.post('ad/create', formData, {headers: {'Content-Type': 'multipart/form-data'}})
						.then(response => {
							// this.successMessage = this.getTranslation('errors.' + 650);
							// Показываем сообщение об успехе
							this.showSuccess(this.getTranslation('errors.' + 650));
							// очищаем форму
							this.newAd = { title: '', titleLimit: 40, description: '', descriptionLimit: 1000, contact: this.userFullContact, contactLimit: 50, category: '' };
							this.adCurrentPage = 1;
							this.cleanCategory();
							this.loadAdsList();
							//
							this.photoInputs = [true, false, false];
							// Очистить поле файла через ref
							// this.$refs.fileInput.value = '';
							// ref="fileInput"
							// очищаем массив фото
							this.photos = [];
							// Через 3 секунды (3000 миллисекунд) очищаем сообщение
							// setTimeout(() => { this.successMessage = ''; }, 3000);
						})
						.catch((error) => {
							//
							// this.errorMessage = this.getTranslation('errors.' + error.response.data['code']);
							// Через 3 секунды (3000 миллисекунд) очищаем сообщение
							// setTimeout(() => { this.errorMessage = ''; }, 3000);
							// Показываем сообщение об ошибке
							this.showError(this.getTranslation('errors.' + error.response.data['code']));
						})
						.finally(() => {
							this.isLoading = false;
						});
				},
                // метод обработки изменения файла в поле загрузки, обновляющий массив с фото
				handleFileChange(event, index) {
					// сохраняем выбранное фото в массиве
					const file = event.target.files[0];
					if (file) {
						this.photos[index] = file; // сохраняем файл
						if (index < this.photoInputs.length - 1) {
							this.photoInputs[index + 1] = true; // показываем следующее поле
						}
					}
				},
                // метод удаления существующего объявления
				deleteAd(id) {
					// Плавная прокрутка страницы вверх
					window.scrollTo({top: 0, behavior: 'smooth'});

					let error = null;

					/// Проверяем, есть ли user.id
					if (!this.user.id) {
						// this.errorMessage = 'Не распознан id пользователя';
						// this.errorMessage = this.getTranslation('errors.' + 610);
						error = this.getTranslation('errors.' + 610);
					}
					// Если есть сообщение об ошибке, показываем его и выходим из метода
					// if (this.errorMessage) {
					// 	setTimeout(() => { this.errorMessage = ''; }, 3000);
					// 	return;
					// }
					if (error) {
						// Показываем сообщение об ошибке
						this.showError(error);
						return;
					}

					// отправляем данные на сервер
					this.isLoading = true;
					axios.get(`ad/delete/${id}/${this.user.id}`)
						.then(response => {
							//
							// this.successMessage = this.getTranslation('errors.' + 460);
							// Показываем сообщение об успехе
							this.showSuccess(this.getTranslation('errors.' + 460));
							// удаляем объявление из массива adsList
							this.adsList = this.adsList.filter(ad => ad.id !== id);
							this.showScreen('adList');
							this.currentAd = {photo_1: null, created_at: ''};
							this.deleteButton = false;
							// Через 3 секунды (3000 миллисекунд) очищаем сообщение
							// setTimeout(() => { this.successMessage = ''; }, 3000);
						})
						.catch((error) => {
							//
                            // this.errorMessage = this.getTranslation('errors.' + error.response.data['code']);
							// Через 3 секунды (3000 миллисекунд) очищаем сообщение
							// setTimeout(() => { this.errorMessage = ''; }, 3000);
							// Показываем сообщение об ошибке
							this.showError(this.getTranslation('errors.' + error.response.data['code']));
						})
						.finally(() => {
							this.isLoading = false;
						});
				},
                //
				openDislike() {
					this.dislike = !this.dislike;
					// Гарантируем, что прокрутка произойдет после обновления DOM
					this.$nextTick(() => {
						window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
					});
				},
				//
				openDelete() {
					this.deleteButton = !this.deleteButton;
					// Гарантируем, что прокрутка произойдет после обновления DOM
					this.$nextTick(() => {
						window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
					});
				},
                //
				dislikeAd(id) {
					// Плавная прокрутка страницы вверх после загрузки объявлений
					window.scrollTo({top: 0, behavior: 'smooth'});

					let error = null;

					// Проверяем, введен ли текст жалобы и ее длину
					if (this.dislikeText.length < 20) {
						// this.errorMessage = 'Пожалуйста, введите текст жалобы';
						// this.errorMessage = this.getTranslation('errors.' + 450);
						error = this.getTranslation('errors.' + 450);

					} else if (this.getRemainingChars(this.dislikeText, this.dislikeTextLimit) < 0) {
						// this.errorMessage = 'Текст жалобы слишком длинный';
						// this.errorMessage = this.getTranslation('errors.' + 451);
						error = this.getTranslation('errors.' + 451);
					}
					// Если есть сообщение об ошибке, показываем его и выходим из метода
					// if (this.errorMessage) {
					// 	setTimeout(() => { this.errorMessage = ''; }, 3000);
					// 	return;
					// }
					if (error) {
						// Показываем сообщение об ошибке
						this.showError(error);
						return;
					}
                    
					// формируем объект FormData для отправки данных на сервер
					const formData = new FormData();
					formData.append('text', this.dislikeText);

					// отправляем данные на сервер
					this.isLoading = true;
					axios.post(`ad/dislike/${id}`, formData, {headers: {'Content-Type': 'multipart/form-data'}})
                        .then(response => {
							//
							// this.successMessage = this.getTranslation('errors.' + 470);
							// Показываем сообщение об успехе
							this.showSuccess(this.getTranslation('errors.' + 470));
							//
							this.dislike = false;
							this.dislikeText = '';
							// Через 3 секунды (3000 миллисекунд) очищаем сообщение
							// setTimeout(() => { this.successMessage = ''; }, 3000);
                        })
                        .catch((error) => {
							//
                            // this.errorMessage = this.getTranslation('errors.' + error.response.data['code']);
							// Через 3 секунды (3000 миллисекунд) очищаем сообщение
							// setTimeout(() => { this.errorMessage = ''; }, 3000);
							// Показываем сообщение об ошибке
							this.showError(this.getTranslation('errors.' + error.response.data['code']));
                        })
                        .finally(() => {
                            this.isLoading = false;
                        });
				},
                // Генерация кнопок категорий
				getCategoryNames(categoryCode) {
					// Преобразуем в строку
					categoryCode = String(categoryCode);

					const categoryNames = [];
					// let currentLevel = this.categories;
					// Выбираем правильный массив категорий в зависимости от локали
    				let currentLevel = this.currentLanguage === 'RU' ? this.categoriesRu : this.categoriesEn;

					// Проходим по каждому символу строки categoryCode
					for (const char of categoryCode) {
						// Ищем категорию на текущем уровне
						const foundCategory = Object.entries(currentLevel).find(([key, value]) => value.code === char);
						if (foundCategory) {
							const [categoryName, categoryData] = foundCategory;
							categoryNames.push(categoryName);
							
							// Если есть подкатегории, проваливаемся глубже
							if (categoryData.subcategories) {
								currentLevel = categoryData.subcategories;
							} else {
								// Если нет подкатегорий, прекращаем цикл
								break;
							}
						} else {
							// Если символ не найден, прекращаем цикл
							break;
						}
					}

					return categoryNames;
				},
                // метод копирования ссылки в буфер обмена
				copyLink(id) {
					//
					const url = `https://t.me/limonade_vietnam_bot?start=id_${id}`;
					navigator.clipboard.writeText(url)
						.then(() => {
							this.copyIcon = true;
							// Показываем сообщение об ошибке
							// this.showSuccess(this.getTranslation('errors.' + error.response.data['code']));
							this.showSuccess(this.getTranslation('ads.adDetails.copiedLinkButton'));
							// Через 3 секунды (3000 миллисекунд) очищаем сообщение
							// setTimeout(() => { this.copyIcon = false; }, 1000);
						})
						.catch(err => {
							// console.error("Ошибка при копировании ссылки: ", err);
						});
				},
                // метод установки языка
				setLanguage() {
                    if (this.currentLanguage === "RU") {
						this.currentLanguage = "EN";
					} else {
						this.currentLanguage = "RU";
					}
					this.cleanCategory();
                },
				// метод получения выбранного перевода
				getTranslation(key) {
					// Разбиваем ключ по точкам
					const keys = key.split('.');
					// Начинаем с объекта перевода для текущего языка
					let translation = this.translations[this.currentLanguage];

					// Проходим по всем частям ключа и углубляемся в объект
					for (const k of keys) {
						//
						if (translation[k] === undefined) {
							// Если ключ не найден, возвращаем пустую строку или любое другое значение по умолчанию
							return '';
						}
						// Переходим к следующему уровню объекта
						translation = translation[k];
					}
					// Возвращаем найденный перевод
					return translation;
				},
				// метод обновления выбранных категорий
				loadSubcategories(level) {
					// Если выбран уровень "main" - подгружаем первую подкатегорию или сбрасываем
					if (level === 'main') {
						if (this.selectedMainCategory) {
							this.subcategories1 = this.categories[this.selectedMainCategory].subcategories;
						} else {
							this.subcategories1 = null;
						}
						this.selectedSubcategory1 = '';
						this.selectedSubcategory2 = '';
						this.subcategories2 = null;
						this.updateCategoryCode();
					}

					// Если выбран уровень "sub1" - подгружаем подкатегорию 2 или сбрасываем
					if (level === 'sub1') {
						if (this.selectedSubcategory1) {
							this.subcategories2 = this.subcategories1[this.selectedSubcategory1].subcategories;
						} else {
							this.subcategories2 = null;
						}
						this.selectedSubcategory2 = '';
						this.updateCategoryCode();
					}
				},
				// Обновить строку с категориями
				updateCategoryCode() {
					// формирование итогового кода на основе выбора
					let mainCategoryCode = this.categories[this.selectedMainCategory]?.code || '';
					let subCategory1Code = this.subcategories1?.[this.selectedSubcategory1]?.code || '';
					let subCategory2Code = this.subcategories2?.[this.selectedSubcategory2]?.code || '';
					this.categoryCode = `${mainCategoryCode}${subCategory1Code}${subCategory2Code}`;
				},
				// Универсальный метод для подсчета оставшихся символов с учетом многобайтовых символов
				getRemainingChars(value, maxLength) {
					// const charCount = Array.from(value).length;
					// Точный подсчет количества символов
					const charCount = [...value].length;
    				return maxLength - charCount;
				},
				// Метод для динамического определения класса
				getCharCountClass(value, maxLength) {
					const remainingChars = this.getRemainingChars(value, maxLength);
					return {
						'text-danger': remainingChars < 0,  // если символов больше чем нужно
						'text-success': remainingChars >= 0 // если символов достаточно
					};
				},
				// Изменить формат даты на сокращенный
				formatDate(dateString) {
					// Преобразуем строку в объект даты
					const date = new Date(dateString);
					// Определяем нужные параметры для форматирования
					const day = date.getDate();
					// Получаем месяц в коротком формате, например, "Oct"
					const month = date.toLocaleString('en', { month: 'short' });
					// Возвращаем в формате "день месяц"
					return `${day} ${month}`;
				},
				// Изменить формат даты на более длинный
				formatDateLong(dateString) {
					// Преобразуем строку в объект даты
					const date = new Date(dateString);
					// Определяем нужные параметры для форматирования
					const day = date.getDate();
					// Получаем месяц в полном формате, например, "October"
					const month = date.toLocaleString('en', { month: 'long' });
					// Возвращаем в формате "день месяц"
					return `${day} ${month}`;
				},
				// Рандомное перемешивание объявлений в массиве
				shuffleArray(array) {
					for (let i = array.length - 1; i > 0; i--) {
						// Случайный индекс от 0 до i
						const j = Math.floor(Math.random() * (i + 1));
						// Меняем местами элементы
						[array[i], array[j]] = [array[j], array[i]];
					}
					return array;
				},
				// Написать в телеграм
				writeToTelegram() {
					if (this.currentAd.telegram) {
						// Удаляем символ "@" из строки, если он есть
						const username = this.currentAd.telegram.replace(/^@/, "");
						// Формируем ссылку
						const telegramUrl = `https://t.me/${username}`;
						// Открываем ссылку
						window.open(telegramUrl, "_blank");
					} else {
						// Показываем сообщение об ошибке
						// this.showError(this.getTranslation('errors.' + error.response.data['code']));
						// error = this.getTranslation('errors.' + 231);
						this.showError(this.getTranslation('errors.' + 480));
					}
				},
				//
				sendBookingToTelegram() {
					// Проверяем, есть ли вообще выбранные даты и места
					if (!this.routeDate || Object.keys(this.selectedSeats).length === 0) {
						this.showError("Выберите дату и хотя бы одно место");
						return;
					}
					// Форматируем дату
					const formattedDate = this.formatDate(this.routeDate);
					// Формируем список мест
					const seatsList = Object.keys(this.selectedSeats).join(", ");
					
					// Формируем сообщение
					const message = `🚍 Бронирование мест в автобусе\n📅 Дата поездки: ${formattedDate}\n📍 Места: ${seatsList}\n💰 Итоговая стоимость: ${this.totalPrice} VND\n💳 Метод оплаты: ${this.paymentMethods[this.selectedPaymentMethod]}`;

					// Удаляем "@" из имени пользователя
					const username = this.busRoute.createdBy.replace(/^@/, "");

					// Формируем ссылку для Telegram с автоматическим заполнением сообщения
					const telegramUrl = `https://t.me/${username}?text=${encodeURIComponent(message)}`;

					// Открываем Telegram с подготовленным сообщением
					window.open(telegramUrl, "_blank");
				},
				// метод загрузки с сервера одного объявления с погодой
                loadAdWeather() {
					// отправляем запрос на сервер
                    axios.get(`ad/get_weather`)
                        .then(response => {
							// загрузить данные по обьявлению
                            this.weatherAd = response.data;
							// console.log(this.weatherAd);
                        })
                        .catch((error) => {
							// Показываем сообщение об ошибке
							this.showError(this.getTranslation('errors.' + error.response.data['code']));
                        });
                },
				// метод загрузки с сервера одного объявления с погодой
                loadAdDollar() {
					// отправляем запрос на сервер
                    axios.get(`ad/get_dollar`)
                        .then(response => {
							// загрузить данные по обьявлению
                            this.dollarAd = response.data;
							// console.log(this.dollarAd);
                        })
                        .catch((error) => {
							// Показываем сообщение об ошибке
							this.showError(this.getTranslation('errors.' + error.response.data['code']));
                        });
                },
				//
				getCategoryButtonText(category) {
					const categoryTexts = {
						'6': this.getTranslation('ads.adDetails.weatherButton'), // 'Погода'
						'7': this.getTranslation('ads.adDetails.usefulButton'), // 'Полезное'
						'9': this.getTranslation('ads.adDetails.newsButton'), // 'Новости'
						'10': this.getTranslation('ads.adDetails.dollarButton'), // 'Обмен'
					};

					if (category.startsWith('8')) {
						return this.getTranslation('ads.adDetails.busButton'); // 'Автобусы'
					}

					return categoryTexts[category] || 'Другое'; // Значение по умолчанию
				},
				// Метод загрузки карты
				loadMap() {
					// Удаляем старую карту, если была
					this.destroyMap();

					// Дожидаемся полной отрисовки верстки
					Vue.nextTick(() => {

						let post = this.currentAd;
						
						// Проверяем, есть ли категория поста в routesData
						if (!this.routesData[post.category]) {
							console.error("Маршрут для категории", post.category, "не найден.");
							return;
						}

						const route = this.routesData[post.category]; // Получаем маршрут по категории

						this.map = new google.maps.Map(document.getElementById("map"), {
							center: { lat: 12.249508, lng: 109.193116 }, // Нячанг
							zoom: 12
						});

						const directionsService = new google.maps.DirectionsService();
						const directionsRenderer = new google.maps.DirectionsRenderer({
							map: this.map,
							polylineOptions: {
								strokeColor: "#1D56F9",
								strokeOpacity: 0.8,
								strokeWeight: 4
							}
						});

						const request = {
							origin: route.origin,
							destination: route.destination,
							waypoints: route.waypoints,
							travelMode: google.maps.TravelMode.DRIVING // Или TRANSIT для автобуса
						};

						directionsService.route(request, (result, status) => {
							if (status === google.maps.DirectionsStatus.OK) {
								directionsRenderer.setDirections(result);
							} else {
								console.error("Ошибка построения маршрута:", status);
							}
						});

						new google.maps.Marker({ // new google.maps.marker.AdvancedMarkerElement({
							position: route.origin, // Начальная точка
							map: this.map,
							title: "Старт"
						});

						new google.maps.Marker({ // new google.maps.marker.AdvancedMarkerElement({
							position: route.destination, // Конечная точка
							map: this.map,
							title: "Финиш"
						});
					});
				},
				// Удаление карты
				destroyMap() {
					if (this.map) {
						this.map = null;
						document.getElementById("map").innerHTML = "";
					}
				},
				//
				toggleSeat(seat) {
					// Определяем цену билета: если место A11 или A12, берем discountPrice, иначе basePrice
					const ticketPrice = ['A11', 'A12'].includes(seat) ? this.busRoute.discountPrice : this.busRoute.basePrice;

					if (this.busRoute.seats[seat] === 2) {
						// Если место уже выбрано, убираем его
						delete this.selectedSeats[seat];
						this.busRoute.seats[seat] = 1;
					} else if (this.busRoute.seats[seat] === 1) {
						// Проверяем лимит в 4 места
						if (Object.keys(this.selectedSeats).length < 4) {
							// Сохраняем цену вместо `true`
							this.selectedSeats[seat] = ticketPrice;
							this.busRoute.seats[seat] = 2;
						} else {
							this.showError('Максимум 4 места!');
							return;
						}
					}

					// Пересчитываем стоимость билетов
					this.totalPrice = Object.values(this.selectedSeats).reduce((sum, price) => sum + price, 0);
				},
				//
				selectPaymentMethod(key) {
					this.selectedPaymentMethod = key;
				},
				// Очистить текущий объект рейса
				resetBusRoute() {
					this.busRoute = JSON.parse(JSON.stringify(this.defaultBusRoute));
				},
				// Искать доступные рейсы
				getRoutesByDate() {
					// Плавная прокрутка страницы вверх
					window.scrollTo({top: 0, behavior: 'smooth'});

					// Проверяем наличие даты
					if (!this.routeDate) {
						// this.errorMessage = 'Выберите дату рейса!';
						this.showError('Выберите дату рейса!');
						return;
					}

					// Преобразуем в YYYY-MM-DD
					const formattedDate = new Intl.DateTimeFormat('fr-CA', {
						timeZone: 'Asia/Ho_Chi_Minh' // Укажи свой часовой пояс
					}).format(new Date(this.routeDate));

					// Показать экран с сидениями
					this.showSeats = false;
					// Обнулить обьект рейса
					this.resetBusRoute();
					// Обнулить выбранный id рейса
					selectedRouteId = null;

					// отправляем данные на сервер
                    this.isLoading = true;

					axios.get(`bus/check/${formattedDate}/${this.routeCreator}/1`)
                        .then(response => {
							// Загрузить данные по рейсам
							// console.log(response.data);
							this.routes = response.data;
							// Показать экран с рейсами
							this.showRoutes = true;
                        })
                        .catch((error) => {
							// Обработка ошибки
							if (error.response && error.response.data && error.response.data.error) {
								// this.errorMessage = error.response.data.error;
								this.showError(error.response.data.error);
							} else {
								// this.errorMessage = 'Ошибка поиска доступных рейсов';
								this.showError('Ошибка поиска доступных рейсов');
							}
                        })
                        .finally(() => {
                            this.isLoading = false;
                        });
                },
				// Искать конкретный рейс
				getRouteById(routeId) {
					// Плавная прокрутка страницы вверх
					window.scrollTo({top: 0, behavior: 'smooth'});

					//
					this.selectedSeats = {};
					// Запоминаем выбранный рейс
					this.selectedRouteId = routeId;

					// отправляем данные на сервер
                    this.isLoading = true;

                    axios.get(`bus/get_cropped/${this.selectedRouteId}`)
                        .then(response => {
							// Загрузить данные по рейсу
							// console.log(response.data); return;

							// Заполняем объект, учитывая возможные undefined и null
							this.busRoute = {
								// Дата поездки
								date: response.data.route_date ?? '',
								// Создатель рейса
								createdBy: response.data.created_by ?? '',
								// Статус рейса (1 - есть места, 2 - полный, 3 - уехал, 4 - удален)
								status: Number(response.data.status) || 0,
								// Точка отправления
								location: response.data.location ?? '',
								// Время отправления
								departureTime: response.data.departure_time ?? '',
								// Номер автобуса
								busNumber: response.data.bus_number ?? '',
								// Стоимость обычного билета
								basePrice: Number(response.data.base_price) || 0,
								// Стоимость билета на задние места
								discountPrice: Number(response.data.discount_price) || 0,
								// Ссылка на группу в ТГ
								telegramGroup: response.data.telegram_group ?? '',
								// Пароль вайфай
								wifiPassword: response.data.wifi_password ?? '',
								// Места
								seats: response.data.seats ?? {} // Теперь seats уже обработан на сервере
							};

							// Показать экран с сидениями
							this.showSeats = true;
                        })
                        .catch((error) => {
							// Обработка ошибки
							if (error.response && error.response.data && error.response.data.error) {
								// this.errorMessage = error.response.data.error;
								this.showError(error.response.data.error);
							} else {
								// this.errorMessage = 'Ошибка поиска рейса по id';
								this.showError('Ошибка поиска рейса по id');
							}
                        })
                        .finally(() => {
                            this.isLoading = false;
                        });
				},
				// Задать вопрос создателю рейса
				askRouteCreator() {
					// Удаляем символ "@" из строки, если он есть
					const creator = this.routeCreator.replace(/^@/, "");
					// Формируем ссылку
					const telegramUrl = `https://t.me/${creator}`;
					// Открываем ссылку
					window.open(telegramUrl, "_blank");
					
				},
				// onKeyUp(event) {
				// 	if (event.key === "Enter" || event.keyCode === 13) {
				// 		this.searchByTextOrCategory();
				// 	}
				// },
            }
        });
        // Устанавливаем глобальный базовый URL для всех запросов axios
        axios.defaults.baseURL = 'https://www.limonade.pro/web';

		app.mount('#app');
    </script>
	<!-- <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBSIuw-3YoYkTjoWuPl5S7xfdVepO-2Tkw"></script> -->
    
</body>
</html>
